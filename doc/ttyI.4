.TH TTYI 4 "2 April 1996"
.UC 4
.SH NAME
ttyI, cui \- ISDN character devices
.br
.SH DESCRIPTION
.I ttyIx and cuix
are the character devices of the isdn4linux ISND driver package.
They can be used in the same way as the traditional serial
devices
.I ttySx
and
.I cuax.
The official major device numbers are
.I 43
for ttyI
and
.I 44
for cui. The minor device numbers start with
.I 0
and end with
.I 63.

The ISDN devices provide a modem emulation with a set of
traditional and some special AT commands. This provides easy use
together with almost all communication software that uses modem
commands:
.I minicom\c
(1),
.I seyon\c
(1),
.I XCept\c
(1),
.I uucico\c
(8) (Taylor UUCP),
.I mgetty\c
(8),
.I dip\c
(8),
.I pppd\c
(8) and more.

The line disciplines are handled by the kernel so that SLIP,
CSLIP and asynchronous PPP are possible.

The port speed of the
.I ttyIx
and
.I cuix
devices is always 64000 bps.

.SH AT COMMAND SET
The following 
.I AT commands
are supported by
.I ttyIx
and
.I cuix.
.TP 8
.B ATA
Answer an incoming call.
.TP 8
.B ATD <num>
Dial number <num>. Allowed are digits [0-9] and the characters
",", "#", ".", "*", "W", "P", "T", "S", "-". The characters are
ignored except of "S" which indicates a SPV if it preceedes the
number (\c
.B only
German 1TR6 ISDN).
.TP 8
.B ATE0
Echo off.
.TP 8
.B ATE1
Echo on (default).
.TP 8
.B ATH
Hang up.
.TP 8
.B ATH0
Hang up.
.TP 8
.B ATH1
Off hook (ignored).
.TP 8 
.B ATI
Return device Information ("ISDN for Linux...").
.TP 8 
.B ATI0
Return device Information ("ISDN for Linux...").
.TP 8 
.B ATI1
Return device Information ("ISDN for Linux...").
.TP 8
.B ATO
Return from command mode to online mode (data mode).
.TP 8
.B ATQ0
Enable result codes (default).
.TP 8
.B ATQ1
Disable result codes.
.TP 8
.B ATSx=y
Set register x to value y.
.TP 8
.B ATSx?
Show content of register x.
.TP 8
.B ATV0
Print result code as number.
.TP 8
.B ATV1
Print result code as text (default).
.TP 8
.B ATZ
Reset all registers and load profile values.
.TP 8
.B AT&Bx
Set packet size of outgoing packets to value x (maximum 4000).
The actual packet size depends on the hardware driver and may be
smaller than the given value x (e.g. with the teles driver).
There will be
.B no
error message if the value is bigger than the hardware driver
can process. However the size of the outgoing packets will be
set correctly.
.TP 8
.B AT&D2
DTR falling edge: hang up and return to command mode (default).
.TP 8
.B AT&D3
DTR falling edge: hang up, return to command mode and reset all
registers.
.TP 8
.B AT&Ex
Set MSN (Euro-ISDN, E-DSS1) or EAZ (German 1TR6) to value x. For
MSNs set x to the whole MSN, for EAZ's x should be only the last
digit of the Number.
.TP 8
.B AT&F
Set all registers and profile to "factory-defaults".
.TP 8
.B AT&V
Show all settings.
.TP 8
.B AT&W0
Write registers and EAZ/MSN to profile. (You need to run
.I iprofd\c
(8) for making changes permanent.)
.TP 8
.B AT&Xx
Enable (x=1) or disable (x=0) BTX-Mode.
.LP
.SH ESCAPE SEQUENCE
During a connection the driver can be set to command mode while
typing in
.B<delay>+++<delay>.
The escape character (default "+") may be set via register 2.
The delay must be at least 1.5 seconds, between each escape
character the pause must not exceed 0.5 seconds.
.LP
.I
ATO
brings the modem emulation back to data mode.
.LP
.SH REGISTERS
.TP 4
.B 0
Number of rings on which the "modem" will answer. (S0=0 will
disable auto answering). (Default 0).
.TP 4
.B 1
Counts and stores the number of rings from an incoming call.
.TP 4
.B 2
ASCII code of the escape character. (Default 43 = "+").
.TP 4
.B 3
ASCII code of Carriage Return (Default 13 = CR).
.TP 4
.B 4
ASCII code of Line Feed (Default 10 = LF).
.TP 4
.B 5
ASCII code of Backspace (Default 8 = BS).
.TP 4
.B 6
Duration, in number of seconds, modem waits before dialing.
(Default 3).
.TP 4
.B 7
Wait time for carrier in seconds (ignored, default 60).
.TP 4
.B 8
Pause time for comma (,) in dial command in seconds (ignored,
default 2).
.TP 4
.B 9
Carrier detect time in tenths of seconds (ignored, default 6).
.TP 4
.B 10
Wait time until hangup after carrier loss in tenths of seconds
(ignored, default 7).
.TP 4
.B 11
Duration and delay in milliseconds for touch tone dialing
(ignored, default 70).
.TP 4
.B 12
Bit-mapped register (default 69)
.br
.in +.5i
.ti -.5i
Bit
.sp -1
Description
.ti -.5i
0
.sp -1
0 = Suppress response messages.
.br
1 = Show response messages.
.ti -.5i
1
.sp -1
0 = Response messages as text.
.br
1 = Numeric response messages.
.ti -.5i
2
.sp -1
0 = Echo off.
.br
1 = Echo on.
.ti -.5i
3
.sp -1
0 = DCD always on.
.br
1 = DCD follows carrier.
.ti -.5i
4
.sp -1
0 = CTS follows RTS.
.br
1 = Ignore RTS, CTS always on.
.ti -.5i
5
.sp -1
0 = Low-edge on DTR: Hangup and return to command mode.
.br
1 = Same as 0 but also resets all registers.
.ti -.5i
6
.sp -1
0 = DSR always on.
.br
1 = DSR on only if channel is available.
.ti -.5i
7
.sp -1
0 = Cisco-PPP-flag-hack off (default).
.br
1 = Cisco-PPP-flag-hack on.
.TP 4
.B 13
Bit-mapped register (default 0)
.br
.in +.5i
.ti -.5i
Bit
.sp -1
Description
.ti -.5i
0
.sp -1
0 = Use delayed sending of data.
.br
1 = Immediately send data.
.ti -.5i
1
.sp -1
0 = T.70 protocol off.
.br
1 = T.70 protocol on.
.TP 4
.B 14
Layer-2 protocol
.br
0 = X75/LAPB with I-frames (default)
.br
1 = X75/LAPB with UI-frames
.br
2 = X75/LAPB with BUI-frames
.br
3 = HDLC
.TP 4
.B 15
Layer-3 protocol
0 = transparent (default)
.TP 4
.B 16
Outgoing packet size / 16 (default 250).
.TP 4
.B 17
reserved.
.TP 4
.B 18
Service-Octet-1 to accept or to be used on dialout.
Bit-mapped register (default 4)
.br
.in +.5i
.ti -.5i
Bit
.sp -1
Description
.ti -.5i
0
.sp -1
Service 1 (audio) when set.
.br
.ti -.5i
1
.sp -1
Service 5 (BTX) when set.
.br
.ti -.5i
2
.sp -1
Service 7 (data) when set.
.br
.ti -.5i
Note:
.sp -1
It is possible to set more than one bit. In this case, on incoming calls
the selected services are accepted, and if the service is "audio", the
Layer-2-protocol is automatically changed to 4 regardless of the setting
of register 14. On outgoing calls, the most significant 1-bit is chosen to
select the outgoing service octet.
.br
.TP 4
.B 19
Service-Octet-2.
.TP 4
.B 20
Service-Octet-1 of last incoming call (readonly). Bit-mapped register.
Mapping is the same like register 18.
.LP
.SH BUGS
This man page is not complete.
.LP
.SH AUTHOR
Volker Goetz <volker@oops.franken.de>
.LP
.SH SEE ALSO
.I icnctrl\c
\&(8),
.I telesctrl\c
\&(8),
.I isdninfo\c
\&(4),
.I isdnctrl\c
\&(8).
