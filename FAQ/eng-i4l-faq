ATTENTION! The following header is not fully valid yet!
From: dl4mhk@lrz.uni-muenchen.de (Bernhard Hailer)
Newsgroups: de.alt.comm.isdn4linux,de.answers,news.answers
Subject: ISDN4linux-FAQ
Followup-To: de.alt.comm.isdn4linux
Summary: This posting describes what every reader of de.alt.comm.isdn4linux
         ought to know about ISDN under Linux using isdn4linux.  
         This is an English translation of the original document, which is
         in German, like the Newsgroup.
Archive-name: eng-i4l-faq
Posting-frequency: monthly
Last-modified: 18-Mar-97
URL: http://www.lrz-muenchen.de/~ui161ab/www/isdn/

!1FAQ for isdn4linux - Version 1.3.2!br (translation in progress 14-Apr-97)

[Translator's notes!br
--31-Mar-97: First step in updating the FAQ from 1.0.5
(6-Jan-97) to 1.3.2 (18-Mar-97). Headings are now complete and in the right order,
but many questions are missing or are still in German!!br
--14-Apr-97: Questions complete in all section (but not all updated or 
translated)!br
!br

This FAQ is protected by the GNU General Public License (GPL) Version 2;
(C) 1996 Volker Götz, Bernhard Hailer, Matthias Heßler, Michael Hipp and
Rainer May.!br
Distribution under the terms of the GPL is welcome. However,
we offer NO GUARANTEES for the information herein. Please read the GNU
General Public License for further details. A printed version is available
from !br
Free Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
An electronic version is available from the authors.!br
!br
Original FAQ by Volker Goetz <volker@oops.franken.de>, (c) 1995!br
Comprehensive edition and additions (1996, 1997):!br
Matthias Hessler <hessler@wi-inf.uni-essen.de>,!br
Bernhard Hailer <Bernhard.Hailer@lrz.uni-muenchen.de>,!br
Scott Hanson <shanson@mail.hh.provi.de> (English translation),!br
Michael Hipp <Michael.Hipp@student.uni-tuebingen.de> (many syncPPP questions)!br
Rainer May <r_may@khavi.desaster.heide.de> (i4l and networks)!br
!br
English translation coordinated by Scott Hanson <shanson@mail.hh.provi.de>
with contributions from:!br
Sven Tervoort <sveneric@xs4all.nl>!br
Matthias Hessler <hessler@wi-inf.uni-essen.de>!br
Erik Corry <erik@arbat.com> !br
!br
About the format of this FAQ:!br
The basis of this FAQ is the i4l mailing list. We checked the messages posted
to the list and included relevent messages (usually) in the form of quotes.
These quotes are not always 100% identical with the original; spelling errors
have been corrected, and some messages were translated from English into German.
Whoever notices that they have been incorrectly quoted, or would rather not have
their Email address noted, please let us know - we'll ... in the next version of
the FAQ. The same applies in cases where we have quoted someone without noting
it as such. The knowledge of the FAQ authors is noted without quoting ourseles.
Remarks from the FAQ authors about quotes are noted like this:
[This is a remark - ed.]!br
The countless links in this documents are not always complete and with time may
no longer be correct. We do not have the time to check them all. If you
discover a bad link, please let us know.!br
In the 7bit version of this FAQ, all new or rewritten questions are marked with
a change bar in the left margin. (Does anyone have an idea, how we can mark this
in the HTML version?)!br
!br

Additions, improvements and other suggestions are always welcome (also
correction of typographical errors!), preferably send "diffs" from the ASCII
version to Matthias and Bernhard. Thank you very much in advance!!br
!br

This FAQ can be found at:!br
  !link http://www.lrz-muenchen.de/~ui161ab/www/isdn/;!br
or:!br
  !link ftp://ftp.franken.de/pub/isdn4linux/FAQ;!br
or:!br
  !link ftp://ftp.pop.de/pub2/linux/isdn4linux/FAQ;!br
!br
!br


!2General information about isdn4linux

!old
Q: What is isdn4linux?
A: isdn4linux is a set of kernel modules that "teach" the Linux
   kernel ISDN. It consists of a main module ("isdn") and the
   actual hardware drivers that control the specific cards.

!old
Q: Was can isdn4linux do?
A: isdn4linux controls ISDN PC cards and can emulate a modem with the
   Hayes command set ("AT" commands). The possibilities range from 
   simply using a terminal program to connections via HDLC (using included
   devices) to full connection to the Internet with PPP to audio applications.

Q: Was kann isdn4linux noch nicht?
A: Noch sind keine !u1Vollduplex!u0-Audio-Verbindungen machbar.
   Es fehlt noch das eine oder andere Protokoll (V.110, amerikanische
   Protokolle).

Q: Kann ich isdn4linux in Nordamerika einsetzen?
A: Siehe dazu die entsprechende Frage im Kapitel "Nationale Besonderheiten".

Q: Was benötige ich für isdn4linux?
A: Seit Kernel 1.2.59 ist isdn4linux fester Bestandteil des Linux-Kernel.
   Zusätzlich benötigt wird das Paket isdn4k-utils-2.0.tar.gz und ggf.
   der HiSax-Treiber.


!old
Q: How can I get isdn4linux?
A: Via FTP:!br 
     The package is at !link ftp://ftp.franken.de/pub/isdn4linux; and various
     mirrors.!br
   Via Modem/ISDN:!br 
     From the Linux server of the Incubus BBS (Login gast,
     cd /pub/linux/isdn4linux, download via ZModem with 'sz filname') . 
     The server can be reached at the following numbers
!verbon
       +49 931   781464   Zyxel U-1496E      V.32(bis), V.42(bis), Zyxel 19200 
       +49 931   781465   Atrie 1914A        V.32(bis), V.42(bis), V32terbo
       +49 931   781467   Atrie 1914A        V.32(bis), V.42(bis), V32terbo
       +49 931   781468   Atrie 1914A        V.32(bis), V.42(bis), V32terbo
!verboff
     New Ringdown (16 Lines. First log in as 'bbs'):
!verbon
       +49 931 79002055   Motorola 3400      V.32(bis), V.42(bis), V.34
!verboff
     ISDN (also log in 'bbs') : 
!verbon
       +49 931  7840724   ICN                X.75    2 B-Kanaele
       +49 931  7841020   ICN                X.75    2 B-Kanaele
       +49 931  7841060   ICN                X.75    2 B-Kanaele  
       +49 931  7841070   ICN                X.75    2 B-Kanaele  
       +49 931  7841080   ICN                X.75    2 B-Kanaele  
!verboff
Here is a list of mirrors; thanks to Herbert Rosmanith
<herp@wildsau.idv-edu.uni-linz.ac.at> for compiling it initially. Whoever 
knows of any mirrors not listed here, please let us know!
!verbon
  !link ftp://freja.frontier.dk/linux/isdn4linux/;
  !link ftp://ftp.cs.tu-berlin.de/pub/net/isdn/isdn4linux/;
  !link ftp://ftp.fokus.gmd.de/.mount2/pub/Linux/isdn/isdn4linux/;
  !link ftp://ftp.franken.de/pub/isdn4linux/;
  !link ftp://ftp.germany.eu.net/pub/os/Linux/Local.EUnet/ISDN/isdn4linux/;
  !link ftp://ftp.kiss.de/pub/linux/isdn4linux/;
  !link ftp://ftp.leo.org/pub/comp/os/linux/isdn/isdn4linux/;
  !link ftp://ftp.lame.org/mirrors/isdn/;
  !link ftp://ftp.mathematik.th-darmstadt.de/pub/linux/mirrors/misc/isdn4linux/;
  !link ftp://ftp.nvg.unit.no/pub/linux/isdn/;
  !link ftp://ftp.pop.de/pub/local/linux/isdn/;
  !link ftp://ftp.rz.fh-hannover.de/pub/linux/local/isdn4linux/;
  !link ftp://ftp.rz.hu-berlin.de:/pub/linux/isdn4linux/;  
  !link ftp://ftp.tu-dresden.de/pub/soft/isdn/isdn4linux/;
  !link ftp://ftp.uni-mainz.de/pub/internet/starter-kit/isdn/isdn4linux/;
  !link ftp://ftp.uni-wuppertal.de/pub/linux/isdn4linux/;
  !link ftp://ftp.xlink.net/pub/mirror.ftp.franken.de/isdn4linux/;
  !link ftp://fvkma.tu-graz.ac.at/pub/isdn4linux/; 
  !link ftp://wildsau.idv.uni-linz.ac.at/pub/isdn4linux/;
!verboff

!old
Q: What documents should I read first?
A: 
!verbon
   ISDN kernel subsystem:/usr/src/linux/Documentation/isdn/README
   ISDN cards:           /usr/src/linux/Documentation/isdn/README.<card>
   Synchronous PPP:      /usr/src/linux/Documentation/isdn/README.syncppp
                         /usr/src/linux/Documentation/isdn/README.syncPPP.FAQ
   Voice capability:     /usr/src/linux/Documentation/isdn/README.audio
   ISDN Utilities:       /usr/src/isdn4k-utils-<version>/README(.*)
   Many of the utilites also have man pages!
        In einer Suse-Distribution könnten u.U. noch folgende Informationen
        hilfreich sein:
        Synchrones PPP:       /usr/doc/faq/faq/PPP-FAQ
        Konfiguration Email:  /usr/doc/howto/mini/Mail-Queue.gz

!verboff   

Q: Welche hilfreiche Links gibt es rund um isdn4linux?
A: Scripte und Installationstips von vielen Leuten:!br
     !link http://www.rosat.mpe-garching.mpg.de/~web/ISDN.html;!br
   I4l, syncPPP, email, Usenet, Voicebox, diese FAQ und mehr:!br
     !link http://www.lrz-muenchen.de/~ui161ab/www/isdn/;!br
   Michael Hipp's page (ipppd):!br
     !link http://www.sfs.nphil.uni-tuebingen.de/~hipp/isdn/;!br
   Chargeint-Anleitung:!br
     !link http://www.provi.de/~gvz/chargeint.html;!br
   Stefan Nehlsen's Anleitung für sync-ppp:!br
     !link http://www.techfak.uni-kiel.de/~stn/i4l/;!br
   xled (fr<FC>her xvboxled) gibt es auf:!br
     !link fb4-1112.uni-muenster.de/pub/ffwd/;!br
   Beispielkonfigurationen zu isdn4linux soll es auch geben auf:!br
     !link http://www.datenhighway.com/isdn4linux.html;!br
   Diese FAQ sowie isdn4linux gibt es auf:!br
     !link ftp://ftp.franken.de/pub/isdn4linux/;!br
   Die FAQ gibt es auch auf:!br
     !link ftp://ftp.pop.de/pub2/linux/isdn4linux/FAQ;

!old
Q: Is there a mailing list for isdn4linux? 
A: Yes, there is. To subscribe, send an E-mail to 
   "majordomo@hub-wue.franken.de". The subject doesn't matter. The message
   should read  "subscribe isdn4linux <E-mail address>", where <E-mail
   address> is  the address to which mail from the list should be sent.
   Currently  there are about 20-50 messages per day.

!old
Q: How can I have myself removed from the mailing list?
A: To unsubscribe, send another mial to majordomo@hub-wue.franken.de - 
   the subject doesn' matter. The message should read:
   "unsubscribe isdn4linux <E-mail address>", where <E-mail address> 
   is the address to which mail messages from the mailing list had been
   sent.

Q: Gibt es die Mailingliste auch als Newsgruppe?
A: Ja, auf die Mailingliste kann man auch über de.alt.comm.isdn4linux
   zugreifen - ein bidirektionales Gateway sorgt dafür, daß man auch antworten
   kann.


!old
Q: Is there an archive of the isdn4linux mailing list?
A: Yes, the messages are saved (unsorted) at hub-wue.franken.de.
   They are collected by month. To access the archive, send E-mail to 
   "majordomo@hub-wue.franken.de". The subject doesn't matter. The
   following commands are possible: 
!verbon
     index isdn4linux          - list which archive files are available
     get isdn4linux <filename> - retrieves the file <filename>
!verboff
   The archives are named "archiv.<year><month>, so "archiv.9610"
      is the archive for October 1996.
   An archive of the mailing list is also available via FTP:!br
     !link
     ftp://ftp.uni-oldenburg.de/pub/unix/linux/isdn/isdn4linux/Mailing-List;
   Another archive is available (according to Sascha Ottolski
   <sascha@alzhimer.isdn.cs.tu-berlin.de>) at:!br
     !link http://wws.mathematik.hu-berlin.de/ldr/ISDN/isdn4linux/;

!old
Q: In which countries does isdn4linux work?
A: We are aware of the following countries:
!verbon
     Austria
     Finland
     France
     Germany
     Italy
     Norway
     Peru
     Portugal
     Spain
     Sweden
     Switzerland
     The Netherlands
     USA
!verboff

!old
Q: Is isdn4linux approved for use by the post office ("postzugelassen")?
A: Germany:!br
     That depends on the driver used. For active cards, the post approval 
     covers the entire card including its firmware. Thus the approval 
     also covers the use of these cards with isdn4linux. The Teles driver 
     is not approved in Germany, even though it works superbly. Therefore, 
     its use is only allowed when connected to the S0 bus of an approved
     PBX.!br
   Other countries:!br 
     We don't have any information... does anyone know more?

!old
Q: What is the most recent version?
A: Currently isdn4k-utils-2.0 is required in addition to the drivers included
   with the kernel. For use with kernel 2.0.0 (and only it), two patches
   (isdn4kernel-2.0-patch1+2) are required. Kernel 2.0.2 is unusable
   because of a bug. Kernels between 2.0.15 and 2.0.24 don't seem to work
   correctly with syncPPP. 2.0.26 contained many i4l bug fixes, but an
   include file (proto.h) was forgotten. A new 'jumbo patch' was included in
   version 2.0.30. Kernels 2.0.27+ are very stable.!br
   There are many changes in kernels 2.1.0 and
   higher; for now they can only be recommended for developers. Together
   with HiSax 1.4, they only work up to 2.1.14. Kernels 2.1.15 and higher 
   require HiSax 2.0 along with a necessary kernel patch.!br
   It's recommended to use i4l versions 2.0 or higher together with a
   2.0.3 or higher kernel (no longer requires any patches!). Kernel
   >2.0.27 is the current standard.

Q: Welche Hardware wird !u1NICHT!u0 unterstützt?
A: Z.Zt. werden (mit Ausnahme der ICN) keine einzige aktiven ISDN-Karten
   unterstützt.  Lediglich noch für die AVM B1 gibt es einen Alpha-Treiber auf
   Binary-Only Basis.  

Q: Unterstützt isdn4linux externe Terminaladapter?
A: Nein, aber das braucht es auch nicht. Schließlich sind Terminaladapter so
   gebaut, daß sie sich entweder wie ein Modem oder wie eine Netzwerkkarte
   verhalten. Linux unterstützt aber auch schon ohne isdn4linux Modems und
   Netzwerkkarten - daher ist kein spezieller ISDN-Treiber erforderlich
   (womit sich die Konfiguration meist deutlich vereinfacht).

!old
Q: Which internal cards are supported?
A: Im Moment gibt es einen Treiber für alle Karten mit einem bestimmten
   Siemens-Chipsatz (HiSax-Treiber), der auch Plug&Play-Karten unterstützt.
   Zu den Details siehe die nächste Frage.!br
   Der HiSax-Treiber hat den alten Telestreiber überflügelt, der entsprechend
   nicht mehr weiterentwickelt wird. Dementsprechend hat der Telestreiber
   mittlerweile wesentlich mehr Bugs und sollte nicht mehr verwendet werden.!br
   Weitere Treiber gibt es für die (aktive) ICN-Karte (ICN-Treiber),
   sowie für die PCbit-Karte (Octal, Portugal).!br
   Für die "itk ix1 micro" gab es einen (speziellen) Treiber von Frank Mohr
   <mohr@fhdacom2.fhrz.fh-darmstadt.de>, der jedoch mittlerweile im HiSax 2.0
   enthalten ist. Er unterstützte die folgenden Karten:
!verbon
       * ITK ix1 micro V2.0 und V2.1
       * Cisco 200
       * ITK Columbus
!verboff
   Schließlich gibt es noch einen (Alpha-) Treiber für die aktive AVM B1,
   mit einigen Besonderheiten. Siehe dazu die Frage "Wie sieht es aus mit
   der aktiven AVM B1?".
                                     
!old
Q: What is the new HiSax driver all about?
A: It is a new driver that should support all passive cards that are based on a
   certail Siemens chipset. Currently it supports:
!verbon
        * Teles S0-8
        * Teles S0-16 und S0-16.2
          (baugleich: Dr. Neuhaus Niccy 1016, Creatix 16/S0)
        * Teles S0-16.3
        * Teles S0-16.3 PNP
        * Teles PCMCIA
        * Creatix S0 PNP
        * AVM A1 (Fritz!) 
        * ELSA Microlink PCC-16
        * ELSA Microlink PCF
        * ELSA Microlink PCF/pro (only ISDN, not the V34 Modem Chip)
        * ITK ix1-micro Rev.2  
!verboff
   Die ELSA PCC-8 sollte eigentlich auch unterstützt werden, mangels
   Debuggingmöglichkeit hält sich jedoch noch einen Bug, der dies verhindert.
   Karsten Keil <keil@temic-ech.spacenet.de> wrote on 14 Oct 1996:
!verbon
     The first goal of the HiSax driver was to add support for more ISDN
     cards to i4l, and this goal remains. Secondly, it should be as simple
     as possible to configure and not appear to work when there is a
     hardware problem (IRQ, reset problems with Teles). I can't fix the
     hardware problems directly, but driver will not load if such problems
     appear. Third (this part has just now begun) is to fully rewrite the
     state machines into a complete DSS1 or 1TR6 that could be approved
     (which doesn't mean that I personally can or want to obtain approval).
     In addition, if possible I'd like to support US ISDN protocols, so
     that i4l can be used outside of Europe. Also, further l2/l3 protocols
     should be added (e.g. V110), leased line support.... a lot of work,
     that I'm sure I cannot do alone. Anyone with any knowledge of
     programming and ISDN (I myself first heard of ISDN in January, and my
     work has nothing to do with ISDN... I learned everything on my own
     time), and wants to help can contact me.
!verboff
     If you're interested in HiSax, you can find it at
        !link ftp://ftp.franken.de/pub/isdn4linux/HiSax/;
     (and hopefully soon at all isdn4linux mirrors!)
   Seit HiSax 1.5/2.0 werden auch D64-Verbindungen unterstützt. HiSax 2.0 wird
   ins Kernel 2.0.30 wandern, und braucht ab dann nicht mehr gesondert in den
   Kernel gepatcht werden.                                

Q: Wie sieht es aus mit der aktiven AVM B1?
A: Andreas Schultz <aschultz@hppool.cs.Uni-Magdeburg.de> hat dafür einen
   Treiber geschrieben, den es (als Alpha-Version) unter folgendem Link gibt:
   !link http://www.cs.uni-magdeburg.de/~aschultz/avmb1-1.2-alpha.tar.gz;
   Da er ein NDA mit AVM unterzeichnen mußte, gibt es den Treiber jedoch nur
   als Binary.                 

Q: Nachdem meine AVM ja so viele Interrupts erzeugt mit dem HiSax-Treiber,
   welches ist die beste passive Karte in Verbindung mit HiSax?
A: Karsten Keil <keil@temic-ech.spacenet.de> schrieb dazu am 12. Nov 1996:!br
   Das sollte sich fast nichts nehmen. Von der Belastung des Rechners ist die
   Fritz! wahrscheinlich auf Dauer die Schlechteste [siehe dazu die Frage
   "Meine AVM-Karte erzeugt extrem viele Interrupts" im Abschnitt HiSax im
   Kapitel Troubleshooting], aber vielleicht bekomm ich das mit dem Timer
   noch raus, wie gesagt macht sich nur bemerkbar wenn der Rechner z.B die
   ganze Nacht rendering betreibt.
  Karsten Keil <keil@temic-ech.spacenet.de> schrieb weiterhin am 2. Dez 1996
   hinsichtlich Stabilität und Bug-Freiheit:
!verbon
        1. Wahl ELSA
           ELSA stellt im Gegensatz zu AVM die Spezifikation zur Verfügung.
        2. Wahl Creatix PNP
           Auch Creatix Mitarbeiter stehen Linux nicht vollkommen negativ
           gegenueber ;-). Ist uebrigens eine Creatix Eigenentwicklung und
           nicht mit der Teles 16.3 PNP identisch.
!verboff
          
!old
Q: Does isdn4linux support external ISDN adapters?
A: No, isdn4linux supports only internal cards. External  ISDN adapters
   can be accessed either like an analog modem or like a network card, and
   therefore do not need isdn4linux.

!old
Q: Which ISDN modes are supported?
A: 
!verbon
    56k asynchoronous: no
    64k synchronous  : yes
   128k synchronous  : yes (channel bundling - see the next question)
!verboff


Q: Does isdn4linux support channel bundling?
A: The current version of isdn4linux support 2 methods of channel 
   bundling:!br
     - !b1MPPP!b0 (basiert auf syncPPP)!br
     - !b1Raw Bundling!b0 (Konfiguration von sogenannten Slave-Kanälen)!br
   Beide Varianten haben z.Zt. eigene Vor- und Nachteile. Siehe dazu "Wie
   benutzt man Channel Bundling?" im Abschnitt "Channel-Bundling" weiter
   unten.!br                                                             
   Warning: Channel bundling saves time, but not any telephone charges.
   Only if you really need the extra bandwidth is it useful.
   
!old
Q: What is the difference between an active and a passive ISDN card?
A: An active ISDN card handles most of the ISDN connection protocols 
   (dialing, accepting calls, etc.) itself. The card includes a kind 
   of mini-computer with its own
   software (firmware). With a passive card, the computer in which
   the card is installed has to perfom these functions.

!old
Q: Are there sites that offer guest access where I can test my 
   isdn4linux setup?
A: Yes, the following sites offer guest access for modem emulation or IP:!br
   - Eberhard Moenkeberg <emoenke@gwdg.de>:
!verbon
     * Welcome to Linux at eberhard.moenkeberg.de (LAN, 192.168.99.1).
       Under ++49-551-7704103, ISDN NetCalls (HDLC-trans-rawip)
       for 192.168.99.1 get accepted. You should come as 192.168.*.*
       because sometimes my "default" route is not your way.
       /ftp is exported for NFS; try "showmount -e".
       You can login as "guest" without password.
       FTP as "gast" with password "gast" avoids the restricted shell.
     * Under ++49-551-7704102, a 28800 bps modem and a Creatix ISDN 
       card (HDLC only, not X.75) are listening for Logins.
!verboff
     With the net setup from!br 
     !link ftp://ftp.gwdg.de/pub/linux/isdn/isdn4linux-gwdg/rc.isdn-Beispiel;!br
     you can test NetCall at 551-7704103 (works as is within Germany,
     from outside Germany you just have to change the number).!br
   - Gernot Zander <hifi@scorpio.in-berlin.de>:
!verbon
     There's a "gast" at +49 30 67 19 81 01 (X.75, mgetty). There's the 
     stones-html-page with pics in postscript to test downloading. Whoever
     needs a target to call cav use it. At ...81 03 there's a getty with
     HDLC. As guest you enter a kind of BBS  and can read some news.
!verboff

!old
Q: Can I combine isdn4linux with diald?
A: Ja, siehe dazu den Abschnitt "Diald" im Kapitel "Konfiguration".

!old
Q: Can I use isdn4linux as an answering machine?
A: Yes, voice support is possible wih the current version of isdn4linux.
   You can either use "vgetty" from Gert Doerings "mgetty+sendfax", 
   or "vboxgetty" from Michael Herold, which is made especially for
   isdn4linux.
   Letzteres findet sich unter:
   !link ftp://ftp.franken.de/pub/isdn4linux/contributions/

Q: Can I fax with isdn4linux?
A: Several groups are working on fax software
   that will work together with isdn4linux. At the moment, it looks like
   it will never work... because timing is critical
   for fax software, and Linux doesn't have a real time environment. 
   If you do want to fax, you'll have to install an analog fax modem 
   along with your ISDN card.


!old 
Q: Is videotex/Btx/Datex-J possible with isdn4linux?  

A: Yes, it works with the modem emulation with the ttyI* devices. There is
   a special register to set for videotex (ATSx=y -  see the Readme's)
   It's also possible to access the Internet via the German T-Online.
   Warning! XCept (formerly Xbtx) has an ISDN configuration option. This
   should NOT be used. XCept should be configured as if a normal modem
   were being used.!br 
   Siehe auch die Fragen zu T-Online im Abschnitt Konfiguration|Gegenstellen.

Q: Kann ich mit isdn4linux eine Verbindung zu Compuserve aufbauen?
A: Nein, da Compuserve's ISDN-Zugänge nur mit dem veralteten V.110-Protokoll
   funktionieren. V.110 ist in isdn4linux (noch?) nicht implementiert.
   Inzwischen bietet Compuserve aber auch viele X.75-Einstiege an.

Q: Welche ISDN-Features wird isdn4linux nicht bieten können?
A: Einige ISDN-Features sind gerätespezifisch und können daher nicht von
   isdn4linux für andere Geräte aktiviert werden, es sei denn, isdn4linux
   würde deren TEI fälschen (was die Geräte jedoch ziemlich verwirren dürfte).
   Solche gerätespezifischen ISDN-Features sind u.a.: Ablehnen eines
   anklopfenden Anrufes, Rufnummernübermittlung aus/ein, Makeln, Konferenz,
   Vermitteln im Amt, diverse COLP/CLRP.
         
!old
Q: I'd like to write a new hardware driver. Where can I find a description
   of the interfaces to the link level module?
A: In the kernel source (in /usr/src/linux/Documentation/isdn) you can find
   the file INTERFACE - it is the description of the interfaces to the link 
   level module.

Q: Wie habe ich Zugriff auf den Source der aktuellen Entwicklung/was hat
   es mit dem CVS-Tree auf sich?
A: CVS - Concurent Version System!br
   Ist eine Multiuser/Server Erweiterung von RCS (Revision Control System).
   Die I4L Treiber werden unter CVS entwickelt, dazu existiert auf einem
   Rechner (oldhades.think.de) ein CVS-tree auf den alle Entwickler Zugriff
   haben. Zusätzlich hat Fritz einen anonymen Readonly Zugriff gebastelt, wer
   also unbedingt das Neuste haben will kann sich das dort holen, in den
   Sourcen sind eventuell mehr bugs drin, als in den releasten !!!
   Hier die entsprechende Nachricht von Fritz Elfert <fritz@wuemaus.franken.de>
   zu diesem Thema:!br
   ANOTHER IMPORTANT THING:!br
   I often get patches - against current official releases of course -
   where i have problems applying them. My local source here
   sometimes is 2 or 3 version ahead however i cannot release it, since
   it is incomplete or completely untested etc.!br
   Therefore i now decided to make the CVS repository of the isdn4linux
   public available. Now, programmers who want to have a look at the
   development ongoing or those who always want to get the newest stuff
   here is how to access the CVS repository:!br
   1. Install GNU CVS (any version >= 1.6 will do)!br
   2. create a small shellscript .cvsrsh in your homedir:!br
!verbon
       #!/bin/sh
       exec rsh -l guest $*
!verboff
   3. Set CVS_RSH to this script (eg.: export CVS_RSH=~/.cvsrsh)!br
   4. Set CVS_ROOT to oldhades.think.de:/i4ldev!br
   (eg: export CVS_ROOT=oldhades.think.de:/i4ldev)!br
   5. Execute "cvs -z9 checkout isdn"!br
   -> This will create a directory-tree isdn/ in your current directory.!br
   Below isdn/ you will find the same hierarchy like in the linux
   source plus some scripts to copy/diff the stuff into the linux
   sourcetree.!br
   Similar access is available for the utility-package with the command:!br
!verbon
   cvs -z9 checkout isdn4k-utils
!verboff
   WATCH OUT!!! THE NEWEST STUFF SOMETIMES IS REALLY INSTABLE OR EVEN
   DOES NOT COMPILE WITHOUT PROGRAMMING KNOWLEDGE -
   No newbies questions on this PLEASE! Use the source, Luke!!br
   Note:!br
   Of course the public access is readonly. Access is limited
   to the following cvs commands:!br
!verbon
       checkout
       diff
       export
       status
       update
!verboff
   See the CVS-doc for how to use these commands.!br
   People who want to help _continuously_ developing isdn4linux by writing
   new driver etc. can get a real account for full access. Write me a mail in
   this case.
                
!old
Q: Can I use isdn4linux under dosemu?
A: Yes, you really can! Steffan Henke <henker@informatik.uni-bremen.de>
   wrote on 25 Oct 96:
!verbon
     In dosemu.conf it is enough to enter a virtual com port,
       (for example com2) that can be used with e.g. Telix or
       Terminate: serial { com 2 device /dev/ttyI3 }
     Access with Fossil is possible if fossil.com (included with
     dosemu) is started.  Tested with the following configurations: 
     - Kernel 2.0.21, Teles driver incl. Karsten's patches 
     - Kernel 2.0.21, HiSax
!verboff   

Q: Gibt es eine funktionierende ISDN Karte für einen DEC Alpha mit Linux?
A: Thomas Bogendoerfer <tsbogend@alpha.franken.de> schrieb am 17. Dez 1996:!br
   Ich verwende eine ICN ISDN Karte in meinem Alpha Noname für den
   Internetzugang und mail/news via uucp.!br
   Ich habe keine passive ISDN Karte um HiSax mit Linux/Alpha zu testen. Es
   gibt jedoch Probleme mit den Timern (HZ ist 1024 auf Alphas). Selbst im
   icn Treiber ist der "falsche" Timer, was ein wenig zu viel Polling der Karte
   verursacht (aber es führt zu besseren ping Zeiten:-)). Ich vermute, es ist
   an der Zeit das zu beheben.

Q: Läuft isdn4linux parallel zu UISDN?
A: Nils Rennebarth <nils@nus.de> schrieb dazu am 10. Dez 1996:
!verbon
        Es läuft parallel. Und es läuft unter 2.0.X.
        Beide ISDN-Pakete laden jedoch das Modul isdn.o, ansonsten ist der
        Namensraum verschieden. Abhilfe: Urlichs isdn.o in uisdn.o umbenennen,
        entsprechend /lib/modules/modules.isdn (oder wie immer das Ding heißt,
        wo die Module drinstehen, und das das Skript ausliest) anpassen.
        Freundlicherweise sind auch die Default-Namen der ISDN-devices
        verschieden.
!verboff

Q: Was heisst eigentlich AOC-x, CLIR, COLP, CVS, HDLC, HSCX, ISAC, TEI...?
A: Hier ein kleines Glossar:!br
!b1AOC-D!b0
!verbon
        AOC-D ist die "Gebühreninformation während der Verbindung".
!verboff
!b1AOC-E!b0
!verbon
        AOC-D ist die "Gebühreninformation nach der Verbindung". Dieses 
        Dienstemerkmal ist in Deutschland im "Komfort-Anschluß" enthalten.
!verboff
!b1CLIR!b0
!verbon
        CLIR ist ein Angebot des ISDN-Anbieters: man kann fallweise
        die Übermittlung der eigenen Rufnummer an den Gesprächspartner 
        unterdrücken lassen. CLIR muß man beantragen, es ist (in Deutschland) 
        jedoch kostenlos. Hingegen kostet die fallweise !i1Übermittlung!i0
        der Rufnummer Geld.
!verboff
!b1COLP!b0
!verbon
        Auch COLP ist ein Angebot des ISDN-Anbieters. Man muß es beantragen,
        aber es kostet (in Deutschland) 10.-- DM pro Monat extra. Wer COLP
        beantragt hat, bekommt ein erweitertes Wählprotokoll über die
        Leitung, welches man dann z.B. in der Tk-Anlage auswerten kann.
        Derzeit wird an einer Möglichkeit gebastelt, das mit Hilfe einer 
        "verkehrtherum" angeschlossenen zweiten Teleskarte zu umgehen. Man
        bekommt dann ganz ohne Gebühren mehr Informationen als mit laufendem
        COLP. Das rechnet sich bald...
!verboff
!b1CVS-Tree!b0
!verbon
        Die i4l-Entwickler haben sich zu einem Team zusammengeschlossen. Das
        Tool "cvs" erlaubt es den Mitgliedern, relativ problemlos Patches
        einfließen zu lassen. Der Werdegang des Projektes wird damit
        ausgezeichnet dokumentiert, und es ist auch nicht schwierig, eine
        ältere Version wieder herzustellen.
!verboff
!b1HDLC!b0
!verbon
        Ein sehr verbreitetes Low-Level-Protokoll.
!verboff
!b1HSCX!b0
!verbon
        Ein Siemens-Chip, der ähnlich ->ISAC auf vielen passiven ISDN-Karten
        sitzt. Er übernimmt den seriellen Bus vom ISAC und demultiplext beim
        Empfangen bzw. multiplext (d.h. fügt die Bits an der richtigen Stelle
        ein) die B-Kanäle.
!verboff
!b1ISAC!b0
!verbon
        Ein Siemens-Chip, der ähnlich ->HSCX auf vielen passiven ISDN-Karten 
        sitzt. Er ist für "Level 1" zustaendig, sitzt also (beinahe) direkt an
        der Leitung. Er kann das D-Kanalprotokoll handhaben und setzt die
        S0-Daten auf einen speziellen seriellen Bus (IOM) um. Beim Senden
        geht es umgekehrt.
!verboff
!b1TEI!b0 (Terminal End Identifier)
!verbon
        Die lokale Vermittlungsstelle oder bei internen S0 die Anlage weist
        jedem Endgerät automatisch oder fest eine TEI zu. Diese dient ganz
        einfach zur Addressierung des D-Kanals. TEIs haben folgende Werte:
         0- 63   feste TEIs (z.B wird 0 bei Anlagenanschlüssen verwendet)
        64-126   automatisch zugewiesen
           127   Rundruf an alle (z.B. bei hereinkommendem Anruf)
!verboff
!b1PBX!b0 (Private Branch eXchange)
!verbon
        Eine TK-Anlage dient dazu, verschiedene interne Geräte an das
        ISDN-Netz anzuschließen. Meist handelt es sich dabei um analoge
        Geräte, die nicht direkt ans ISDN-Netz angeschlossen werden können.
        Die TK-Anlage kann jedoch auch einen internen digitalen S0-Bus zur
        Verfügung stellen, an dem dann ISDN-Geräte angeschlossen werden können.
!verboff

!2Configuration


!3General


!old
Q: Where can I find scripts and other information on configuring i4l?
A: Configuration examples and scripts: !br
     !link http://www.rosat.mpe-garching.mpg.de/~web/ISDN.html;!br
   Many HowTo's on basic installation, syncPPP, E-mail set-up, 
   Usenet News, answering machine, and more:!br
     !link http://www.lrz-muenchen.de/~ui161ab/www/isdn/;!br
   Further FAQs with example scripts:!br
     !link http://www.fzi.de/sim/people/trautw/i4l/index.html;


!old
Q: How many ISDN cards can I stuff into my computer?
A: Just as many as there are ISA slots and interrupts/IO addresses.
   The Teles 16.3 can use only 3 different IO addresses, therefore you can
   use at most 3 cards. They each would also need an interrupt.!br
   Peter Strunk <webadmin@mail.bicos.de> hatte am 8. Nov 1996 folgenden Tip
   für die Installation einer vierten Teles-Karte:
!verbon
        Probiere doch mal Port 0x080h, DIP-SW in die nicht dokumentierte
        Position!
!verboff
   The AVM is similar.!br
   The ICN has no interrupts, a more flexible port configuration
   and the driver places the shared memory area of all ICN cards at the same
   address. The card memory is shown only as needed. !br
   Therefore, one could use
   as many cards are there are slots... one could even increase
   the number of ISA slots with an ISA bus extender.

Q: Brauche ich ein DOS Setup-Programm, um meine Teleskarte zu initialisieren?
A: Karsten Keil <keil@temic-ech.spacenet.de> schrieb dazu am 21. Feb 1997:!br
   Du brauchst aber kein DOS Setup fuer Linux, mit einer Ausnahme:!br
   Es gab von Teles eine Charge PnP Karten die kein echtes PnP gemacht haben.
   Zu erkennen sind diese Karten daran, das sie KEINEN Jumper/Dip haben aber
   von isapnp nicht erkannt werden.!br
   Alle anderen Karten werden mit den Linuxtreibern bzw. die PnP mit isapnp
   konfiguriert.

!old
Q: Does the driver support "dial on demand"?
A: Yes. If a network interface (e.g. "isdn0") is set up, the driver will dial
   the number. If in addition a hang-up timeout (Idle Timeout) has been given,
   isdnctrl huptime <interfaceY> time, then the driver will automatically hang
   up when no data was been transferred over the interface for "time" seconds.
   However, with syncPPP there are problems (see the syncPPP section),

Q: Unterstützt isdn4linux PNP (Plug and Play)?
A: Ja. Allerdings nur in Verbindung mit dem HiSax-Treiber. Mit "Plug" alleine
   ist's leider noch nicht getan, es fällt noch etwas mehr Arbeit an:
   (von Karsten Keil <keil@temic-ech.spacenet.de>)
!verbon
        1. HiSax muß in den Kernel gepatcht werden
           (Achtung: den "-pn" Parameter verwenden!)
        2. Mit "make menuconfig" (oder "make config") werden folgende Kernel-
           Optionen eingestellt:
             * ISDN = "M" (als Modul - PNP funktioniert sonst nicht!)
             * HiSax = "M" (als Modul - PNP funktioniert sonst nicht!)
             * 16.3/PNP support
             * EURO support
        3. Kernel und Module kompilieren & installieren, depmod. (Reboot!)
        4. Die Konfiguration der PNP-Karte auslesen mit:
           "pnpdump > /etc/isapnp.conf".
        5. Die Konfigurationsdatei "/etc/isapnp.conf" muß von Hand angepaßt
           werden. Folgende Werte sind zu setzen:
             INT0 - der von der Karte verwendete Interrupt
                  (Default bei Teles 16.3 PNP: 10)
             IO0, IO1 - die von der Karte verwendeten IO-Ports
                  (Default bei Teles 16.3 PNP: 0x580 bzw. 0x180)
                  (Achtung: diese Werte müssen 64bit aligned sein! Frühe
                  Versionen der PNP-Karten schlagen evtl. falsche Werte vor!)
        6. Aktivieren der Konfiguration per:
           "isapnp /etc/isapnp.conf"
           (muß bei jedem Booten gestartet werden)
        7. Nun kann das HiSax-Modul gestartet werden mit:
           "modprobe hisax io=4,<P>,<INT>,<IO0>,<IO1>"
             4     - PNP-Karte
             <P>   - Protokoll:
                       2 - für Euro-ISDN (normalerweise)
                       1 - für 1TR6-ISDN (deutscher Vorgänger von Euro-ISDN)
             <INT> - der in /etc/isapnp.conf bei INT0 eingetragene Wert
             <IO0> - der in /etc/isapnp.conf bei IO0 eingetragene Wert
             <IO1> - der in /etc/isapnp.conf bei IO1 eingetragene Wert
!verboff

!old 
Q: Is there a trick to sometimes boot Linux with ISDN and sometimes
   without?   
A: Yes, you can use the run level for this (under SysVinit).
   Emil Stephan <ste@esqhen.su.eunet.de> has written scripts:
!verbon
     On my computer I've defined 2 run levels (3 and 4), 3 runs without ISDN,
     4 with. If I want to quit ISDN with all the associated processes like
     ipppd, isdnlog and mgetty, as root I enter "init 3"; and to start "init
     4". init then makes sure with "/sbin/init.d/i4l start" or 
     "... stop" that the necessary things are done.
!verboff

!old
Q: Is it possible to initiate call forwarding with i4l?
A: Karsten Keil <keil@temic-ech.spacenet.de> wrote, that there are plans
   to later implement this in the HiSax driver. 

!old
Q: Has anybody routed ipx/spx over Isdn with Linux?
A: Andreas Kool <akool@Kool.f.EUnet.de> wrote on 14.10.1996:
!verbon
     That's no problem -  we've done that for a while now.
     - Simply set up an isdn interface.
     - Important: encap isdnX ethernet
     The rest is done by "mars_nwe" (incl. routing).
!verboff

!old
Q: Kann ich den kerneld einsetzen, um die ISDN-Module bei Bedarf in den Kernel
   zu binden?
A: Emil Stephan <ste@esqhen.su.eunet.de> schrieb dazu am 15. Oktober 1996:
!verbon
        Das Entladen der Module, wenn sie eine Minute lang nicht mehr
        gebraucht wurden, macht der kerneld defaultmäßig. Das ist bei Modulen
        wie Gerätetreibern ala Floppy etc. kein Problem; bei Treibern aber,
        die irgendwelche Einstellungen über einen längeren Zeitraum behalten 
        müssen, aber doch. Z.Bsp. sind die Einstellung des Mixers bei einer 
        Soundkarte oder die Konfiguration von Dialin- und Dialout-Parametern
        beim ISDN-Treiber solche. 
        Das Entladen des ISDN-Treibers zerstört z.B. auch das IP-Interface
        ippp0 oder isdn0. Die Einträge in der IP-Layer des Kernels gehen dann
        ins Leere. Wenn man mal in die Start-Up-Skripten von i4l reinschaut,
        wird man eine ganze Menge Dinge finden, die mit isdnctrl etc.
        eingestellt werden; die müßte der kerneld bei jedem erneuten Laden
        wieder einstellen lassen. Auch der Status des D-Kanals auf ISDN könnte
        zu den Dingen gehören, die durch das Entladen verloren gehen.
        Also mein Tip ist, nicht vom kerneld laden und entladen lassen,
        sondern beim Systemstart laden und nur entladen, wenn es aus
        technischen Gründen nötig ist.
!verboff
   Siehe dazu auch die Frage "Gibt es einen Trick, Linux mal mit, mal ohne 
   ISDN-Subsystem zu booten?".!br
   Markus Gutschke <gutschk@uni-muenster.de> setzte hinzu:
!verbon
        Genau für diesen Zweck gibt es seit geraumer Zeit in dem Modules
        Paket eine Erweiterung, die es erlaubt, eine Datenbank mit
        Zustandsinformationen über die Treiber zu installieren. Leider wird
        dieses Feature bisher kaum oder gar nicht von den Modulen
        unterstützt.
        Als Alternative bieten sich auch solche Optionen wie der
        "post-install" Hook in der "/etc/conf.modules" an. Es ist dann zwar
        erforderlich, daß man von Hand die passenden Skripts schreibt, aber
        im Prinzip funktioniert das dann genauso gut wie, wenn das Modul eine
        automatische Initialisierung über eine Datenbank durchführen würde.
!verboff

Q: Wie komme ich zu einem für ISDN gepatchten tcpdump?
A: Michael Stiller <michael@toyland.ping.de> schrieb dazu am 23. Okt 1996:!br
   Tip zum ftp'en:!br
     !link ftp://ftp.gwdg.de/pub/misc/isdn/linux/isdn4linux-gwdg;!br
   Da gibts den patch: "tcpdump-3.0.4-1-isdn.dif.gz"!br
   und den Rest unter:!br
     !link /pub/linux/mirrors/funet/PEOPLE/Linus/net-source/tools/tcpdump-3.0.4-1.tar.gz;!br
   Evtl muß man im Patch je nach Namen seines ISDN Interfaces (bei mir bri0)
   noch weitere Möglichkeiten dazu hacken. Defaultmäßig kennt das Teil nur
   isdn* und isdnY* als Interfacenamen.!br
   Weiterhin schrieb Henning Schmiedehausen <henning@pong.iconsult.com> zu
   diesem Thema am 30. Okt 1996:
!verbon
        Nachdem auch der Patch vom Eberhard Moenkeberg auf ftp.gwdg.de kein
        cisco-hdlc ausdumpen kann, habe ich hier mal einen isdn-patch fuer
        tcpdump-3.0.4 gemacht, der das Interface fragt, was fuer eine
        Encapsulation es benutzt und sich entsprechend einstellt. Das Teil ist
        gegen eine tcpdump-3.0.4-1.tar.gz Distribution, wie sie z.B. auf
          !link ftp://ftp.funet.fi/pub/Linux/PEOPLE/Linus/tools; liegt,
        gemacht. Dieser Patch erkennt RAW-IP, ISDN-IP und CISCO-HDLC und kann
        die Pakete entspr. dumpen.
!verboff
   [An seiner Mail hing der Patch - er sollte sich einfach im Archiv der
   Mailingliste wiederfinden lassen - die Red.]!br
   Sascha Ottolski <sascha@alzhimer.isdn.cs.tu-berlin.de> hatte noch folgenden
   Tip am 5. Nov 1996:
!verbon
        Es gibt doch isdn4k-utils-2.0/tcpdump-3.0.3-isdn.diff ! Damit klappts,
        sofern man noch selbst Hand anlegt:
        In der Datei tcpdump-3.0.3-isdn/libpcap-0.0/pcap-linux.c steht nach
        dem Patch irgendwo folgendes:
            else if (strncmp("ppp", device, 3) == 0)
        Entweder man nennt seine ppp-devices irgendwie pppX statt ipppX, oder
        ändert die Zeile z.B. in
            else if (strncmp("ippp", device, 4) == 0)
                              ^^^^          ^^
        Dann erkennt tcpdump auch sync-ppp. Jedenfalls bei mir.
!verboff

Q: Wie kann ich Benutzerrechte für die Verwendung von ISDN einrichten?
A: Henner Eisen <eis@baty.hanse.de> schrieb dazu am 13. Feb 1997:
   Den Zugang über isdn-ttys kann man (ganz nach Unix-Philosophie)
   beschränken, indem man in /etc/group eine Group (z.B. 'isdn') einrichtet,
   und dann
!verbon
       chgrp isdn /dev/ttyI* /dev/cui*
       chmod o-rw /dev/ttyI* /dev/cui*
!verboff
   allen Usern außer denen in der Gruppe 'isdn' die Lese/Schreibrechte für
   die ISDN-ttys entzieht. Diejenigen, die ISDN benutzen dürfen, muß man dann
   explizit zum Mitglied der Gruppe 'isdn' machen.


!3MSN

Q: What is an MSN?
A: Unlike a normal telephone connection, an ISDN connection can have more
   than one telephone number - each of these is called an MSN. MSN is an
   abbreviation for Multiple Subscriber Number.

Q: What is an EAZ?
A: This is a German name for an MSN. In Germany, EAZ and MSN are used
   as synonyms, though in theory one ought to differentiate according
   to the protocol used. That which is called MSN in the Euro-ISDN
   protocol was called EAZ in the German 1TR6-ISDN protocol (a German
   predecessor to Euro-ISDN).

Q: How many MSNs do I need if I want to do the following:
!verbon
	* Telephone
	* Analogue modem (used for data, fax or voice-mailbox)
	* Dialin for X.75 (modem emulation)
	* Dialin for SyncPPP
!verboff
A: One!!!!br
   The two different types of dialin can be recognised using the
   'Service Recognition' code ("digital, data"). If correctly configured,
   the two different types of dialin can also be differentiated (see the
   question "Can I use just !u1one!u0 MSN both for customers that need a
   getty (modem emulation) and also for customers that need a direct network
   connection?" in the section "Dialin").!br
   On the subject of the parallel use of both telephone and analogue modem,
   Gernot Zander <hifi@scorpio.in-berlin.de> had the following tip (Dec. 11
   1996):!br
   Configure fax-getty for 10 rings. If you take the phone and hear a fax
   or modem, you send a USR1 signal (kill -USR1 mgetty-pid) to mgetty, and
   it will take the call.!br
   If your phone socket is correctly wired, the modem will take over the
   connection, cutting off the phone (eg. a TAE NDN socket and the original
   cables. If your modem has a dial-blocker, that may get in the way, unless
   you know the code to switch it off).!br
   [With a suitable modem, mgetty can work as answering machine, and fax
   machine and data modem - Ed.]!br
   Or: if you have an ISDN PABX that allows call forwarding. You can
   even daisy-chain these if you run out of analogue ports.!br
   [Despite this, you will find life simpler if you can give the
   telephone and modem separate MSNs (the ideal solution if you have
   at least 2 MSNs - Ed.]

Q: What is my MSN?
A: Your telephone company will tell you your MSN. It is your own telephone
   number. The following questions, together with the chapter on national
   peculiarities deal with the finer points of MSNs under isdn4linux.

Q: How do I tell the modem emulation what my MSN is?
A: For the modem emulation you use the command AT&E<msn>, which requires
   the MSN !u1without the area code!u0 (except in the Netherlands).!br

Q: How do I configure my MSN using syncPPP?
A: The MSN for network operation is set up with the command "isdnctrl msn
   <interface>". The MSN is given !u1without the area code!u0 (except in
   the Netherlands).

Q: Where should I configure my own MSN in order to test syncPPP by calling
   myself?
A: If you want to call yourself as a test then you have to configure
   your MSN both as the outgoing and the incoming number.!br
   The configuration of the !i1outgoing!i0 number is done with "isdnctrl
   addphone <interface> out <msn>". You must use the MSN !u1including
   area code!u0 (including the "0" at the start -
   Deutsche Telekom needs this in order to dial correctly). "isdnctrl
   delphone" is used similarly.!br
   The configuration of the !i1incoming!i0 number is done with "isdnctrl
   addphone <interface> in <msn>". The MSN must be entered in the form
   in which it is transmitted to the called party. For Deutsche Telekom,
   this is the MSN !u1including the area code!u0 but !u1without!u0 the
   "0" at the start. "isdnctrl delphone" works similarly.!br
   You may find national differences here (see the chapter "National
   Peculiarities"). See also the following question in case of doubt.

Q: How can I find out how my telephone number is transmitted to the
   calling party?
A: The transmitted MSN can simply be determined, by calling yourself
   (for example by telephone). In the log files you will find the
   entry that looks like: "isdn_tty: call from XXX -> YYY ignored"
   (in order for this to work, you must of course already have the ISDN
   drivers in your kernel and active).

Q: Can I do the following on *THE SAME* MSN:
!verbon
	- Telephony (voice)
	- VBOX (voice, of course)
	- X.75 login (mgetty, /dev/ttyI?)
	- IP interface for IP-connections to other computers?
!verboff
A: Gernot Zander <hifi@scorpio.in-berlin.de> wrote on this subject Dec. 4
   1996: Yes. However, IP dialin cannot be differentiated from X.75 
   dialin, so you are either restricted to dialout, or you must enter
   the MSN of the other party and set secure to on. Then the driver will
   start by asking the net interfaces, and if none match, the call will
   be handed on to the ttyIs. If someone wants to have the choice between
   calling you with X.75 or with IP, they will have to use different
   outgoing MSNs to call you from.

Q: How can I minimise the number of MSNs needed for dialin?
A: See the question in the chapter on dialin.

Q: How do I set the MSN in a Cisco?
A: With "isdn answer1 :<msn>" (or answer2). Eg. "isdn answer1 :12345" will
   set the MSN to 12345.

Q: Warum bekomme ich von der deutschen Telekom nicht immer die Telefonnummer
   eines Anrufers ("Caller Id") übermittelt?
A: Aus Datenschutzgründen wird die Telefonnummer nicht bei Anrufen aus dem
   analogen Netz übermittelt. Es sei denn, Sie erlauben der Telekom
   ausdrücklich die Übermittlung Ihrer Nummer (kostet nichts) und sind an
   einer digitalen Vermittlungstelle angeschlossen.!br
   Wer einen ISDN-Anschluß hat, muß dagegen der Übermittlung seiner Nummer
   ausdrücklich widersprechen - oder beantragen, daß er über die Übermittlung
   seiner Nummer fallweise entscheiden kann (per ISDN-Telefon; fallweise
   Unterdrückung [CLIR] ist inzwischen kostenlos, fallweise Übermittlung kostet
   extra). Es fällt der Telekom jedoch offenbar !u1sehr!u0 schwer, das schon
   im ersten Anlauf richtig zu konfigurieren. Wer auf die Übermittlung der
   Caller Id angewiesen ist, sollte genau überprüfen, ob auch alles korrekt
   eingestellt wurde.

Q: Bekomme ich die Caller Id bei Anrufen aus dem Ausland übermittelt
   (deutsche Telekom)?
A: Ja, bei Anrufen aus Ländern, die es mit der Rufnummerübermittlung nicht so
   eng sehen wie wir in Deutschland (z.B. USA, Kanada).

Q: Ich habe gehört, es werden eigentlich zwei Caller Id's übermittelt?
A: Das stimmt, es wird sowohl eine "User-Provided, not screened", als auch
   eine "Network-Provided" (die ist von der Telefongesellschaft)
   übermittelt.!br
   Gernot Zander <hifi@scorpio.in-berlin.de> schrieb dazu am 15. Dez 1996:
!verbon
        Die erste ist von der Anlage mitgegeben und ungeprüft.
        Die zweite ist die von der Telekom vergebene.
        Ich hatte hier auch schon solche Anrufe, wo ein Siemens-
        Mitabeiter aus München hier anrief und mit einer ellenlangen
        Nummer kam, deren Vorwahl 030 (Berlin) war.
        Ich rief daraufhin die Telekom an, was das denn solle, und
        die wußten auch erst nichts, dann fanden sie wen kompetentes,
        der sagte, daß das ginge.
!verboff
   Zum "no screening" schrieb noch Ralf G. R. Bergs
   <rabe@Informatik.RWTH-Aachen.de> am 16. Dez 1996:
!verbon
        "CLIP no screening". Der Anrufer hat das (kostenpflichtige und nur am 
        Komfort-Anlagenanschluss(!) verfügbare) Feature, welches ihm die 
        Übertragung einer beliebigen Caller ID erlaubt.
!verboff


!3Teles driver

!old
Q:  I use SETUP.EXE under DOS, to configure my Teles/Creatix with memory 
    xxxxx and IRQ yy. How do I do this under isdn4linux?
A:  You can enter do this by entering the correct kernel options at boot.
    It is not recommended that you compile them into the kernel, however i
    may be neccesary in some cases when software conflicts occure or if you
    have several teles cards in one machine. In this case you should edit
    "/usr/src/linux/drivers/isdn/teles/config.c" to reflect the correct
    settings for your card(s). (read comments in that file)

Q: I'm confused: according to the documentation, my Teles card is configured for 
   IO address 0x180. In Linux (and also in some Windows programs)
   the address is shown as 0xd80?
A: The card uses both IO addresses! Karsten Keil
   <keil@temic-ech.spacenet.de> wrote on 3 Jan 1997:
!verbon
        The addresses actually used are:
          isac 980
          hscx 180/580
          cfg  d80
        The confusion is the result of a misunderstanding. Teles gives the
        HSCX0 address as a reference, while the old Teles driver needs the
        cfg address. Since users were confused by this, both driver can 
        now use either address (which confuses the users even further ;-))
!verboff

!old
Q:  When compiling the teles drivers I get an error similar to: too many
    arguments to function _get_free_pages_R5243d78b'?
A:  From a certain kernel in 1.3.x the calling of kernel function
    get_free_pages was changed. You are using an old kernel. In this case 
    you should the following line in teles/teles.h
!verbon
     #define NEW_GET_FREE_PAGES
!verboff
   comment out
!verbon
     /* #define NEW_GET_FREE_PAGES */
!verboff

!old
Q:  I'm using kernel 1.3.x, the telesdriver compiles fine, all the
    correct parameters are set in config.c, but the card still won't work.
A:  From a certain kernel in 1.3.x the timer was altered. You should comment
    out the #define NEW_TIMERS line in teles/teles.h.
!verbon
     /* #define NEW_TIMERS */
!verboff

!old
Q:  Is it possible to have more than 1 teles card in one computer? 
A:  Yes, it is. All the parameters should be entered in teles/config.c.
!verbon
     struct IsdnCard cards[]={
       { (byte *)0xd0000,11,0xd00,NULL } ,
       /* 1. Karte */ { (byte *)0xd8000,10,0xe80,NULL } ,
       /* 2. Karte */ ...
       /* u.s.w. */
     };
!verboff
  On 6-10-1996 Christian Kratzer <ck@toplink.net> suggested
  (lines beginning with "io=" belong at the end of the previous line):
!verbon
     # load modules
     /sbin/modprobe isdn.o
     echo "teles0 - Teles S0/16.2"
     /sbin/insmod $MODPATH/misc/teles.o -o teles0 teles_id=teles0 
       io=0xd0000,5,0xd80,2
     echo "teles1 - Teles S0/16.2"
     /sbin/insmod $MODPATH/misc/teles.o -o teles1 teles_id=teles1 
       io=0xd2000,9,0xe80,2
     echo "teles2 - Teles S0/16.2"
     /sbin/insmod $MODPATH/misc/teles.o -o teles2 teles_id=teles2 
       io=0xd4000,12,0xf80,2
     /sbin/lsmod | grep teles > /dev/null
!verboff

!old
Q: How can I tell whether or not my Teles card is recognized correctly?
A: During booting a message "kernel: HSCX version A:5 B:5" and "kernel:
   channels 2" should appear. A:4 B:4 is also okay. Other values
   (in particular A:0 B:0 or A:f B:f) mean the card is not recognized 
   correctly.!br
   Also check under Troubleshooting|Teles.

Q: Where can I send complaints to Teles?
A: At the  Email addresse"vertrieb@teles.de". They also have 
   WWW pages: !link http://www.teles.de/;!br
   Karl Heinz Kremer <khk@specht.stuttgart.netsurf.de> added
   on 2 Jan 1997:
!verbon
        If you want to read more about Teles's business practices, look at
          !link http://www.inx.de/~chris/isdn.htm; an.
!verboff


!3HiSax driver

!old
Q: Where can I find the HiSax driver?
A: At  ftp.franken.de /pub/isdn4linux/HiSax.

!old
Q: Which version is current?
A: Version 1.4.

!old
Q: How is HiSax better as the original Teles driver?
A: Karsten wrote to the FAQ team on 14.Oct.96:
!verbon
     HiSax checks the hardware and the behavior of the IRQ, so that the  
     driver will only be loaded if it can access the register and the
     interrupts can be generated. 
     THEREFORE:
       loading twice is taken care of
       HSCX version 0 or F is taken care of
       BUSY with minicom only if :
       * REALLY BUSY
       * no MSN/EAZ
       * cable/line problems
!verboff
   So, isn't that something?

!old
Q: How do I install HiSax?
A: Karsten Keil <keil@temic-ech.spacenet.de> described like this:
!verbon
     It can never hurt to first backup the original kernel sources.
     Then go to /usr/src/linux (where the current source should be.
     The patch itself:
       zcat HiSax_1.1.patch.gz |patch -p1 >& /tmp/HiSax.log
     The -p1 is very important, otherwise all files will end up in new 
     directories under /usr/src/linux.
     Then look at /tmp/HiSax.log for errors/warnings/rejects, if there are 
     any then look at those files and correct by hand, if necessary.
!verboff
   Uwe Bonnes <bon@elektron.ikp.physik.th-darmstadt.de> add:
!verbon
     If you have Gnu Patch, you can also use "... |patch -s -p1 ". Then
     _only_ the errors will be reported. If you want a log, you can also 
     "... |patch -s -p1 | tee /tmp/HiSax.log". Then you get a logfile in
     addition to the screen output.
!verboff
   Notice: In the meantime there are newer versions of HiSax.

!old
Q: Are there patches to the HiSax driver?
A: Yes. Karsten <keil@temic-ech.spacenet.de> wrote on 15.10.96:
!verbon
     The patches (until the next version) will be "numbered" with letters
     and be available via ftp.
!verboff
   ftp here means ftp.franken.de /pub/isdn4linux/HiSax

!old 
Q: What does the remark: "Known Bugs: incoming calls are only
   delivered, if channel == B-channel (same on teles)" mean?
A: Karsten Keil <keil@temic-ech.spacenet.de> wrote on 14.10.1996:
!verbon
     1. The above statement is not quite correct:
        if ((channel &1)+1 == B-channel )
     2. I descibed the bug the other way around: if B channel 1 is
     being used by another ISDN device and i4l dials out, then the
     logical channel 0 from the VST is assigned B channel 2 ---> OK
     The other ISDN device hangs up.  Another call comes in for i4l,
     this time on B channel 1.  Since channel 0 is taken, and there is
     a fixed order B1->chan 0,2,4...  B2->chan 1,3,5... the call is
     not accepted.  (chan 2,3 is for 2 cards, etc.)  This happens only
     seldomly, and will be fixed soon (if I get a brilliant idea).
!verboff
   As far as we know, this was fixed in HiSax 1.2 [note from the FAQ Editors]

!old
Q: My ELSA card has 2 LEDs that light up like a neon sign. What does that
   mean?
A: Karsten Keil <keil@temic-ech.spacenet.de> wrote 14.10.1996:
!verbon
     l1 is down
       => both LEDs blink ca. 1s on 1s off.
     l1 is activated (also though the telephone or whatever)
       => Blink in sequence 0.5 yellow 0.5 green
     In use
       => 1.5 on 0.5 off
          green   HSCX A active
          yellow  HSCX B active
     The constant blinking is caused when the card hangs, as I noticed
     during development. 
!verboff


!3ICN driver


!old
Q: Where can I buy the ICN card?
A: 
!verbon
   Thinking Objects Software GmbH
   Obere Heerbergstr. 17
   97078 Würzburg
   Germany
   Tel: +49-931-2877950
   Fax: +49-931-2877951
   email isdn-support@think.de
   WWW !link http://www.think.de/;
!verboff

!old
Q: Where can I get the newest firmware for my ICN?
A: Torsten Hentschel <Torsten.Hentschel@DInet.de> wrote on 11.Oct.1996:
!verbon
     The newest firmware should be available under the URL
       !link ftp://ftp.think.de/pub/isdn4linux/firmware/;
!verboff

!old
Q: Is it possible to use several ICN cards in one computer?
A: Yes, but starting with kernel 2.0.0 the configuration scheme has changed:
   With older kernels, a separate ICN module had to be loaded for each card.
   For 2 cards it looked something like this:
!verbon
     /sbin/insmod -m /lib/modules/1.2.13/misc/isdn.o >/etc/isdn.map
     /sbin/insmod -m /lib/modules/1.2.13/misc/icn.o >/etc/icn.map
     /sbin/insmod -m -o icn2 /lib/modules/1.2.13/misc/icn.o >/etc/icn2.map
!verboff
   With kernel 2.0.0 only one driver is necessary. NOTICE: 2.0.0 itself
   is buggy, better to use 2.0.18 or newer.!br
   Here is an example for one ICN-2B and two ICN-4B:
!verbon
     /sbin/insmod -m /lib/modules/`uname -r`/misc/isdn.o > /etc/isdn.map
     #
     # ICN-2B, default port and mem (0x320, 0xd0000)
     #
     /sbin/insmod -m /lib/modules/`uname \
       -r`/misc/icn.o icn_id=icn0 > /etc/icn.map
     #
     # ICN-4B inserted at port 0x328
     #
     /sbin/icnctrl add 0x328 icn1 icn2
     #
     # Another ICN-4B at port 0x300
     #
     /sbin/icnctrl add 0x300 icn3 icn4
     #
     # Load firmware 
     #     ICN-2B: 1TR6
     #  1. ICN-4B, beide S0 EDSS1
     #  2. ICN-4B, 1. S0: 1TR6, 2. S0: EDSS1
     #
     /sbin/icnctrl -d icn0 \
       load /etc/loadpg.bin /etc/pc_1t_ca.bin
     /sbin/icnctrl -d icn1 \
       load /etc/loadpg.bin /etc/pc_eu_ca.bin /etc/pc_eu_ca.bin
     /sbin/icnctrl -d icn3 \
       load /etc/loadpg.bin /etc/pc_1t_ca.bin /etc/pc_eu_ca.bin
!verboff

!old
Q: My ICN 4B is recognized only as an ICN 2B. How is the syntax for loading 
   icn.o with insmod for the ICN 4B?
A: dietmar <dietmar@highway.bertelsmann.de> wrote 08.Oct.1996:
!verbon
     I use the following script to "start" the card:
       #!/bin/sh
       #
       # load modules
       /sbin/modprobe isdn.o
       /sbin/modprobe icn.o icn_id=icn0 icn_id2=icn2
       #                                ^^^^^^^^^^^^
       #                                Important here is the entry for
       #                                icn_id2. Then the driver recognizes,
       #                                that a 4B should be used.
       #
       # download firmload
       cd /usr/src/isdn4k-utils-1.3.97/icn
       icnctrl load download/loadpg.bin download/pc_1t_ca.bin \
         download/pc_1t_ca.bin 
       /sbin/isdnctrl verbose 2
!verboff
   Jochen Wiedmann <Jochen.Wiedmann@Neckar-Alb.DE> wrote on 8.Oct.1996:
!verbon
     modprobe icn icn_id=line0 icn_id2=line1 icnctrl io 0xd0000 0x340
     icnctrl add 0x340 line0 line1
     icnctrl load /sw/linux-i386/isdn4kutils-2.0.0/lib/loadpg.bin   \
                  /sw/linux-i386/isdn4kutils-2.0.0/lib/pc_1t_ca.bin \
                  /sw/linux-i386/isdn4kutils-2.0.0/lib/pc_1t_ca.bin
!verboff

!old
Q: What is "lanx75i.bin" in the ICN directory?
A: "lanx75i.bin" is old. Previously, with EDSS1 ony HDLC was supported.
   lanx75i.bin was the first test version of the firmware that also
   supported X.75. When the firmware was loaded, its version was
   noted in the kernel syslog. For the current firmware, the following
   strings should be shown:
!verbon
     For EDSS1:
       DRV1.11EC-Q.931-CAPI-CNS-BETA-15.07.95,BRV2.3
     For 1TR6:
       DRV1.01TC-1TR6-CAPI-CNS-BETA-03.05.95,BRV2.3
!verboff


!3Working together with other ISDN devices  

!old
Q: When a Fritz! card calls with X.75, Linux crashes. What can I do?
A: Karsten Keil <isdn4@temic-ech.spacenet.de> has written a new driver (the 
   "HiSax driver"). It includes a bug fix for this.
   Also see the questions Gerneral|HiSax and the section HiSax driver in this
   FAQ.

!old
Q: An AVM (A1 or B1) cannot call in to me with X.75, either
   under Win95 or under OS/2?
A: This is a known problem, see the last question. At any rate this is not 
   yet solved in the HiSax driver either.

!old
Q: How can enable a Fritz! card to call in to me?
A: As long as the patch form Karsten Keil <isdn4@temic-ech.spacenet.de> is not
   applied: only with hdlc - if the card tries to call in with X.75
   isdn4linux likes to hang. Therefore you should set up a separate
   MSN for Fritz! cards with hdlc. The HiSax driver also has the same
   problem.  Note from Roland Rosenfeld <roland@spinnaker.rhein.de>:
   If you've used up your three MSNs, you can play tricks with the
   service recognition, e.g.
!verbon
     MSN     Analog                          Digital
     ===     ======                          =======
     1       Voice + ISDN answering machine  HDLC, PPP
     2       Voice (Mother)                  Net interface
     3       Modem/Fax                       X.75
!verboff
   If you want, you can install another answering machine on MSN 2 that play a
   totally
   differeng message...
   
!old
Q: Which ISDN routers are there that are OS-independent?
A: Sakari Aaltonen <sakari@picea.hut.fi>: 
!verbon
     There seems to be a lot of routers with 1 BRI, those that have more 
     are expensive (Cisco 4000 with four connection about DM 15000.--,
     Ascend Pipeline 400: ?). 
!verboff
   Jürgen Goeritz <juergen@bart.simpson.inka.de>: 
!verbon
     ISDN routers with 4xBRI are less expensive from a German  
     manufacturer - see !link http://www.conware.de/;
!verboff
   Jochen Wiedmann <Jochen.Wiedmann@Neckar-Alb.DE>: 
!verbon
     A Banzai! might also help. As hardware any PC with (e.g.) Teles
     cards would work, the software costs around 800-1000 DM.  I
     personally don't like Banzai! routers at all because of their
     poor diagnostic capabilities, in particular remote maintenance as
     pretty much impossible (unless you have the SNMP capable version,
     but it costs somewhat more). But when they run, they run stable
     and as opposed to Ciscos they are capalbe of real callback.  From
     Cisco as an alternative there is the Cisco 2503 for about 5000
     DM, that has only one Port, but two serial interfaces, on which
     you can connect a TA (each about 800 DM).  Finally, last, not
     least you can bit the bullet and get several Cisco 1003s
     (ca. 2000DM each). In case the price does not play such a bit
     role, I would take this variation. I simply like Ciscos. :-)
!verboff
   Winfried Haug <haug@seicom.net>: 
!verbon
     You need to decide, which is more important to you:
       (1) saving money
       (2) saving time
     For (1) there are two solutions:
     - Banzai! (now called Flux or Concorde..)   
       -> !link http://www.concorde.de/; (from cls, www.cls.de)
       -> !link http://www.flux.de/;  (from INS, www.ins.de).  
       Based on at least a 386 and routes Ethernet -> ISDN, works with
       many cards, the programmers themselves work with Teles.
       Disadvantates: not cleanly remotely configurable, unless you
       buy the SNMP option, which makes it more expensive and
       therefore more unattractive...
     - ISPA + PCROUTE   
       -> !link http://www.biochem.mpg.de/~heha/;   
       also requires a PC (also works with 286). Has much 
       fewer options than Banzei, Flux, Concorde etc., and is not at all 
       remotely configurable, but runs totally stable. 
       PCROUTE costs nothing, ISPA now costs 70.-, perhaps you can still find 
       version 2.41 that runs unlimited even without a key.
     Both solutions support pretty much all ISDN protokols (including
     the diverse HDLC variantions etc..). Support for SPVs (soon
     obsolete) and D64S is there at least for Teles cards (depends on
     the CAPI, not the software). You can get old PCs for <1.000 DM,
     the Teles card also doesn't cost much but die Flux, Concorde
     software is expensive if you get SNMP as well -> you are then at
     2.000.- and you could just as well buy a cisco1003...  (2) IF you
     don't want to assemble anything yourself, you can take with 4
     individual Cisco1003 routers, at around 2300.- and all of your
     problems are more or les solved (other than the diverse IOS
     bugs...). But CISCO router can't do "correct" callback... and as
     protocol only PPP (although there are IOS versions, that don't do
     it cleanly) und CISCO-HDLC.  If you need 4 BRIs -> CISCO 4000,
     but then you should get the 8 BRIs, costs just under 2.000 DM
     less. But then you have to invest somewhat more than
     10.000.-...:-( Another varition: ELSA LANCOM MPR, also costs <
     2.000 DM, can do callback, various protocols (HDLC, X.75, PPP)
     and is really nice to configure.  At the Interop, a Shiva ISDN
     Router with a/b switch for 1600 DM was exhibited, but with 4 BRI
     ports bei you'd be somewhat over 6000 DM...  Then there are
     several manufacturers that offer simple BRI routers (prices
     tending to fall well under 2.000), e.g. ASCEND, MIRO etc...  But
     if you must have 4 BRIs, there's only the choice between Cisco
     and Ascend..  uh... and since you asked about Ascend, I have a
     price list here from Ascend (july 96), the max400 WITHOUT BRI
     port already costs 15.750.-, the 4-way BRI is then an additional
     11.250 DM... I think that's enough about Ascend...:-(
     In case you have nothing against a PC solution, you could also
     use netGW from netcs (!link http://www.netcs.com;). This ia a software
     for SCO, AIX, Sun etc. and is based on PCs e.g. the cards from
     Diehl ISDN. netGW should offer by far the most protocols and
     options, but then you have to become familiar with a PC the
     problems that come along with it.  A SCO solution with 4- ISDN
     cards + Software costs also around 10.000 DM, however.  We have
     now retirned almost all of our Banzai! and Co, since in the long
     run they are only poorly remotely aministerable are are nowhere
     near as stable as Cisco or other stand-alone routers...  In the
     end, it is a decsion of you would rather spend more money, and it
     runs right awwy, or you build your own PC router and have to play
     to get it going.  You have to decide for yourself, although Teles
     can drive you to desparation since the CAPI versions often have
     huge problems as as normal user can't get any older
     versions. Support at Teles is not that great (toll 0190-8 phone
     number), and you can easily spend 20-30 DM on support call
     without getting an solution to your problem...
!verboff

!old
Q: What settings does ISPA need to work with the standard settings
   of isdn4linux?
A: The following configurations are possible (these also apply to the
   other drivers from H. Hanewinkel, i.e. CINDI, CANDI, WISPA...):
!verbon
     i4l side                             ISPA side
     ====================================================
     isdnctrl l2_prot isdn0 hdlc           \
     isdnctrl l3_prot isdn0 trans           >   -h0
     isdnctrl encap   isdn0 rawip          /
     ----------------------------------------------------
     isdnctrl l2_prot isdn0 hdlc           \
     isdnctrl l3_prot isdn0 trans           >   -h1
     isdnctrl encap   isdn0 uihdlc         /
     ----------------------------------------------------
     isdnctrl l2_prot isdn0 x75i           \
     isdnctrl l3_prot isdn0 trans           >   -l0
     isdnctrl encap   isdn0 rawip          /
     ----------------------------------------------------
     isdnctrl l2_prot isdn0 x75i           \
     isdnctrl l3_prot isdn0 trans           >   -l1
     isdnctrl encap   isdn0 uihdlc         /
     ---------------------------------------------------- 
!verboff
   The parameter with the least problems is -h0.

!old
Q: How does isdn4linux work with a Cisco (HDLC) on the other side
A: On the Cisco router the "keep alive" packets have to be turned off.
   isdn4linux has to be configured with HDLC, transparent with Cisco
   encapsulation:
!verbon
     isdnctrl l2_prot <interface> hdlc
     isdnctrl l3_prot <interface> trans
     isdnctrl encap <interface> cisco-h
!verboff
   <interface> is the name of the IP interface that has been set up with
!verbon
     isdnctrl addif <interface>
!verboff
   (e.g. isdn0).

!old
Q: What settings does an ELink need to work with isdn4linux?
A: In the mailing list Daniel Moeller (danny@rsun.lfn.unterland.de)
   gave the following advice:
!verbon
     [...] Here I have several clean connections every day to a
     EL310, I poll using ifcico FIDO with it. Here is the config 
     for the Elink:
     ati Elink 310 Version 1.36 OK ati4
     Baudrate: 115k2,N
     SIN unbekannt: Ruf annehmen
     Anschaltung: EDSS1
     SIN ungleich &B: Ruf annehmen
     Betriebsart: X.75
     SIN gesendet: neutral
     Mehrfachrufnummer: 980031
     E1 M1 Q0 V1 X2 &B049 &C1 &D2 &R0 &S1
     \A3 \J0 \N3 \Q3 \V1 %A013 %C1 %F1 FCLASS=000
     S00=000 S01=000 S02=043 S03=013
     S04=010 S05=008 S06=002 S07=040
     S08=003 S09=000 S10=007 S11=000
     S12=050 S13=01010000B S14=10011010B S15=00001110B
     S16=10110011B S17=049 S18=013 S19=003
     S20=000 S21=00000100B S22=000 S23=006
     S24=120 S25=128 S26=016 S27=002
     S28=003 S29=128 S30=000 S31=000
     OK
!verboff

!old
Q: I have problems establishing connections to an ELink.
A: Daniel Moeller (danny@rsun.lfn.unterland.de) wrote to the
   mailing list:
!verbon  
     I reported on my problems connecting to an EL 310 several weeks ago.
     No connect message caome on the data channel from ISDN. 
     The troublesome Elink is on a 1TR6
     line and has identical settings as another Elink on 
     Euro ISDN with which I have never had problems. Since ca. 2
     weeks, suddenly everything works, without having changed any thing on
     the local or on the remote side.
     Conclusion: The software at the switching office also seems to
     play a role....
!verboff

!old
Q: I'd like to exchange data with a Macintosh (Leonardo card),
   what do I or the Mac user have to watch out for?
A: Markus Reicher <a9003436@unet.univie.ac.at>: 
!verbon
     When you call the Mac, he should set the protocol to X.75 or HDLC. 
     When he calls you, he must explicitly set the protocol (e.g. 
     by inserting an "X" for X.75) in the called number - otherwise the Mac 
     might call with the Leonardo protocol.
!verboff

!old
Q: My Cisco has a Bug - which IOS is recommended? 
A: Jochen Wiedmann <Jochen.Wiedmann@Neckar-Alb.DE> wrote:
!verbon
     Since Cisco-IOS 11.0.x (x = 7 is the only one I know about) I've had no
     more problems with Cisco <-> HDLC <-> non-Cisco. That applies for netgw
     as well as i4l and Banzai! on the other side, altough in each case the
     special Cisco HDLC options are important.
!verboff

!old
Q: When I call in to an ASCEND, does it cost a charge unit even if I get
   a "BUSY"?
A: Winfried Haug <haug@seicom.net> wrote on 12.10.1996:
!verbon
     Until yesterday we had problems with AVM+W95 and Mini Port driver
     (PPP m. PAP). The Ascend took the call and 3-4 sec later hung up.
     In the Ascend Log is just Call refused, which isn't right, since
     the the Ascend did take the call...  With a new firmware on the
     Ascend (4.6C+) instead of 4.6B+p2, the problem seems to be gone.
     Since before we had another RACK (from ITK) that did _not_ behave
     this way with our customers, I'm assuming that is was the Ascend.
     New firmware for the Ascend can be found at!br
       !link ftp://ftp.ascend.com/;!br
     or!br
       !link ftp://ftp.ascend.de/;!br 
     altough you have to pay very close attention that you are taking the 
     correct image!
!verboff

!old
Q: What do I have to watch out for to connect to Windows95?
A: Torsten Krueger <torsten@nrw-online.de> wrote on 5.10.1995, that
   VJ (i.e. header) compression has to be turned off on both sides.
   Windows95 is very touchy if this option is rejected by isdn4linux.
   
!old
Q: Can use only syncPPP with Windows95 to connect to isdn4linux?
A: Frank-Christian Kruegel <fchk@gigabyte.ohz.north.de> wrote on 13.10.1996:
!verbon
     Modem network: yes. This might also be possible with CINDI,
     WISPA etc. from Herbert Hahnewinkel (costs ca 80 DM per license, and
     every user needs one), but I didn't spend the money.
!verboff

!old
Q: A Windows95 user with a Fritz! Card poor transfer rates 
   when connected with isdn4linux - what can one do?
A: Sven Engelhardt <sven@sik.de> wrote on 13.10.1996:
!verbon
     use AVMPort (Capi modem emulation for Win' 95), important: on
     Win 0.95 "Register on network" should be turned on.
!verboff

!old
Q: Where can I find the settings to get a terminal window when I log in?
A: Sven Engelhardt <sven@sik.de> wrote on 13.10.1996:
!verbon
     Control Panels/Software/Diskette CD-ROM Admin/Apptools/Dscript
       - Script administration for modem networks (after installing
       see Start/Programs/Utilities)
     So that the script receives something, with ISDN turn echo. With
     the AVMPort put E1 in the init string. 
!verboff

!old
Q: Is it possible with mgetty to automatically start pppd when LCP frames
   are received?
A: Yes, it is. You have to compile mgetty with "-DAUTO_PPP" and then
   in the file /usr/local/etc/mgetty+sendfax/login.config, the line  

!verbon
#/AutoPPP/ -    ppp     /usr/sbin/pppd auth -chap +pap login kdebug 7 debug
!verboff
   should be uncommented and edited. The so-called PPPWombat Patch is now
   obsolete.

!3Raw IP
Q: Was ist Raw-IP?
A: Bei Raw-IP wird auf die Verwendung eines Protokolles wie X.75 oder HDLC
   (Modememulation, s.o.) bzw. PPP verzichtet. Es werden direkt TCP/IP
   Pakete ausgetauscht.

Q: Welche Vor- und Nachteile hat Raw-IP?
A: Das eingesetzte Verfahren hat spezielle Vor- aber auch Nachteile.!br
   Vorteile:
!verbon
        * Kein Handshaking mehr
          => schneller Verbindungsaufbau
        * Authorisierung per Caller Id
          => schnell, sicher, ohne Paßwort
        * Fixe IP-Adresse
          => eine abgebrochene Verbindung kann nach Wiedereinwahl
             fortgesetzt werden
        * Höherer Datendurchsatz
        * Hohe Stabilität (kleiner Treiber => kaum Bugs)
!verboff
   Nachteile:
!verbon
        * Kein Handshaking mehr
          => Konfiguration muß !u1vorher!u0 stattfinden (IP-Adressen,...)
          => sinnvoll nur für maximal einen Provider gleichzeitig einsetzbar
        * Authorisierung kann nur per Caller Id erfolgen
          => Einwahl nur vom eigenen Anschluß möglich
        * Fixe IP-Adresse
          => muß vorher bekannt sein, höherer Verbrauch von IP-Adressen,
             keine dynamische Adreßvergabe möglich
!verboff
  Aus dieser Übersicht läßt sich gut erkennen, unter welchen Rahmenbedingungen 
  Raw-IP sinnvoll eingesetzt werden kann.

Q: Wie kann ich nach dem Aufbau einer Raw-IP-Verbindung ein Skript ausführen
   lassen?
A: Harald Milz <hm@seneca.muc.de> schrieb dazu am 28. Nov 1996:!br
   Mache doch ein tail -f auf Dein syslog und hänge ein Auswerteskript dran,
   z.B. (alles in einer Zeile!)
!verbon
         tail -f /var/log/messages |
             awk '/isdn0 connected/ { system ("ip-up") }
             /hangup isdn0/    { system ("ip-down") } '
!verboff
   oder eleganter in perl.!br
   [Evtl. kann auch isdnlog entsprechend programmiert werden - die Red.]



!3Modem emulation (use with ttyI* devices)

Q: Heißt Modememulation, daß ich mein analoges Modem wegwerfen kann?
A: Nein, der Name "Modememulation" bezieht sich allein auf die Art, wie
   der eigene Computer mit dem ISDN-Treiber kommuniziert. Er bezieht sich
   ausdrücklich !u1nicht!u0 auf die Art und Weise, wie die Daten dann
   vom ISDN-Treiber über die Telefonleitung geschickt werden - das geschieht
   nämlich digital! Zu einer Nicht-ISDN-Mailbox wird deshalb auch mit der
   "Modememulation" des ISDN-Treiber !u1keine!u0 Verbindung aufzubauen sein.!br
   Der Name hat trotzdem seine Berechtigung, denn schließlich kann alle
   Software unter Linux, die Modems ansteuern kann, über die "Modememulation"
   auch den ISDN-Treiber steuern. Und das ist ja das, was wir eigentlich
   wollen.

!old
Q: Which device should I use for calls out or calls in?
A: Only the ttyI* devices should be used. The cui* devices are created 
   only for reasons of compatibility. Now that there is mgetty, there is not
   reason to use the cui* devices any longer. If they are used, locking will
   not work correctly (several programs could simultaneously attempt to use
   the same device).

!old
Q: How to I switch the modem emulation from X.75 to HDLC?  
A: With the option S14=3; for examplem "ATS13=3".

!old
Q: How can poll with Taylor-UUCP using isdn4linux?
A: As usual, the same as with serial interfaces. Simply use /dec/ttyI* as the
   device, as the init string for the modem emulation you have to set the
   correct MSN or EAZ with "AT&E<msn/eaz>".

!old
Q: What speed should I set for the modem emulation?
A: It doesn't matter. The driver internally always uses the full speed that
   ISDN offers. This is also given in the connect string.

!old
Q: Is 'init-chat "" ATZ OK AT&E4 OK ATS14=3 OK' correct for 1TR6
   (the other side has DSS1)?
A: In principle, yes, when the EAZ is really 4 (at&e4) and HDLC
   should be used (ats14=3).

Q: Was genau bedeutet das Register S13?
A: Fritz Elfert <fritz@wuemaus.franken.de> schrieb dazu am 1. Dez 1996:!br
   Wenn eine Anwendung ein write auf das ttyI device aufruft, wird
   isdn_tty_write() aufgerufen. Dort werden die übergebenen Daten
   in einen Zwischenpuffer (info->xmit_buf[]) kopiert, und - falls im
   Voice-Mode - DLE-Sequenzen dekodiert. Danach wird ein Zähler
   (info->xmit_count) aktualisiert, der den Füllstand des Zwischenpuffers
   aktualisiert. Über den Timer-Interrupt werden in der Funktion
   isdn_tty_modem_xmit() zyklisch zwei weitere Routinen aufgerufen:
   isdn_tty_senddown() und isdn_tty_tint(). Die Aufgabe von isdn_tty_tint()
   ist es, die Daten aus dem Zwischenpuffer in sk_buffs zu packen (sk_buffs
   sind die Packet-Buffer, die auch vom Networking verwendet werden) und 
   dabei bei Bedarf die verschiedenen Audio-Formate nach a-law zu wandeln
   und - ebenfalls bei Bedarf - einen T.70 Header zu erzeugen. Das
   resultierende Päckchen wird dann in eine Sendequeue (info->xmit_queue)
   gestellt. isdn_tty_tint() arbeitet schlieslich diese Queue ab, und
   übergibt die Packete an den jeweiligen Lowlevel-Treiber.!br
   Wenn nun Bit 1 in Register 13 gesetzt ist, wird der Aufruf von
   isdn_tty_senddown() und isdn_tty_tint() zusätzlich zum Timer-Interrupt
   auch aus isdn_tty_write() heraus durchgeführt, also sofort beim write
   aus der Anwendung heraus.

!3Async PPP

!commenton
(Die folgenden Fragen entstammen zumeist der syncPPP-FAQ von Michael Hipp.)
!commentoff

!old
Q: pppd, ipppd, asyncPPP, syncPPP - was ist das? Was soll ich einsetzen?
A: !b1asyncPPP!b0 ist ein zeichenbasiertes Protokoll und wird gewöhnlich über
   analoge serielle Leitungen geschickt. Es ist natürlich möglich, asyncPPP
   über ISDN zu routen (obwohl ISDN eine Synchronverbindung bietet). Man 
   kann es tun, indem man ein ISDN-Modem an den Computer anschließt. Dieses
   Gerät besitzt eine RS-232-Schnittstelle zum eigenen Rechner sowie eine
   ISDN-Schnittstelle in Richtung Telefongesellschaft. Nehmen wir nun an, man
   benutzt PPP an der seriellen Schnittstelle, dann laufen diese asynchronen
   PPP-Pakete über die synchron laufende ISDN-Leitung. Damit diese Pakete
   von der eigenen Linux-Maschine akzeptiert und bearbeitet werden, darf man
   !u1nicht!u0 HDLC/syncPPP einsetzen, denn das würde nicht funktionieren. 
   Stattdessen muß man /etc/inittab editieren:
!verbon
        #
        # inittab       This file describes how the INIT process should set up
        #               the system in a certain run-level.
        [...] 
        # PPPD for asyncPPP over ISDN
        i1:45:respawn:/usr/sbin/pppd -detach silent noipdefault /dev/ttyI0
!verboff
   Dies teilt init mit, daß der asynchrone pppd direkt auf dem benannten 
   Device gestartet werden soll. Man beachte, daß mit dieser Konfiguration 
   ausschließlich PPP über diese Leitung gefahren werden kann.
   Es gibt auch andere Wege: man startet einen getty an diesem tty, richtet
   einen User ein, der den pppd startet, und so weiter. Wer mehr darüber 
   wissen will, sollte sich die FAQ ansehen, die mit dem Standard-pppd
   geliefert wird.!br
   Im Gegensatz ist !b1SyncPPP!b0 ein bitorientiertes Protokoll. Dazu kann der
   originale pppd nicht verwendet werden. Michael Hipp hat eine entsprechend
   angepaßte Version geschrieben, die sich ipppd nennt.!br
   Der ipppd kann PPP-Pakete verarbeiten, die als HDLC-Frames ankommen.
   Der PPP-Treiber in ISDN4Linux reicht alle IP-Pakete direkt an den
   network layer weiter, während alle PPP-Protokollframes an das /dev/ippp*-
   Device durchgestellt werden. So gesehen ist der ipppd ein einfaches
   externes Netzwerkprotokoll-Programm. Wenn Sie sich mithilfe der /dev/ttyI*-
   Devices in einen fremden Rechner einloggen und *dort* erst das PPP starten,
   dann nehmen Sie den "alten" pppd. Wenn die Gegenstelle unmittelbar beginnt,
   Frames zu senden, haben Sie vermutlich Kontakt zu einer syncPPP-Maschine 
   aufgenommen - nehmen Sie das Network Device aus ISDN4Linux mit der 
   'syncppp encapsulation' und versichern Sie sich, daß der ipppd läuft und
   Kontakt zu mindestens einem /dev/ippp* hat. Bitte lesen Sie in der
   Anleitung zu ISDN4Linux nach, wie man ein Network Device konfiguriert.

!old
Q: Ich möchte asynchrones PPP fahren. Kann ich dazu die Netzwerkinterface von
   isdn4linux einsetzen?
A: Nein, das ist nicht möglich. Asynchrone PPP-Encapsulation ist nur mit
   dem Standard-PPP-Paket (pppd) über die /dev/ttyI*-Devices möglich (siehe
   letzte Frage). Das Netzwerkinterface kann einzig und allein vom ipppd für
   synchrone PPP-Encapsulation benutzt werden.

!old
Q: Wie kann ich die Login-Zeit reduzieren?
A: Siehe dazu die entsprechenden Hinweise bei Sync-PPP, die ebenfalls für den
   pppd angewandt werden können.

Q: Wie kann ich meinen Durchsatz mit PPP erhöhen?
A: Mit MPPP weitere Kanäle aufbauen (siehe den entsprechenden Abschnitt dazu).
   Für alle, denen das zu teuer ist, und die !u1asyncPPP!u0 verwenden gibt es
   noch einen kleinen Trick. Mit der Option "asyncmap 0" gibt man an, daß man
   darauf verzichten möchte, alle Steuerzeichen (ASCII<32) zu "escapen" (das
   ist der Defaultwert ist). Wenn die Gegenstelle mitspielt, kann das etwa 12%
   mehr Durchsatz bringen.



!3Sync PPP


!commenton
(The following questions are mostly from the syncPPP FAQ by Michael Hipp.)
!commentoff

!old
Q: pppd, ipppd, syncPPP, asyncPPP .. what is that ?
   What should I use?
A: See this question in the "Asnyc PPP" section.
   
!old
Q: How do I compile isdn4linux with syncPPP?
A: To compile the kernel with syncPPP included in ISDN4Lilnux, you 
   have to answer the appropriate questions in "make config" with "yes".
   Don't forget to load the module slhc.o before isdn.o, if VJ compression is
   not compiled into the kernel (e.g. if you have no PPP and no CSLIP in the
   kernel. [Note that the use of VJ is problematic and does not work reliably
   - however, the support should still be included in the kernel, since there
   can otherwise be side effects.]

!old
Q: How does use isdn4linux with syncPPP?
A: Synchronous PPP is simply another encapsulation for ISDN4Linux.
   This encapsulation is called "syncppp", therefore for example:
!verbon
     /sbin/isdnctrl encap ippp0 syncppp
!verboff
   Here the name of the interfcae is "ippp0". An interface with this name
   is always used to keep ipppd happy, since it checks the PPP version through
   this device. For now, all devices have to have the name ippp*, where "*" is
   a decimal digit.

Q: Wie soll ich mein Netzinterface benennen?
A: Der Name des Netzinterfaces sollte !u1immer!u0 mit "ippp" anfangen,
   !u1nicht!u0 mit "syncppp" oder "isdn", da sonst die Kommunikation mit
   dem ipppd nicht recht funktioniert.

!old
Q: How do I configure a PPP connection with ipppd?
A: You have to start ipppd once after the modules are installed. ipppd
   communicates with the isdn4linux link level devices through /dev/ippp0 to
   /dev/ippp63. A single ipppd can handle all devices at once. If you want two
   PPP connections at the same time, you need to bind ipppd to two devices,
   etc. ipppd has an additional option: "useifip" uses the IP address of the
   connected network interface (if it is not 0.0.0.0). (Even then, ipppd tries
   to use the pointopoint address as the remote IP.) BSD compression hads to
   be turned off - this version cannot use it. [Comment: Van Jacobson
   compression also has to be turned off, in all cases!] 
   In the file etc/rc.isdn.syncppp in the isdn4kernel-util package,
   you can find an example configuration.

Q: Wie bringt man den ipppd dazu, eine PPP-Verbindung aufzubauen?
A: Mit dem Befehl "isdnctrl dial <interface>".

Q: Wie stelle ich fest, ob die Verbindung nicht zustande kam (Besetzt)?
A: Andreas Berg <berg@studm.hrz.uni-siegen.de> schrieb dazu am 24. Nov 1996:!br
   Ich gucke einfach nach ein paar Sekunden nach, ob die defaultroute da ist,
   wenn ja, dann steht auch die Verbindung.

Q: Wo gibt es jeweils die neueste Version des ipppd?
A: Die gibt es auf Michael Hipp's Homepage:!br
     !link http://www.sfs.nphil.uni-tuebingen.de/~hipp/isdn/linux/;

!old
Q: Wie kann ich mehr als ein ippp*-Device verwenden?
A: Alle verwendeten ippp*-Devices müssen per "isdnctrl addif" etc. separat
   konfiguriert werden. Jedes ippp*-Device sollte dabei eine andere IP-Adresse
   verwenden (Routing!).!br
   Es können durchaus mehrere ippp*-Devices auf dieselbe (eigene) MSN
   konfiguriert werden. Dann können mehrere Anrufer parallel auf dieser MSN
   anrufen und bedient werden.


!old
Q: I want to talk to remote machines which needs different configurations. The 
   only way I found to do this is to kill the ipppd and start a new one with 
   another config to connect to the second machine.    
A: You must bind a network interface explicitly to an ippp device, where you 
   can connect a (for this interface) individually configured ipppd. With the 
   (unfortunately poorly documented) command!br
   "isdnctrl pppbind <interface> <Number>"!br
   you can link the interface <interface> to the device ippp<Nummer>. You can 
   release the link with "pppunbind". 
   

Q: Wie funktioniert der (kaum dokumentierte) "pppbind"-Befehl von isdnctrl?
A: Dazu muß man zunächst wissen, wie der ipppd seine Daten bekommt. Alle
   Daten, die über die ISDN-Leitung hereinkommen, werden von den Netzinterfaces
   empfangen (diese werden mit isdnctrl eingerichtet). Anschließend werden die
   Daten auf eines der /dev/ippp*-Devices ausgegeben - und zwar auf eines, an
   dem ein ipppd-Daemon auf Daten wartet.!br
   Den Netzinterfaces erscheinen alle ipppd's gleich geeignet für die gerade
   empfangenen Daten - man kann deshalb normalerweise nicht vorhersagen,
   welcher ipppd nun von welchem Netzinterface seine Daten bekommt.!br
   In der Praxis installiert man jedoch gerne mehrere ipppd's mit
   unterschiedlicher Konfiguration. Diese sollen ihre Daten jeweils
   !u1exklusiv!u0 von einem bestimmten Netzinterface bekommen (das auch
   speziell konfiguriert wurde). Genau dazu dient nun der "pppbind"-Befehl.
   Mit:
!verbon
        "isdnctrl pppbind <interface> <Nummer>"
!verboff
   wird das Interface <interface> fest mit dem Device /dev/ippp<Nummer>
   verknüpft.!br
   Beispiel: Um das Interface "ippp5" mit /dev/ippp2 zu verknüpfen, muß
   folgende Konfiguration vorgenommen werden:
!verbon
        "isdnctrl pppbind ippp5 2"
!verboff
   Analog kann man mit dem "pppunbind"-Befehl diese Verknüpfung wieder
   aufheben.!br

!old
Q: I want to use dynamic IP address assignment. How must I configure the 
   network device?
A: At least you must have a route, which forwards a packet to the ippp 
   network interface to trigger dialing. A default route to the ippp interface 
   will work. Now you must choose a dummy IP address for your interface. If for
   some reason you can't set the default route to the ippp interface, you may 
   take any address of the subnet from which you expect your dynamic IP number 
   and set a 'network route' for this subnet to the ippp interface. To allow 
   overriding of the dummy address you must call the ipppd with the 
   'ipcp-accept-local' option. You must know how the ipppd gets the addresses 
   it has to configure. If you don't give any option, the ipppd tries to
   negotiate the local host address!  With the option 'noipdefault' it 
   requests an address from the remote machine. With 'useifip' it gets the 
   addresses from the net interface. You also can set the addresses in the 
   option line with the <a.b.c.d:e.f.g.h> option. Note: the IP address of the 
   remote machine must be configured locally, or the remote machine must send 
   it in an IPCP request. If your side doesn't know the IP address after 
   negotiation, it closes the connection! You must allow overriding of 
   addresses with the 'ipcp-accept-*' options, if you have set your own or the 
   remote address explicitly. Try these options, e.g:
!verbon
    /sbin/ipppd :$REMOTE noipdefault /dev/ippp0
!verboff
   where REMOTE must be the address of the remote machine (the machine giving 
   your address to you) 
   
Q: Laut Man-Page bietet der ipppd die Option "dns-addr". Leider lehnt mein
   ipppd diese Option strikt ab!
A: Andreas Kool <akool@Kool.f.EUnet.de> schrieb hierzu am 31. Dez 1996:!br
   Du musst im Makefile des ipppd "USE_MS_DNS" einschalten!

Q: Wie kann ich IPX über den ipppd machen?
A: Michael Hipp <Michael.Hipp@student.uni-tuebingen.de> schrieb dazu am
   4. Feb 1997:!br
   So... die Frage kommt ja in letzter Zeit häufiger auf. Ich empfehle
   auf alle Faelle mal den ipppd 2.2.6g (ftp.gwdg.de pub/linux/isdn/ippp/)
   Dann im Makefile: 'IPX_CHANGE = 1' "einkommentieren"...!br
   Das reicht aber noch nicht aus. Man muß beim Aufruf des ipppd auf
   alle Faelle "+ipx" angeben, sonst wird IPX (im ipppd) nicht aktiviert.
   Ansonsten muß man natürlich noch "richtige" IPX Optionen mitübergeben.
   K.A. welche das im Einzelfall sind. IPX habe ich noch nie gemacht. ;)
   Wenn man dann mehrere IPXCP Debug-Meldungen im Log sieht und nichts
   geht würde mich selbiger Debug-Log interessieren. (Sofern man den
   Fehler nicht selber analysieren kann). Erfolgsmeldungen sind natürlich
   auch willkommen. (bei ungetesteter Software aber höchst unwahrscheinlich) ;)

!old
Q: How can I reduce login delay?
A: Man schreibe eine Login-Session mit ("Debug-Log"), und sehe nach, welche
   Optionen der Fremdrechner zurückweist. Beim nächsten Mal ist der ipppd
   so zu konfigurieren, daß die Optionen nicht mehr verhandelt werden. 
   Ein weiterer "Seiteneffekt" ist, daß solche unnützen Optionen die
   Redundanz erhöhen (z.B. wenn der Fremdrechner Bugs aufweist und die
   Optionen auf falsche Weise zurückweist).
   Zur Erstellung eines Log-Files siehe "Wie stelle ich mir für ipppd ein 
   Log her".!br
   Einen zusätzlicher Tip kam von G.Richter <richter@ecos.de> am 12. Dez 1996:!br
   Die Aushandlungphase mit einem CISCO, wie auch mit einem AVM MPR habe ich
   drastisch beschleunigt durch die Option
!verbon
        lcp-restart 1
!verboff
   Der ipppd sendet anscheined das erste LCP Paket bevor es die Gegenstelle
   erreichen kann und wartet dann 3 sec bis er es noch mal versucht, mit der
   Option wartet er nur eine Sekunde. Danach sankt der Verbindungsaufbau bei
   mir von 5 auf 2 Sekunden.

Q: Wie kann ich meinen Durchsatz mit PPP erhöhen?
A: Mit MPPP weitere Kanäle aufbauen (siehe den entsprechenden Abschnitt dazu).
   Für alle, denen das zu teuer ist, und die !u1asyncPPP!u0 verwenden gibt es
   noch einen kleinen Trick. Mit der Option "asyncmap 0" gibt man an, daß man
   darauf verzichten möchte, alle Steuerzeichen (ASCII<32) zu "escapen" (das
   ist der Defaultwert ist). Wenn die Gegenstelle mitspielt, kann das etwa 12%
   mehr Durchsatz bringen.


!3ISDN4Linux in a network


Q: Ich möchte mit meinem Linux-System via ISDN4Linux ins Internet. Das klappt
   auch. Nun möchte ich noch zusätzlich meine Rechner am Ethernetstrang mit
   vom Internet profitieren lassen, aber wie?
A: Thomas Pfeiffer <pfeiffer@pds.de> schrieb dazu folgendes am 5. Nov 1996:!br
   Es gibt verschiedene Möglichkeiten, je nachdem, was du denn so alles aus
   deinem LAN heraus im Internet machen möchtest. Grundsätzlich gibt es drei
   Möglichkeiten:
!verbon
        1. dein LAN ist ein offizielles Class C Netz mit im Internet gültigen
           IP adressen.
             Der Fall ist am einfachsten zu konfigurieren, du gibst jeder
             Netzwerkkarte in dem Netz eine dieser IP adressen und legst eine
             Default Route auf deine ISDN Karte, die ins Internet zu deinem
             Provider führt.
        2. Du möchtest aus deinem LAN heraus nur http ins Internet machen.
             In dem fall kannst du dir für dein LAN IP adressen ausdenken,
             die einzige offizielle IP Adresse ist die, die der ISDN Karte
             zugewiesen wird. auf deinem linux isdn router mußt du einen
             Proxy Server installieren, der bei deinen Browsern auch
             eingetragen wird. Du brauchst in dem Fall keine Default Routen.
        3. Du möchtest dich immer nur aus dem LAN auf deinem Linux ISDN
           Router einloggen und VON DORT deine Arbeit im Internet verrichten. 
             Das ist noch einfacher, denn dann mußt du nicht einmal einen
             Proxy Server.
!verboff
   Eike Stepper <isdn@esc-net.de> ergänzt am 6. Nov 1996:
!verbon
        Den drei Möglichkeiten würde ich noch eine vierte hinzufügen. Selber
        hab ich es zwar noch nicht ausprobiert (da ich die erwähnte 1.
        Möglichkeit bevorzuge und ein Class-C-Subnetz habe, hehe ;) aber ich
        weiß von einem Freund, daß er nach einigem Tüfteln am Linux-Kernel
        dann tatsächlich das IP-Masquerading hinbekommen hat.!br
        Das funzt irgendwie soähnlich wie ein proxy (wenn man den
        ip-versteck-effekt betrachtet). Bietet natürlich kein Caching,
        maskeriert aber nach aussen hin alle internen Klau-IPs ;) mit der
        einen offiziellen des ISDN-Interface. Frag mich nicht, wie da
        irgendein Routing hinhaut, aber es geht...!br
        Wenn ich mich nicht irre, hat mein Freund sogar mit einer dynamischen
        IP maskeriert ?!
!verboff

Q: Wie funktioniert denn nun die vierte Möglichkeit, Linux + Masquerading?
A: Rainer May <r_may@khavi.desaster.heide.de> hat hierzu eine tolle Anleitung
   zusammengestellt (siehe nachfolgende Frage).

!commenton
Die nachfolgende Anleitung wurde von Rainer May
<r_may@khavi.desaster.heide.de> zusammengestellt.
!commentoff
!old
Q: I have a local area network, (LAN) with computers based on several
   platforms - Win95, Win311, NT, Amiga (AmiTCP) and MacIntosh (MacTCP) - all
   connected to the outside world through a Linux router. The Linux machine has
   an ISDN card. My ISP provides me with a dynamic IP-address each time I log
   in. I want all the computers to reach the INTERNET not just the Linux box.
   How can I do this?

A: Most work has to be done on the Linux box. First you need a kernel with
   IP-forwarding and masquarding enable. You can get on by answering the 
   following questions when doing "make config" with YES.
!verbon
     Prompt for development and/or incomplete code/drivers  Y
     Enable loadable module support                         Y
     Networking support                                     Y
     Network firewalls                                      Y
     TCP/IP networking                                      Y
     IP: forwarding/gatewaying                              Y
     IP: firewalling                                        Y
     IP: masquerading                                       Y
     PPP (point-to-point) support (if you  PPP to the  ISP) Y
     SLIP (serial line) support                             Y
     Ethernet (10 or 100Mbit) (or Arcnet or ...)            Y
     ISDN support [1]                                       M
     Support synchronous PPP (if you're using ipppd)        Y
     HiSax SiemensChipSet driver support                    M
       (Then select the HiSax support)
     (You can also choose to make a kernel with build in ISDN support
     instead of modules)
!verboff

   Then do a "make dep", "make zImage", "make modules" and "make 
   modules_install" to build the kernel. The installation of ISDN and PPP is 
   explained somewhere else in this FAQ. We now continue with the following 
   assumptions:!br
   * The ISDN system is operational; you can build a connection to your ISP.!br
   * The LAN is operational (i.e. ethernet or Arcnet or) and IP addresses
     have been assigned (i.e. 192.168.xx.xx). The Linux box can be reached by 
     the other computers (i.e. by ping).!br
   Now we need to accomplish two things:!br
   * A computer in the LAN with a "non-local" IP address will request the
     Linux router to establish a connection to the provider!br
   * The Linux router itself will connect the computers in the LAN to the
     provider. It will also "hide" the computers in the LAN from the ISP, and
     all the IP packets will appear to come from or go to the router. While in
     fact the are coming from the computers in the LAN.!br
   !br
   We'll start with the second one: This hiding doesn't mean we're trying
   to cheat our provider. (Allthough it is possible to provide "clients" with 
   a cheap connection to the internet). It is required technically. Only the
   IP address of the Linux-box is known to the provider. So the Linux-box must
   "mask" all the packet with it's own IP address and keep track of which
   computer in the LAN sent which packet so the it can return the
   incoming packets to the correct computer in the LAN. Luckily this
   function is built in kernels>=2.0.0 and is called "IP-Masquarading". Here's 
   how it works:!br 
   !br
   A computer on the LAN sends a packet that contains (next to the IP-address 
   and target port of the receiver) it's own sender-address (in IP form) and 
   an answering port. The masquerading Linux router will replace this address
   with it's own and the answering port with a free one. Under this free port
   the sender address is stored. Now when a packet comes in from the internet
   the receiver address and  port gets overwritten with the return address and
   port and the packet is send to the correct computer in the LAN. Packet for
   packet. This only works if the application sends along a return address,
   telnet, http, (irc, tcp differently) all do this (ping doesn't work).!br
   !br
   To get TCP and IRC to work while masquerading 2 modules need to be loaded:
!verbon
     /sbin/modprobe ip_masq_ftp
     /sbin/modprobe ip_masq_irc
!verboff
   Then the forwarding rules in the kernel add forced to masquerade:
!verbon
     /sbin/ipfwadm -F -a m -P all -S 192.168.123.0/24 -D 0.0.0.0/0 -b
!verboff
   The ipfwadm program is available via anonymous FTP at!br
     !link ftp://ftp.xos.nl/pub/linux/ipfwadm/ipfwadm-2.3.0.tar.gz;!br
   In this example the LAN addresses 192.168.123.0 to 192.168.123.254 are
   used. To keep things simple we make the Linux router 192.168.123.1!br
   The above line masquarades all the packets coming from 192.168.123.x to
   the outside world. This has a disadvantage: all the packets inside the
   LAN also get masqueraded. You can prevent this by adding more rules
   (man ipfwadm is recommended reading if you want to do this).!br
   !br
   Hint from Ralf Rudolph <ralf@artifex.de>:
!verbon
    The way I see it, that doesn't matter, the computers in the LAN will
    continue to communicate over the fake IP addresses. You can test this by
    turning off your Linux box (shutdown). Nothing will happen. This is because
    masquarading is a forwarding rule in the firewall and will only be used 
    when forwarding (literally "passing on"). On the LAN nothing is forwarded 
    so nothing is masqueraded, unless you have multiple Ethernet cards in one
    computer then you need to enter some extra firewall rules.
!verboff
    Answer: This is actually not entirely true; although it does no harm. We
    have accomplished "hidding" the LAN from the provider. We now want the
    Linux box to automatically connect to the outside world whenever a computer
    in the LAN requests it. All the computers within must address their
    packets for the outside world to the Linux box, which will take it from
    there. This is very easy. Most TCP protocols (for Windows, Mac) all have 
    the option of specifying a "default gateway" or "gateway". You must specify
    the local address of the router. You cannot enter the IP address which you
    receive when you connect to your provider because you don't know which 
    address your going to get, and also it's different everytime you log in.!br
    The last step is getting the ISDN system to do "Dial on Demand". This is
    can be done in two ways.!br
  * Use synchronous PPP, in other words "ipppd". The only thing you have to do
    is to make sure that the default route point to the device (ippp*) you 
    made with isdnctrl. Warning: the kernel remove this route when the
    connection is broken. You have to re-establish the defaultroute after the
    line goes down. You can do this (for example) in the file /etc/ppp/ip-down.
    The risk of this methode is that applications running on the LAN will make
    the Linux box build a connection for each resolve-request, keep-alive
    packet or ARP broadcast they send (your phone company will be very 
    grateful).!br
    It can happen that requests by the LAN can take a long time. I don't know
    whether the kernel or ipppd can't handle the first outgoing packets, but
    it's always a good idea to push the red button in Netscape for example and
    then reload the first page you're accessing right after starting up
    Netscape.!br
    The configuration of ipppd is explained in detail elsewhere:!br
       !link http://www.lrz-muenchen.de/~ui161ab/www/isdn/;!br
    * Use a-synchronous PPP or SLIP/CSLIP for your connection. For this you
    can use a programme called "diald" [4]. This has several advantages, it's
    highly configurable; you can for instance specify that there are to be no
    connections made between 9 and 12 a.m. or that name server request don't
    trigger the ISDN device. For those of you that don't want to bother with a
    lot of configuration options that's fine; the default-configuration can be
    used without danger for life or money (hard to translate, German
    expression).!br    
    Now,!br 
    if the masquerading rules are set,!br
    if the PC in the LAN all know that the Linux box is the gateway,!br
    if "ping abc.edu" typed in on the Linux console builds up a connection
    to the Internet provider!br
    !u1then!u0 also all other machines in the LAN should be able to access the
    Internet.

Q: Wie kann ich den Teilnehmern meines lokalen Netzes mit Linux-Host
   ermöglichen, die ISDN Karte(n) im Linux PC mitzunutzen?
A: Rainer May <r_may@khavi.desaster.heide.de> schrieb dazu am 10. Dez 1996:!br
   öh ... "modemd" auf Linux-Seite, zusammen mit der entsprechenden
   Software z.B. fuer W95 (emuliert halt auf einer telnet-Verbindung
   einen Comport) macht sowas doch recht schön...

Q: Wo gibt's den "modemd", und für welche Plattformen gibt es "Clients"?
A: Rainer May <r_may@khavi.desaster.heide.de> schrieb dazu am 10. Dez 1996:!br
   Theoretisch (und praktisch auch) tut es jeder etwas komfortablere
   telnet-Client, den man dann wie ein Terminalprogramm benutzen kann.
   Auch uucicos sollte es dafür geben (unter DOS fxuucico in Verbindung
   mit fxwtcp, zum Bleistift).!br
   Will man generell für beliebige Anwendungen eine Art "remote COMport"
   haben, gibt es (wie erwähnt) COMT für Windows (95), für Amigas
   das "telser.device". Für Mac soll es auch Entsprechendes geben
   (die Systemarchitektur des MacIntosh lädt ja auch dazu ein), Namen
   kenne ich allerdings nicht.!br
   modemd (eigentlich nur ein PERL-Einzeiler, wenn ich mich recht entsinne)
   arbeitet hier jedenfalls problemlos mit COMt und telser.device
   zusammen.

Q: Wo finde ich COMt?
A: Oliver Hahn <oliver@bbtt.de> schrieb dazu am 15. Dez 1996:!br
   Versuch's mal auf einem Simtel-Mirror (z.B. ftp.funet.fi) im Verzeichnis
   pub/simtelnet/win3/inet. Das Ding heißt comt200.zip.
     !link ftp://ftp.funet.fi/pub/simtelnet/win3/inet/comt200.zip;

Q: Wie sieht der "PERL-Einzeiler" "modemd" nun genau aus?
A: Marc Neitzner <marc@zeus.han.de> schrieb dazu am 15. Dez 1996:
!verbon
        #!/usr/bin/perl
        select((select(STDOUT), $| = 1)[$[]);
        select((select(STDIN), $| = 1)[$[]);
        exec "cu","-E","''", "-l", "$ARGV[0]";
       die "$0: Cant exec cu: $!\n";
!verboff
   Und dann muss das Ding per inetd gestartet werden:
!verbon
        modem           20006/tcp       modemd  # Modem service via TCP
        isdn            20007/tcp       modemd  # ISDN  service via TCP
!verboff
   Nachteil: comt-2.0 ist nur für 16Bit Anwendungen "sichtbar". Der
   Einsatz unter win95 und Windows NT bleibt also auch dort auf 16Bit Kram
   beschränkt!



!3Isdnlog

!old
Q: isdnlog doesn't always show the High Layer Compatibility (Speech, Video,...)
   as I'd like it to. 
A: Gernot Zander <hifi@scorpio.in-berlin.de> posted a patch on 6.10.1996
   to the mailing list that adjusts isdnlog

Q: Kann man in der Ausgabe von isdnrep die Dienstekennung eines eingehenden
   Anrufes sehen?
A: Andreas Kool <akool@Kool.f.EUnet.de> schrieb hierzu am 3. Dez 1996:!br
   Im isdnrep indirekt schon -- sofern du alle von isdnlog ausdekodierten
   Dienstkennungen in deiner "isdnlog.conf" als Alias eingetragen hast ...

Q: Warum erfaßt isdnlog neben den Gebühren nicht auch die Telefonnummer, die
   meine anderen ISDN-Geräte (z.B. ISDN-Telefon) anrufen?
A: Weil die ISDN-Karte wie alle ISDN-Geräte getrennte Sende- und
   Empfangsleitungen (RX bzw. TX Leitung) hat. Isdnlog müßte die auf der
   Sendeleitung übermittelten Daten belauschen, um die Telefonnummer zu
   erfahren. Zumindestens bei der Teleskarte ist das jedoch nicht möglich, wie
   Karsten Keil <keil@temic-ech.spacenet.de> am 12. Feb 1997 schrieb:
!verbon
       Das ist bei allen Karten mit 1 Siemens ISAC so, der hat (und braucht)
       nur 1 Empfaenger und 1 Sender.
       Theoretisch besteht eine Moeglichkeit, mit nur einem Empfaenger den
       kompletten D-Kanal zu belauschen (das macht der ISAC sogar) und zwar
       werden die auf der RX Leitung empfangenden D-Bits auf sogenannte Echo
       Bits zeitversetzt auf die TX Leitung kopiert, darueber erfolgt die
       Access Kontrolle (Kollisionserkennung) des S0 Busses.
       Leider gibt es im ISAC im TA Mode keine Moeglichkeit die ECHO Bits aus
       einem Register zu lesen.
!verboff
   Zu möglichen Lösungen siehe nächste Frage.

Q: Wie kann ich trotzdem isdnlog dazu bringen, die Telefonnummer auch von
   anderen ISDN-Geräten mitzubekommen?
A: Es gibt zwei Möglichkeiten. Zum einen gibt es von der Deutschen Telekom die
   kostenpflichtige Möglichkeit, alle Daten nochmal zurückschicken zu lassen
   (COLP = Connected Line Identification Presentation, ca. DM 10,- pro Monat
   je Basisanschluß). Diese kann isdnlog (>=2.52) dann wieder auf der TX
   Leitung lesen.!br
   Alternativ dazu wird isdnlog ab der nächsten Version (aktuell ist 2.52)
   die Möglichkeit bieten, mit einer zweiten, "verpolten" Teles-Karte zu
   arbeiten, bei der die RX Leitung an den TX Anschluß der Karte geführt wird.
   Die RX Leitung der Karte darf an keine der Leitungen angeschlossen werden!
   Aufgrund der Schaltung kann die Teles-Karte für keinen anderen Zweck mehr
   eingesetzt werden. Das ganze sieht dann so aus:
!verbon
 B  3 -- RX+ 2a ---------------\
 U  4 -- TX+ 1a -- offen        ------------
 S  5 -- TX- 1b -- offen        ------------  Karte
    6 -- RX- 2b ---------------/ 
!verboff
   Eine theoretische dritte Möglichkeit gibt es noch für alle, die eine
   eigene TK-Anlage haben, über die sämtliche weiteren Geräte angeschlossen
   sind. Falls diese Telefonanlage ebenfalls alle ausgehenden Telefonnummern
   protokollieren kann, könnten diese ausgelesen werden (üblicherweise über
   eine serielle Schnittstelle).!br
   Es gibt jedoch einen Grund, warum isdnlog das nicht schon längst
   unterstützt. Um die Daten zu verwerten, müßte isdnlog diese sofort beim
   RELEASE COMPLETE zur Verfügung gestellt bekommen, bevor auf dem D-Kanal
   neue Informationen übermittelt werden. Leider sind die bisher getesteten
   Telefonanlagen dafür zu langsam (insbesondere die weit verbreitete ISTEC). 
   Als einzige Möglichkeit bleibt, die Daten nachträglich zu kombinieren.
   Dabei kommt es aber zur Schwierigkeit, die unterschiedlichen Uhrzeiten
   zu synchronisieren. Wer das realisieren möchte, ist dazu herzlich gerne
   eingeladen (ich stelle auch gerne entsprechende Logs von meiner Ackermann
   Euracom zur Verfügung - Matthias Heßler <hessler@wi-inf.uni-essen.de>).

Q: Erfaßt isdnlog auch die neuen Tarife der deutschen Telekom (City Weekend,
   City Plus)?
A: Da die Vermittlungsstellen der Telekom das nicht hinbekommen, werden die
   Gebühreninformationen nicht korrekt übermittelt. Die nächste Version von
   isdnlog (>2.52) wird das jedoch können.

Q: Wie kann ich isdnlog dazu bringen, die Gebühren nach den Regeln der
   niederländischen Telefongesellschaft zu berechnen?
A: Dazu muß nur im Makefile von isdnlog "COPTS=-DISDN_NL" gesetzt und isdnlog
   neu kompiliert werden.

Q: Wie kann ich isdnlog dazu bringen, die Gebühren nach den Regeln der
   schweizer Telefongesellschaft zu berechnen?
A: Dazu muß nur im Makefile von isdnlog "COPTS=-DISDN_CH" gesetzt und isdnlog
   neu kompiliert werden.

Q: Wie kann ich mir den Datendurchsatz grafisch anzeigen lassen?
A: Dazu gibt's "xisdnload". Clemens Perz <listperz@gwsnet.ttt.de> wußte am
   6. Feb 1997 noch eine weitere Möglichkeit:!br
   Ich hab auf der Sunsite ein kleines Tool Namens netload für die Console
   gefunden und es auf ISDN-Interfaces angepasst. Damit kann man recht
   einfach den momentanen Traffic auf der Leitung in Augenschein nehmen.
   Zu finden auf:!br
   !link
   ftp://ftp.region.trier.de/pub/unix/linux/sources/network/isdn/netload-0.92.isdn.tar.gz;!br
   Einfach starten mit netload isdnxx



!3Isdnbutton
Q: Welche Skripte sollte ich nutzen, um isdnbutton herunterzufahren?
A: Markus Gutschke <gutschk@uni-muenster.de> (der Autor) schrieb dazu
   am 21. Dez 1996:!br
   Ich benutze hier so etwas wie:
!verbon
        #!/bin/bash
        #ISDNBUTTON: Disconnect ISDN
        /sbin/isdnctrl list isdn0 | grep Outgoing | grep -q 0251XYZ &&
             /sbin/isdnctrl delphone isdn0 out 0251XYZ
        /sbin/isdnctrl hangup isdn0
        exit 0
!verboff
   [An die Zeile, die mit "&&" endet, muß noch die nachfolgende angehängt
   werden!]!br
   und
!verbon
        #!/bin/bash
        #ISDNBUTTON: Connect ISDN
        /sbin/isdnctrl list isdn0 | grep Outgoing | grep -q 0251925020 ||
             /sbin/isdnctrl addphone isdn0 out 0251925020
        exit 0
!verboff
   [An die Zeile, die mit "||" endet, muß noch die nachfolgende angehängt
   werden!]

Q: Was bedeuten die einzelnen Zustände von isdnbutton (grün, gelb, rot)?
A: Markus Gutschke <gutschk@uni-muenster.de> schrieb dazu am 21. Dez 1996:!br
   "isdnbutton" überprüft folgende Zustaende:
!verbon
        GRÜN - mindestens eine ISDN Verbindung ist zur Zeit aktiv. Leider
                kann ich nicht überprüfen, womit diese Verbindung aktiv
                ist (siehe andere Mail in die Liste). Es muß sich also
                nicht unbedingt um eine Netzwerkverbindung handeln und es
                werden auch eingehende Verbindungen angezeigt (was ich in
                meinem Fall aber auch ganz gut brauchen kann).
        GELB  - keine aktive ISDN Verbindung wurde entdeckt, aber
                mindestens eines der ISDN Interfaces hat eine ausgehende
                Telephonnummer fuer Demand-Dialing. Es besteht also die
                "Gefahr", dass automatisch eine Verbindung aufgebaut
                werden kann.
        ROT   - Keine der oben genannten Punkte trifft zu. In der Regel
                bedeutet das, daß
                a) der Kernel gar kein ISDN kennt, oder das ISDN
                   Subsystem nicht aktiv ist, oder
                b) ISDN Auswahlverbindungen deaktiviert sind.
!verboff


!3Audio
           

!commenton
(Most of the answers you will find here are taken from the vbox manual by
Matthias Hessler <hessler@wi-inf.uni-essen.de> and
Bernhard Hailer <dl4mhk@lrz.uni-muenchen.de>; you can get the manual at:!br
!link http://www.lrz-muenchen.de/~ui161ab/www/isdn/;!br
 - click on "Audio!" (still in German we're afraid - sorry...)
!commentoff

!old
Q: What is the format of the audio-messages (.msg) vbox plays when it
   answers a call?
A: You can get the format from the messages with rmdgetheader. The samples
   messages in the packages are recorded using format 4 (the latest
   Zyxel-Compression)

!old
Q: How can I record my own messages for vboxgetty?
A: First call yourself on the number you configured vboxgetty to answer and
   leave a message. Then rename the message to *.msg (standard.msg for the
   main answering message) and copy it to the directory where all the
   messages are kept (usually /var/spool/vbox/user/messages where user is
   the user for which vboxgetty is configured).
   You can also record a message using a microphone and the soundcard.

!old
Q: How can I play audio-messages locally using /dev/audio?
A: This is best achieved with vbox using format 6 (uLaw - must be compiled
   in). You can then easily play the messages using:
!verbon
   cat xxx > /dev/audio
!verboff
   where xxx is the message-file.

!old
Q: If vboxgetty has recorded a message in a format which can not be played
   using "cat xxx>/dev/audio" how can I still hear the message?
A: Siehe dazu die gleiche Frage im Abschnitt "Audio" im Kapitel
   "Troubleshooting".

!old
Q: How can I convert audio messages which where recorded by vbox to other
   formats (i.e. from uLaw to WAV)?
A: The standard tool for converting all sound formats is SOX. SOX is
   available as source-code for both UNIX and DOS. You can get it at:!br
   !link http://www.powerweb.de/mpeg/util/msdos/sox10c.zip;!br 
   (including sources that compile under Linux).

Q: Wie kann ich WAV nach ulaw formatieren (für meine vbox-Ansagetexte)?
A: Dazu gab uns gab Christian Stueble <stueble@ls6.informatik.uni-dortmund.de>
   am 15 Jan 1997 folgenden Tip:!br
   Bei mir funktioniert folgende (wenn auch etwas umstaendliche) Methode:
!verbon
       sox <file>.wav -r 8000 <file>.ul rate
       rmdcatheader -u <file.ul> > <file>.msg
       cat <file>.ul >> <file>.msg
!verboff
   Kann sein, dass man bei sox etwas andere Parameter angeben muß.
   Als ersten Test kann man cat <file>.msg > /dev/audio probieren,
   da müßte etwas zu hören sein.

!3Diald

!old
Q: Wie kann ich i4l mit dem diald kombinieren?
A: Wim Bonis <bonis@kiss.de> schrieb:!br
   Die Patches für daild sind hier zu finden:!br
     !link ftp://ftp.kiss.de/pub/linux/isdn4linux/diald-0.13-device-patch;!br
   Sie laufen auch mit dem diald-0.14. Wenn's einen neueren Diald gibt,
   passe ich es gerne an...

!old
Q:  Are there any example scripts for diald?
A:  Yes, by Rainer May <r_may@khavi.desaster.heide.de>:
!verbon
    At boot "diald" is configured:
     # /etc/rc.d/rc.diald
       /usr/sbin/diald /dev/ttyI4 -m ppp \
       local 192.168.90.9 remote 192.168.90.1 \
       defaultroute dynamic modem crtscts lock connect "chat -v -f \
       
    In /etc/ppp/chat.provider the following entry is made:
    TIMEOUT 240 "" AT&E1234 OK ATD047110815 ogin: Puser sword: topsecret
    (phone number, name and password are fictional)
!verboff

!3Chargeint

[Achtung! Nur in älteren Konfigurationen muß der Chargeint-Patch ins Kernel
gepatcht werden. Ab Kernel 2.0.30 bzw. HiSax 2.0 ist der Chargeint-Patch
automatisch im Kernel integriert - die Red.]

!old
Q: Wie kann die ich den "chargeint"-Patch verwenden, damit i4l rechtzeitig
   vor der nächsten Gebühreneinheit auflegt?
A: Sascha Ottolski <sascha@alzhimer.isdn.cs.tu-berlin.de> schrieb: 
!verbon
        Ich benutze den chargeint, das klappt hervorragend; Gebühren kommen
        bei mir während der Verbindung, aber ich glaube, man kann das auch per
        Hand justieren. Du mußt mit den beiden in
        isdnlog-2.50/contrib/chargeint zum einen die Kernel-Sourcen, zum
        anderen die isdn4k-utils-2.0 patchen; dann den isdnlog mit dem Flag
        -Dchargeint compilieren (siehe Makefile). Kernel und isdnctrl
        natürlich auch neu kompilieren.
        Dann den isdnlog mit der option -hx starten, wobei x die Anzahl der
        Sekunden ist, die noch zum Gebührenimpuls fehlen. Da legt der chargeint
        dann auf. Im start-script für isdn wie gewohnt einen huptimeout
        definieren, zusätzlich den chargeint scharf machen:
        /sbin/isdnctrl huptimeout ippp0 80  # in sec;
        nach Bedarf /sbin/isdnctrl chargeint ippp0
!verboff
   Olav Brinkmann <olav@max.north.de> schrieb: 
!verbon
        Der chargeint legt immer zwei Sekunden vor dem Ende der
        Gebühreneinheit auf. Der isdnlog setzt, wenn er mit -Dchargeint
        compiliert wurde, mit "-h" die Dauer der Einheit (i.e. Charge
        Interval) abhängig von der Tageszeit und des Datums. Ein zusätzlicher
        Parameter für "-h" verkürzt diese Dauer um den angegeben Wert.
        Letzteres darf man bei Verwendung des chargeint aber nicht verwenden,
        da sonst der chargeint die Verbindung zu früh beendet. Der Fehler
        vergrößert sich mit der Anzahl der Gebührentakte. Also: "-h0" angeben,
        um das Problem zu vermeiden.
          > /sbin/isdnctrl huptimeout ippp0 80  # in sec;
        In diesem Anwendungsfall ruhig kürzer, ich habe 5 Sekunden angegeben.
        Dann kann ich die letzte Einheit bis auf 7 Sekunden (huptimeout + 2
        Sekunden "chargeint-reserve") ausnutzen.
          > /sbin/isdnctrl chargeint ippp0
        Nicht nötig, wird von isdnlog mit "-h" erledigt.
!verboff

Q: Für welche Treiber kann ich den Chargeint-Patch verwenden?
A: Sowohl der Teles-, als auch der HiSax-Treiber können verwendet werden.
   Natürlich muß auch isdnlog einwandfrei laufen (isdnlog 2.50 muß auf 2.51
   gepatcht werden, um mit dem HiSax-Treiber zu laufen).

Q: Wann es unsinnig, den Chargeint-Patch zu verwenden?
A: Es gibt vor allem dann Schwierigkeiten, wenn die IP dynamisch zugewiesen
   wird. Denn eine einmal unterbrochene Verbindung kann nicht wieder
   aufgenommen werden (die IP-Adresse hat sich ja geändert). Die unterbrochene
   FTP-, Telnet- oder WWW-Verbindung muß dann komplett neu aufgebaut werden.

!old
Q: Wie funktioniert der Chargeint-Patch?
A: isdnctrl kann man mit dem Parameter "chargeint" mitteilen, wieviele
   Sekunden eine Gebühreneinheit dauert, damit rechtzeitig aufgelegt werden 
   kann. Da die Länge der Gebühreneinheit von Uhrzeit, Wochentag, Feiertag
   etc. abhängt, macht ein fester Parameter keinen Sinn.
   Hier springt isdnlog ein. Es stellt fest, ab wann eine Verbindung
   steht und rechnet abhängig von Uhrzeit, Wochentag, Feiertag aus, wie
   lange eine Gebührenimpuls dauert. Diese Zeit teilt es isdnctrl mit,
   damit dieses genau rechtzeitig auflegen kann. Isdnlog "justiert"
   isdnctrl damit bei jedem Connect und auch während einer Verbindung
   (wenn isdnlog mit dem Parameter "-w x" gestartet wurde).
   isdnlog veranlaßt isdnctrl, genau 2 Sekunden vor dem Start der
   nächsten Gebühreneinheit aufzulegen, solange mindestens die isdnctrl
   mit dem Parameter "huptimeout" angegebenene Zeit verstrichen ist, ohne
   daß Daten übertragen worden wären.
   Die Übermittlung von Gebührenimpulsen wird nicht benötigt, da die
   Zeitsteuerung genau genug ist. Die Gebührenimpulse während eines
   Gespräches werden zudem in so schwankenden Intervallen übermittelt,
   daß man sich danach nicht richten kann.

Q: Wie konfiguriere ich den Chargeint-Patch?
A: Andreas Kool <akool@Kool.f.EUnet.de> schrieb hierzu am 3. Jan 1997:
!verbon
        1. Den Kernel mit "isdnlog-2.50/contrib/chargeint/patch-chargeint-2.04"
           patchen, neuen Kernel backen und booten
        2. Die isdn4k-utils-2.0 mit
           "isdnlog-2.50/contrib/chargeint/patch-chargeint-kutils"
           patchen, make clean; make install
        3. In der "/etc/isdnlog/isdnlog.conf" bei den gewuenschten Gegnern
           das jeweilige Interface in Spalte 4 eintragen, und noch mal
           die Korrektheit der Zone-Eintraege pruefen
        4. Im "Makefile" von isdnlog "-DCHARGEINT" bei "COPTS" anfuegen,
           make clean; make install
        5. isdnlog mit der weiteren Option "-h0" starten, fertig!
!verboff

Q: Wo finde ich eine ausführlichere Anleitung zum Chargeint-Patch?
A: Georg v. Zezschwitz <gvz@hamburg.pop.de> schrieb hierzu am 29. Nov 1996:!br
  Quick und Dirty habe ich jetzt endlich eine Doku fuer den ChargeInt-
  Patch geschrieben:
  - Fuer wen eignet er sich?
  - Wie kriegt man ihn eingebunden?
  - Was macht er?
  - Wie konfiguriere ich ihn gut?
  Default-URL: !link http://www.provi.de/~gvz/chargeint.html;

Q: Wie kann ich sicher sein, daß der Chargeint-Patch mit der richtigen Uhrzeit
   arbeitet?
A: Dazu stellt man am besten mit "isdnlog -t2" die Uhr im eigenen Computer
   nach der Uhr in der Vermittlungsstelle. Zum Stellen der Uhr siehe auch im
   Kapitel "Verschiedenes" die Frage: "Wie kann ich meine Rechneruhr nach ISDN
   stellen".


!3Dial-In

!old
Q: Wie ermögliche ich anderen, über ISDN bei mir einzuloggen?
A: Genauso, wie bei einer normalen seriellen Schnittstelle auch. Man startet
   einen getty (sehr empfehlenswert ist mgetty von Gert Doering) auf einem
   der ISDN-Devices, die eine Modememulation ermöglichen (/dev/ttyI*). Der
   entsprechende Eintrag in der /etc/inittab sieht so aus:
!verbon
        #
        # ISDN Lines
        #
        I0:56:respawn:/usr/local/sbin/mgetty ttyI0
        I1:56:respawn:/usr/local/sbin/mgetty ttyI1
!verboff
   in der mgetty.config Datei müssen nun noch der Init-String eingetragen
   werden, damit der mgetty weiß, auf welcher MSN oder EAZ er "horchen"
   soll. Hier ein Beispiel für Port /dev/ttyI0
!verbon
        port ttyI0
        modem-type data
        speed 38400
        init-chat "" ATZ OK AT&E0 OK AT&B512 OK
!verboff
   Das Beispiel setzt die EAZ (bei 1TR6-ISDN) auf 0. Für Euro-ISDN muß die
   jeweilige MSN (ohne Vorwahl) statt der 0 in "AT&E0" eingesetzt werden.
   Für X.75 wird die Blockgröße auf 512 Byte gesetzt.
   Alternativ kann die gesamte Konfiguration auch in einer einzigen Zeile in
   die /etc/initab geschrieben werden (hier in zwei Zeilen abgedruckt!):
!verbon
        i0:45:respawn:/sbin/mgetty -D -m '"" ATZ OK AT&E0 OK AT&B512 OK'
            -s 38400 ttyI0
!verboff
   Am elegantesten ist jedoch die Verwendung von iprofd. Dieser Dämon
   realisiert den AT&W0 Befehl der i4l-Modememulation. Man startet ihn
   mit einem Dateipfad als Parameter also z.B. "iprofd /etc/i4lprofile"
   Danach kann man mit minicom oder einem anderen Terminalprogramm
   ein ISDN-tty öffnen und die nötigen AT-Befehle von Hand eingeben.
   Gibt man nun zum Schluß den Befehl AT&W0 ein, so wird iprofd vom
   Kernel benachrichtigt, und schreibt die aktuelle Konfiguration
   in die Datei. Von nun an genügt es, den iprofd im ISDN initscript zu
   starten und das jeweilige ISDN-tty mit allein ATZ zu initialisieren.

!old
Q: Jemand will sich bei mir mit HDLC auf mgetty einwählen. Ist hier ttyI1
   richtig, oder muß ich da bei ttyI0 anfangen ?
A: Nein, ist egal, hat auch nichts mit der Nummer des B-Kanals (0 oder 1) 
   zu tun. Man muß nur im Initstring das HDLC aktivieren (ATS14=3).

!old
Q: Gibt es mittels mgetty die Möglichkeit, automatisch beim Empfang von 
   LCP-Frames den pppd starten zu lassen?
A: Ja, das geht. Man muß den mgetty mit "-DAUTO_PPP" compilieren und dann
   in /usr/local/etc/mgetty+sendfax/login.config entsprechend den
   Erfordernissen die Zeile 
!verbon
        #/AutoPPP/ - ppp /usr/sbin/pppd auth -chap +pap login kdebug 7 debug
!verboff
   vom Kommentarzeichen "#" befreien und editieren.

Q: Wie kann ich erreichen, daß (i)pppd die Paßwortüberprüfung bei einer
   Einwahl anhand von /etc/passwd anstelle von /etc/ppp/pap-secrets durchführt?
A: G. Richter <richter@ecos.de> schrieb dazu am 17. Dez 1996:!br
   In /etc/ppp/pap-secrets muß für jeden User folgende Zeile eingetragen
   werden, wenn Du nur bestimmte User zulassen willst:
!verbon
        <login-name> * ""
!verboff
   oder, wenn alle User dürfen, einfach:
!verbon
        * * ""
!verboff
   [Letzteres kann auch erreicht werden, wenn die Datei pap-secrets gar nicht
   existiert - die Red.]!br
   Der ipppd sollten in beiden Fällen u.a. mit den Optionen "login" und
   "auth" gestartet werden.

Q: Wie erreiche ich, daß sich mehrere Personen gleichzeitig bei mir einwählen
   können?
A: Es müssen genausoviele gettys bzw. Netzinterfaces konfiguriert werden, wie
   sich Personen gleichzeitig einwählen können. Diese gettys bzw.
   Netzinterfaces können auch auf die gleiche MSN eingestellt werden, dann
   können mehrere Personen auf derselben MSN einwählen (solange B-Kanäle
   vorhanden sind). Es darf aber immer nur maximal ein getty auf ein
   ttyI*-Device angesetzt werden. Siehe auch die Frage "Wie kann ich mehr als
   ein ippp*-Device verwenden".

Q: Kann ich auf nur !u1einer!u0 MSN sowohl Kunde mit einem getty
   (Modememulation) als auch welche mit dem Netzwerk bedienen?
A: Gernot Zander <hifi@scorpio.in-berlin.de> schrieb dazu am 7. Nov 1996:!br
   Ja. Zum einen reicht die MSN des _Kunden_, wenn die Netz-Interfaces auf
   secure on stehen, die werden zuerst bedient, und Kunden, die mgetty sehen
   wollen, sind da ja nicht eingetragen.!br
   Zweitens kann man mgetty auch dazu bringen, die ersten verzweifelten
   ppp-Versuche zu erkennen und direkt (i)pppd loszufeuern, wobei ich jetzt
   nicht weiß, ob das mit isdn auch geht, für Modem soll's jedenfalls gehen.!br
   Sonst kannst du noch versuchen, isdn4linux die HLC's beizubiegen, mußt dann
   aber die Kunden überzeugen, die auch richtig einzustellen. Aber erstens
   wird reichen, solange du keine Leute hast, die mit einer MSN mal das eine
   und mal das andere wollen.

Q: Kann man den Vorteil des Mehranlagenanschlusses (eine MSN für alle ISDN-
   Ports) auch mit mehreren Mehrgeräteanschlüssen hinbekommen?
A: Karsten Keil <keil@temic-ech.spacenet.de> schrieb dazu am 7. Nov 1996:!br
   Also lt. diversen Artikeln in den Newsgroups gibt es das auch für
   Mehrgeräteanschlüsse, allerdings wissen das die meisten Telekomiker nicht
   und es geht auch nicht bei allen Vermittlungsstellen.!br
   [Das nennt sich dann !u1Bündelanschluß!u0 - Red.]

!old
Q: Wenn eine Fritz!-Card bei mir mit X.75 anruft, stürzt Linux ab. Was
   kann man tun?
A: Karsten Keil <keil@temic-ech.spacenet.de> hat einen neuen Treiber (den 
   "HiSax-Treiber") geschrieben. Der enthält einen entsprechenden Bugfix.
   Siehe auch Frage Allgemeines|HiSax und Abschnitt HiSax-Treiber.

!old
Q: Eine AVM (A1 oder B1) kann sich nicht mit X.75 bei mir einwählen, weder
   unter Win95 noch unter OS/2?
A: Mit der alten Version des Teles-Treibers ist dies ein bekanntes Problem,
   siehe letzte Frage. Das ist jedoch mittlerweile im HiSax-Treiber gelöst.
   Von Karsten Keil <keil@temic-ech.spacenet.de> wurde schon ein Patch für
   den alten Teles-Treiber gepostet.

!old
Q: Wie kann ich eine Fritz!-Karte bei mir anrufen lassen?
A: Solange weder einer der neueren HiSax-Treiber verwendet noch der Patch von
   Karsten Keil <keil@temic-ech.spacenet.de> für den Teles-Treiber
   eingespielt wurde: nur per hdlc - versucht die Karte, sich per X.75
   einzuwählen, bleibt isdn4linux gerne hängen. Deshalb sollte man für
   Fritz!-Karten auch eine eigene MSN mit hdlc bereitstellen.
   Hinweis von Roland Rosenfeld <roland@spinnaker.rhein.de>: Wer seine drei
   MSNs verplant hat, kann mit den Dienstekennungen tricksen, z.B. so:
!verbon
        MSN     Analog                          Digital
        ===     ======                          =======
        1       Voice + ISDN-Anrufbeantworter   HDLC-PPP
        2       Voice (Mutter)                  Netz-Interface
        3       Modem/Fax                       X.75
!verboff
   Wer Lust hat, kann bei MSN 2 auch noch einen weiteren ISDN-Anrufbeantworter 
   aufschalten, der einen anderen Text bringt...

!old
Q: Welche Betriebssystem-unabhängige ISDN-Router gibt es?
A: Sakari Aaltonen <sakari@picea.hut.fi>:
!verbon
        Von Routern mit 1 BRI scheint es jede Menge zu geben, die wenigen mit 
        mehr sind recht teuer (Cisco 4000 mit vier Anschlüssen etwa DM
        15000.--, Ascend Pipeline 400: ?). 
!verboff
   Jürgen Goeritz <juergen@bart.simpson.inka.de>:
!verbon
        ISDN-Router mit 4xBRI gibt es auch noch preiswerter von einem
        deutschen Hersteller - siehe !link http://www.conware.de/;
!verboff
   Jochen Wiedmann <Jochen.Wiedmann@Neckar-Alb.de>:
!verbon
        Ein Banzai! könnte auch helfen. Als Hardware tut's jeder beliebige PC 
        mit (z.B.) teles-Karten, die Software kostet so um die 800-1000 DM.
        Ich persönlich mag Banzai!-Router überhaupt nicht wegen Ihrer 
        schlechten Diagnosemöglichkeiten, insbesondere ist Fernwartung so gut 
        wie nicht möglich (es sei denn, man hat die SNMP-fähige Version, aber 
        die kostet dann gleich einiges mehr). Aber wenn sie laufen, laufen sie 
        stabil und im Unterschied zu Cisco's können sie einen echten Callback.
        Von Cisco gibt es als Alternative noch die Cisco 2503 für etwa 5000
        DM, die zwar nur einen BRI-Port hat, aber dafür zwei serielle 
        Schnittstellen, an die man einen TA (je etwa 800 DM) hängen kann. 
        Schließlich kann man last, not least in den saueren Apfel beißen und 
        sich mehrere Cisco 1003 antun (ca. 2000DM pro Stück). Falls Geld keine 
        gar so dringende Rolle spielt, würde ich persönlich die letztere 
        Variante bevorzugen: Ich mag Cisco's einfach. :-)
!verboff
   Winfried Haug <haug@seicom.net>: 
!verbon
        Also du solltest dir eben überlegen, WAS dir am wichtigsten ist:
          (1) Geld sparen
          (2) Zeit sparen
        Für (1) gibt es 2 Lösungen:
        - Banzai! (heißt jetzt übigens Flux oder Concorde..)   
          -> !link http://www.concorde.de/; (von cls: !link http://www.cls.de/;)
          -> !link http://www.flux.de/; (von INS: !link http://www.ins.de/;).
          Basiert auf mind. einem 386er und routet eben Ethernet -> ISDN,
          tut mit vielen Karten, die Programmierer arbeiten m.w mit Teles.   
          Nachteil: nicht sauber fern-konfigurierbar, außer du kauft die SNMP 
          Option dazu, was die Sache aber teurer und entsprechend
          unattraktiver macht..
        - ISPA + PCROUTE   
          -> !link http://www.biochem.mpg.de/~heha/;
          benötigt auch einen PC (tut auch schon mit einem 286er). Hat deutlich
          weniger Optionen wie Banzei, Flux, Concorde etc. ist ebenfalls gar 
          nicht fernbedienbar, läuft dafür aber bombenstabil. 
          PCROUTE kostet gar nix, ISPA inzwischen 70.-, ggf. findest du auch
          noch die Version 2.41 die auch ohne key unlimited läuft.
        Beide Lösungen unterstützen so ziemlich alle ISDN Protokolle (u.a 
        diverse HDLC Varianten etc..). Unterstützung für SPVs (bald eh
        obsolet) und D64S ist zumindest f. Teles-Karten da (kommt auch die
        CAPI drauf an, nicht auf die Software). Alte PCs kriegst du ja schon
        für <1.000 DM, die Teleskarte kostet nicht die Welt nur die Flux,
        Concorde Software wird doch recht teuer wenn man da SNMP dazu kauft
        -> du bist dann auch bald bei 2.000.- und dann kann du lieber gleich
        'ne cisco1003 kaufen..
        (2)
        Wenn du nicht basteln willst, nimmst du entweder 4 einnzelne
        Cisco1003 Router, die gibts so ab 2300.- und du bist mehr oder weniger
        alle Sorgen los (mal von diverse IOS-Bugs abgesehen..). Dummerweise
        können CISCO Router kein "richtiges" Callback... Und als Protokoll nur
        PPP (wobei es IOS-Versionen gibt, die daß nicht sauber machen!) und
        CISCO-HDLC.
        Wenn du 4 BRI brauchst -> CISCO 4000, dann solltest du aber gleich
        das 8-fach BRI kaufen, kostet nur knapp 2.000 DM weniger. Dann mußt
        du aber deutlich mehr als 10.000.- investieren..:-(
        Andere Variante: ELSA LANCOM MPR, kostet auch < 2.000 DM, kann
        Callback, diverse Protokolle (HDLC, X.75, PPP) und ist recht nett zu
        konfigurieren. Auf der Interop wurde ein Shiva ISDN Router mit a/b
        Wandler für 1600 DM vorgestellt, damit wärst du bei 4 BRI Ports bei
        etwas über 6000 DM...
        Dann gibts noch etliche Hersteller die einfach BRI-Router im Programm 
        haben (Preistendenz unter 2.000 stark fallend..), z.B ASCEND, MIRO
        usw.. Wenn du unbedingt 4fach BRI haben willst, gibts eigentlich nur
        die Wahl zwischen Cisco und Ascend..
        äh.. und weil du nach Ascend gefragt hast, hier habe ich noch ne 
        Preisliste von ascend gefunden (juli96), der max400  OHNE  BRI Port 
        kostet schon mal 15.750.-, das 4-fach BRI schlägt dann nochmal mit
        11.250 DM zu Buche... ich denke damit erübrigt sich ascend..:-( 
        Falls dir eine PC-Lösung nicht widerstrebt, könntest du noch netGW von 
        netcs verwenden (!link http://www.netcs.com;). Das ist eine Software
        für SCO, AIX, Sun u.a und basiert bei PCs z.B auf den Karten von Diehl
        ISDN. netGW dürfte mit weitem Abstand die meisten Protokolle und
        Optionen bieten, dafür mußt du dich mit einem PC und den damit
        verbundenen Probleme anfreunden. So ein SCO-Lösung mit 4fach ISDN
        Karte + Software kostet aber auch so an die 10.000 DM.
        Wir haben inzwischen fast alle Banzai! und Co rausgerümpelt, weil sie
        auf Dauer schlecht fern-administrierbar sind und eben bei weitem nicht
        die Stabilität von Cisco oder anderen Stand-alone Routern haben..
        Letztendlich ist es eben eine Entscheidung ob die lieber etwas mehr
        Geld ausgeben willst, und dann läuft es auf Anhieb, oder du baust dir
        so einen PC Router zusammen und bastelst eben rum... daß muß jeder für
        sich selber entscheiden... Wobei Teles einen echt an den Rand der
        Verzweiflung treiben kann, da die CAPI Versionen oft massive Probleme
        haben und man als 08/15 User an alte CAPI-Versionen nicht ohne
        Probleme ran kommt. Der Support bei Teles ist nicht gerade berauschend
        (0190-8er Nummer!). Dann kann man ruck-zuck 20-30 DM vertelefonieren
        ohne eine Lösung des Problemes erhalten zu haben...
!verboff
    Christian Kratzer <ck@toplink.net> ergänzte am 19. Okt 1996:
!verbon
        Cisco ist sogar billiger als Linux wenns um PRI geht. Oder schon mal
        geguckt was PRI Karten für PC's kosten. ;)  Dann brauchte mann auch
        noch Treiber dafür etc...  Da ist mann schnell deutlich über 20k.
        Eine 4000'er mit PRI bekommt man schon für 12-15kDM.  Und wenn man
        versucht die Sache mit einzelnen S0's zu lösen wird's erst recht
        teuer...
        Für Dialup bis 4 x BRI (was halt in eine kiste geht) ist Linux
        allerdings vom Preis/Leistung her unschlagbar.  Auch eine 2'te Kiste
        macht noch Sinn.
        Dann sollte man sich langsam mal nach einer PRI Lösung umsehen.
        Beides läuft bei uns stabil und problemlos.
!verboff

!3Leased lines 


!old
Q: How does establishing and ending a connections work with D64S 
   without signaling?
A: The data are simply sent out! If you at the end of the D64S or 2MB
   line, you tell your router that the line itself is "up". You have -
   other than with ping etc. - NO possibility to recognize whether the
   connection is there or not.  (with ISPA for example, the out-going
   wheels turn...)  The only thing that you can measure on your site
   is the loop to the next switching office. If you used Bchan2
   instead of Bchan1 and send out data, they have to come back. Then
   you can take your statistics. The assumes that the Telekom has the
   unused Bchan setup this way at the switching office. This way we
   once proved to the Telekom the line itself had a broken cable...
   What can happen, if you don't autuomattically assume that the line
   is there, that no data will flow if the other side is not yet
   "up". With ISPA, for example, the pseudo numbers 1tap or 2tap are
   first called with the first data packets and the protocol is
   started. Incoming packets are simply ignored, among other reasons
   because of the missing signaling. Only S01 or S02 lines have a D
   channel and have something to use with signaling, however the best
   known solutions also use this 16kb for data transfers to get 144kb
   instead of 128kb.  So just try it by sending out the data, assuming
   that line is there :-). In this case the data end up in Nirvana...

!old
Q: With i4l, how can I successfully  use the Teles card on a D64 leased line?
A: A later version of the new HiSax driver will support
   D64 (more about this driver above).
   Michael Hipp <Michael.Hipp@student.uni-tuebingen.de> added on 8.10.1996:
!verbon
     If you don't want to wait for Karsten's patch, you can try the
     so-called isachscx driver. It can be found at
     !link http://www.sfs.nphil.uni-tuebingen.de/~hipp/isdn/isachscx.c.gz;
     The driver is derived from the i4l Teles-driver, but doesn't need
     the i4l link level. A desire to experiment is required to try
     this driver.
!verboff

Q: Kann ich zwei Kisten mit einer ICN-Karte über eine D64s-Standleitung
   verbinden? Wie? Wo gibt's Dokumentation?
A: Torsten Hentschel <Torsten.Hentschel@DInet.de> schrieb dazu am 2. Jan 1997:
!verbon
          Das geht sicher. Haben wir hier so im Einsatz. Funktioniert
        auch stabil (Kernel >2.0.26 ist notwendig, da sonst ggf.
        Routerkomplettstillstand). Nur, wenn Du den Stecker des Kabels
        zum Terminaladapter rausziehst und wieder reinsteckst oder
        Dir die Telekom da einen Aussetzer fabriziert, dann mußt
        Du auf beiden Seiten einmal (oder zweimal) auflegen lassen,
        damit die Leitung wieder steht. Das kann man notfalls mit einem
        "ping" und einem "isdnctrl hangup" per cron machen lassen.
        Weitere Doku außer der zum Sourcecode kenne ich nicht.
        Werde aber gerne bei weiteren Fragen helfen, da man mir
        schliesslich auch geholfen hat.
          Es gibt dabei mehrere Dinge zu beachten: LEASEDx ist die
        innumber auf dem Device; eine outgoing number ist nicht
        notwendig, da der Kernel (oder die Firmware, genau weiss
        ich das nicht) pseudomäßige, eingehende Rufe generiert,
        solange niemand "abgehoben" hat. Bei LEASEDx ist das kleine
        "x" durch die Nummer des S0-Interfaces zu ersetzen.
          Wir haben in den betreffenden Routern jeweils vier
        Interfaces (sie werden mit 0, 1, 2, 3, ... durchgezählt),
        weshalb ich auf dem letzten Interface die LEASED-line
        betreibe. Das macht Sinn. Denn die anderen drei Interfaces
        dienen für 6 B-Kanaele mit dial-up-Leitungen und es wird
        vom Kernel bei rausgehenden Rufen immer das erste freie
        Interface gesucht und dort rausgewählt. Wenn man dann
        die Leased Line auf das Interface 0 legen wuerde, wäre
        der zweite B-Kanal der Standleitung ja scheinbar (und
        nur scheinbar) noch frei. Der Kernel merkt aufgrund der
        aktiven Karte noch nichtmal, daß kein D-Kanal zum Wählen
        an dem Interface dran ist und wählt und wählt und wählt.
          Zur Vorsicht habe ich aus dem Grunde auch ein weiteres
        ISDN-Netzinterface kreiert und exklusiv auf dem scheinbaren
        zweiten B-Kanal der Standleitung gebunden, damit bei 6 belegten
        Dialout-Lines nicht auch noch auf der Standleitung ein
        Waehlversuch gestartet wird.
          Noch ein wichtiger Stolperstrick ist, daß bereits der erste
        reingehende Ruf, der pseudomäßig generiert wird, vom
        ISDN-Netzinterface abgenommen werden muss (sonst klappt
        wieder erst der Dritte und dann erst wieder der Fuenfte;
        genau weiss ich nicht warum, habe nur so eine Vermutung
        daß das an den beiden B-Kanaelen liegt, fuer die abwechselnd
        ein Ruf generiert wird; eine D64s hat aber nur einen B-Kanal).
        Das sofortige Abnehmen erreicht man wie folgt:
        * Modul für die ICN-Karte laden und konfigurieren (firmware
          laden, bus-reject, ...) ABER NOCH KEIN "icnctrl -d XXX leased"
        * Netzinterfaces des Kernel generieren mit innumber LEASEDx
          und allem anderen Schnickschnack (IP-Adresse, ...).
          Die Bindung zum entsprechenden S0-Interface nicht vergessen.
        * JETZT: icnctrl -d XXX leased
        Das Netzinterface muß also schon up sein, wenn "icnctrl -d XXX leased"
        abgesetzt wird. Denn mit diesem Befehl wird sofort der erste Ruf
        generiert und dann kann er gleich angenommen werden - und schwup
        steht die Leitung.
!verboff
   G. Richter <richter@ecos.de> schrieb noch zusätzlich am 3. Jan 1997:!br
   Bei uns läuft das (mit einem CISCO Router als Gegenstelle) seid fast zwei
   Monaten problemlos.!br
   Zu beachten ist, daß die eaz auf 1 gestellt wird und mit icnctrl die
   Leitung auf leased umgestellt wird, der Rest bleibt wie bei der Wahlleitung
   (außer Telefonnumer und timeouts)!br
   Ein Beispielscript findet sich unter
     !link http://www.rosat.mpe-garching.mpg.de/~web/ISDN.html;

!old
Q: With ISDN, can I use one channel as a leased line and 
   other as a dial up line?
A: Tomas Pospisek <tpo@spin.ch> wrote:
!verbon
     Yes, you can (at least in Switzerland). You have to make sure you are
     on the correct channel ;)
!verboff

!old
Q: I have a leased line connection to a ICN, however the ping times are too 
   long.
A: Fritz Elfert <fritz@wuemaus.franken.de> wrote:
!verbon
     TIMER_BCREAD = Intervall für B-Kanal-Poll (unit = jiffies = 20ms)
     TIMER_DCREAD = Intervall für D-Kanal-Poll           ditto
     FLAG_RBTIMER (and other FLAG_...) call the appropriate functions from the
     main time dispatcher.
!verboff
   Tomas Pospisek <tpo@spin.ch> wrote to us:
!verbon
     Because of the ping times, I've reduced BCREAD, (was 3 before)
     [since 2.0.16 at 1, Ed.]
     The resolution of the timer in Linux is only 20ms, so
     ICN_TIMER_BCREAD=0 does nothing. In addition, this is only a
     cosmetic problem. Both (sending and receiving) routines empty the
     queue.  i.e when there is real traffic, in each cycle is not only
     just one fragment sent, but up to 16.  The card buffer contains 16
     fragments. Only with ping and Co. is this visible. FTP (or also
     Z-Modem overr ttyI) can do close to 8k cps without problem. In
     addition, in each cycle both directions are served, so the
     calculation 20ms-receive + 20ms-send is therefore incorrect.  Even
     not considering this, 40ms is a really good value. Many ISDN
     routers (also i4l before the reduction to BCREAD=1) have 60ms and
     more.
!verboff

!3SPV

Q: Was ist eine SPV?
A: SPV steht für "semipermanente Verbindung" und ist eine (auslaufende)
   Spezialität der deutschen Telekom. Es ist ein Zwischending zwischen
   Standleitung und Wählleitung. Wie bei einer Standleitung wird die
   Gegenstelle fest eingestellt. Im Gegensatz zur Standleitung wird die
   Verbindung jedoch nur bei Bedarf aufgebaut (was sehr schnell geht, viel
   schneller als bei einer Wählleitung). Da die Telekom die Leitung
   anderweitig verwenden kann, solange sie nicht benötigt wird, ist es
   billiger als eine Standleitung.

Q: Wie lange wird es noch SPVs geben?
A: Steffen Sledz <sledz@dgroup.de> schrieb dazu am 5. Dez 1996:
!verbon
        Wegen ein paar Klagen vor dem Europäischen Gerichtshof gegen 
        die Telekom wohl bis Ende 1997. Wurde in den ensprechenden 
        Newsgroups gepostet und es könnte vielleicht auch was bei 
        !link http://www.birch.de; zu finden sein (der klagte nämlich).
!verboff

Q: Unterstützt isdn4linux SPVs? Wie?
A: Um die Unterstützung für SPVs einzuschalten, muß vor die gewählte Nummer
   ein "S" gesetzt werden. Das funktioniert (recht gut) sowohl in der
   Modememulation als auch bei der Definition von Netzinterfaces.


!3Channel Bundling

Q: Channel Bundling? Was ist das und wie kann ich es einsetzen?
A: Isdn4Linux unterstützt in der aktuellen Version zwei Varianten für
   Channel Bundling:!br
     * !b1Raw Bundling!b0 (Konfiguration von sogenannten Slave-Kanälen)!br
     * !b1MPPP!b0 (basiert auf syncPPP)!br
   Beide Varianten haben z.Zt. eigene Vor- und Nachteile. Siehe dazu die
   nachfolgenden Fragen.

Q: Was ist Raw Bundling?
A: Raw Bundling funktioniert wie Raw-IP, nur eben mit mehreren Kanälen.
   Entsprechend erbt es alle prinzipbedingten Vor- und Nachteile von Raw-IP.
   Raw Bundling benötigt für jeden benötigten Kanal ein eigenes Netzinterface.
   Ein Netzinterface, das sog. Master-Interface, steuert den Verbindungsauf-
   und -abbau. Für jeden weiteren Kanal wird ein weiteres, sog.
   Slave-Interface konfiguriert, das bei Bedarf automatisch vom
   Master-Interface dazugeschaltet wird.

Q: Wie verwende ich Raw Bundling?
A: Das Master-Interface wird wie normal mit
!verbon
       isdnctrl addif <master-interface>
!verboff
   erzeugt und entsprechend konfiguriert. Für alle benötigten Slave-Kanäle
   werden nun entsprechende Slave-Interfaces erzeugt mit dem Kommando
!verbon
       isdnctrl addslave <master-interface> <slave-interface>
!verboff
   und normal konfiguriert (z.B. "isdnctrl sdelay <slave-interface> <delay>").

Q: Welche Vor- und Nachteile hat die Verwendung von Raw Bundling?
A: Raw Bundling hat zunächst alle Vor- und Nachteile von Raw-IP.
   Im Vergleich zu MPPP hat Raw Bundling darüber hinaus den Vorteil, daß
   isdn4linux je nach Last selbsttätig die benötigten Slave-Kanäle auf- und
   wieder zumacht. Leider gibt es mit Raw Bundling z.Zt. noch erhebliche
   Durchsatzprobleme. Siehe dazu die ergänzenden Fragen weiter unten.
   
Q: Gibt es ein funktionierendes Beispielskript für Raw Bundling?
A: Ja, der FAQ-Redaktion liegt ein entsprechendes Skript von Robert O'Kane
   <okane@em.uni-frankfurt.de> vor. Es kann entweder von Robert oder von uns
   bezogen werden.

Q: Wie ist der aktuelle Stand mit Raw Bundling?
A: Robert O'Kane <okane@em.uni-frankfurt.de> schrieb dazu am 27. Dez 1996:!br
   After starting up 2.0.27 I have started again with channel
   bundeling with a bit more success than before.
!verbon
        1st: There seems to have been a change in the "BogoCharsPerSecond"
             calculations. This now gives values (for me) from 60 ->101.
             The values used by the isdn-net code for starting the slaves is
             still set to 7000 cps!  Needless to say it doesn't see these
             values anymore. After setting it to 75, I get the channels
             starting again.
        2nd: With 1 B-channel,  I get   8K /sec (full)
             With 2 B-Channels, I get ~14K /sec (~88 % util.)
             With 3 B-Channels, I get ~18K /sec (~75 % util.)
             With 4 B-Channels, I get ~15K /sec (~50 % util.)
!verboff
   All cards Teles 16.3, Euro ISDN, Linux 2.0.27, Libc-5.4.13, binutils
   2.7.0.3, Pentium 100 <-> 486DX4/100.!br
   This is with rawip/HDLC, 15sec slave delay/ ftp transfer of 100Mb file.
   These results are not the most accurate but show the general results.
   There was no apparent differnce when using the teles or the HiSax
   drivers.!br
   While watching the bogo-cps (isdnctrl verbose 4), I can see the 
   values for each B-channel holding arround 80 until the 4'th B-channel
   kicks in. Then the values become erratic.!br
   1 channel 101, 2nd 40, 3rd 0(!), 4th 40....!br
   Question: How could I check if the isdn-net interface is being
   starved or if the scheduling algorith is just not being too smart at
   these bit-rates?!br
   Has anyone else done/had these kinds of experiences ?
   Robert O'Kane <okane@em.uni-frankfurt.de> ergänzte am 1. Feb 1997:
     I now use 2.0.28 and HiSax 1.5 with NO difference in bandwidth.
   (I also choose 70 for the CPS trigger and 30 seconds slave delay).
     Could you also try setting isdnctrl verbose 4 and watch the bogocps
   calculations for the channels during a ftp transfer. What I think you
   will see is that some of the channels don't send at full speed. I think
   this is a problem with the kernel/IRQ interaction not feeding the
   channels enough data. Could it be that the kernel buffers are not large
   enough for more that 3 channels of data? This could be an explaination
   of why the user-space PPP program can get more data our and into the
   kernel.


Q: What is MPPP?
A: MPPP or MP or MPP (Warning: MP is also an acronym for 'Multi Processor')
   stands for Multi Point to Point and means bundling of several channels to
   one logical stream. To enable MPPP negotiation you must call the ipppd with
   the "+mp" option.  You must also configure a slave device for every
   additional channel (see the i4l manual for more). To use channel bundling
   you must first activate the 'master' or initial call. Now you can add the
   slave channels with the command:
!verbon
       isdnctrl addlink <device>
!verboff
   e.g:
!verbon
       isdnctrl addlink ippp0
!verboff
   This is different to other encapsulations of isdn4linux! With syncPPP,
   there is no automatic activation of slave devices.

!old
Q: How can I use the MPPP material?
A: To use the MPPP material, you have to configure a slave device with
   ISDN4Linux. ipppd can then be started with the "+mp" option. To increase the
   number of open connections, use the "addlink" option of the "isdnctrl"
   command. In the file etc/rc.isdn.syncppp.MPPP in the isdn4kernel-util
   Package you can find an example script.

Q: Welche Vor- und Nachteile hat die Verwendung von MPPP?
A: Nachteilig ist, daß die Slave-Kanäle "manuell" aktiviert werden müssen. Der
   ipppd kann nicht lastabhängig selbst Slave-Kanäle auf- bzw. wieder zumachen.
   Die normalen automatischen Funktionen des ipppd funktionieren teilweise
   unzuverlässig (auto hangup) oder gar nicht (auto dial).
   Dies ist anders bei anderen Einbettungsverfahren (encapsulations). Dafür
   ist der Durchsatz recht gut (ca. 30 KB/s bei 4 Kanäle).

!old
Q: I tried MPPP but it doesn't work. The ipppd writes in the debug log
   something like:
!verbon
     ...
     rcvd [0][proto=0x3d] c0 00 00 00 80 fd 01 01 00 0a
     ...
     sent [0][LCP ProtRej id=0x2 00 3d c0 00 00 00 80 fd 01
     ...
!verboff
A: You forgot to compile MPPP/RFC1717 support into the ISDN Subsystem.
   Recompile with this option enabled.

!old
Q: I use MPP. Unfortunately it hangs, when just one packet is lost.
A: Szemethy Tivadar <tiv@sch.bme.hu> wrote 11.10.1996:
!verbon
     I found a typo in kernel 2.0.20, that also exists in newer kernels.
     If you replace the following line in isdn_ppp.c (function
     isdn_timer_funct()):
       #if (defined CONFIG_ISDN_PPP ) && (defined ISDN_CONFIG_MPP)
     with
       #if (defined CONFIG_ISDN_PPP) && (defined CONFIG_ISDN_MPP)
     then MPP connection has a better chance.
     Without this change, MPP will hang when just one packet is lost.
!verboff
                                                                

!2Troubleshooting

!3General

Q: My isdn4linux doesn't work! How do I best go about finding the problem?
A: The following steps are recommended:!br!br
!verbon
   1. First, check everything is working when booting.
      Are there unusual error messages in /var/log/messages?
      Are all programs active that should be started at boot (check with
      ps, or fuser /dev/xxx)? HiSax won't start if something isn't right.
      The old Teles driver, on the other hand, will appear to start even if
      it is not working. See the questions under Troubleshooting!Teles.
   2. Second, try calling with a telephone. The number should be shown in
      /var/log/messages. Otherwise, perhaps the driver was incorrectly 
      started?!
   3. Third, continue experimenting using modem emulation. Because of the 
      differently service recognition, you can't get the telephone or fax to
      ring, so we have to try something else. Open 2 different consoles as 
      root, and on each run "minicom -s"... in the first set "Serial Port
      Setup!Serial Device" to /dev/ttyI0, and the other to /dev/ttyI1. Then 
      choose "Exit" and start the modem emulation with "ATZ" and "AT&Exxxxxx"
      (where xxxxxx is your own MSN without the area code). Then you can start
      On the first console you can dial your own number with ATDxxxxxx. On the
      second console you should now see "CALLER NUMBER: xxxxxxx" and "RING".
      Accept the call on the second console with "ATA", and you should then 
      see the message "CONNECT 64000/X.75" on both consoles. You can then send
      characters to the other console by typing (to see the characters on your
      own console, turn on local echo).!br!br
   4. Fourth, try calling a known ISDN BBS. If you don't know of any, try 
      Gernot (see "Are there sites that offer guest access where I can test my
      isdn4linux setup?"). If you have problems with the modem emulation, see
      "Troubleshooting!Modem Emulation"!br!br
   5. Fifth, try configuring the network interface or ipppd. Experience shows 
      that they cause beginners (and not only beginners!) the most problems.
      To make things easier and you're happy with asyncPPP (to see what 
      asyncPPP means, see the question "pppd, ipppd, syncPPP, asyncPPP - 
      what is that? What should I use?"), you can use the normal pppd with
      modem emulation (i.e. /dev/ttyI*). 
!verboff      
   Otherwise, it is highly recommended
   that use an example script form the Howto (see the question "Where can 
   I find scripts and other information on configuring i4l?"). For testing
   you can try your own provider or of the guest accounts (see "Are there 
   sites that offer guest access where I can test my isdn4linux setup?").
   The latter have the advantage of being able to see the log files as well
   as a stable, working configuration. For example, if accessing via ipppd 
   doesn't work, you can log in via modem or modem emulation to find out
   what happened on the other side. Not all providers are so 
   cooperative.... :-)

!old
Q: I have problems compiling isdn4k-utils-2.0. "ncurses.h" or "panel.h"
   is not found. But curses.h does exist.
A: You need to set a link:
!verbon
     ln -s /usr/include/curses.h /usr/include/ncurses.h
!verboff
   Andreas Herbst <herbst@wiwi.uni-frankfurt.de> wrote:
!verbon
     I haven't yet seen a newer distribution (neither Slackware 
     nor Debian) that contains a complete ncurses package.  
     /usr/include/ncurses.h is there - sometimes it's called curses.h, 
     but the include file panel.h must come from an original 
     ncurses package.
!verboff
   Thomas Baetzler <bath0011@FH-Karlsruhe.DE> replied:
!verbon
     With Debian you need to install not only ncurses nut also ncurses-dev
     if you want to compile anything with it.
       bash$ dpkg -S panel.h
       ncurses3.0-dev: /usr/include/panel.h
!verboff


Q: Warum klingeln weder mein Telefon, noch mein Fax, wenn ich sie mit
   isdn4linux anwähle?
A: Isdn4linux setzt "digitale Daten" als eigene Dienstekennung, wenn es
   irgendwo anruft. Die Vermittlungsstelle wird solche Anrufe nicht auf analoge
   Geräte wie Telefon oder Fax weiterleiten.

!old
Q: If i4l uses one B-channel then the other one will be blocked (incoming as
   well as outgoing)
A: This behavior is typical for a cable with confused a/b wiring. Some NT from
   Quante had a wrong labeling. They caused exactly the mentioned behavior if
   the PBX was connected to the plug of the NT and the ISDN card to the pins
   of the NT. As soon as some device activates the bus the other one can no
   longer get through.

Q: In der Anleitung zu meinem NTBA steht ein vertauschtes a/b-Kabeladernpärchen
   hätte keinen Einfluß auf die Funktionsweise?
A: Dazu schrieb Gernot Zander <hifi@scorpio.in-berlin.de> am 21. Jan 1997:
   Aber nur, wenn bei allen Geräten a/b oder a2/b2 vertauscht sind.
   Wenn die Geräte jeweils einzeln gehen, ist die Zuordnung von
   Sende- und Empfangs-Pärchen schonmal richtig.

Q: Wie kann ich austesten, ob bei mir ein a/b Kabeladernpärchen vertauscht ist?
A: Dazu schrieb Karsten Keil <keil@temic-ech.spacenet.de> am 21. Jan 1997:!br
   Ganz einfach ich gehe vom Westernstecker aus:
   4 adern sind belegt:
!verbon
       | | | | 
       | | | |
       1 2 3 4
!verboff
   Dann kanst Du versuchen 1<>4 oder 2<>3  oder beides zu vertauschen..
   Nie aeussere mit inneren vertauschen. [Dabei würden RX und TX Leitungen
   vertauscht, und nichts ginge mehr - die Red.]!br
   Gernot Zander <hifi@scorpio.in-berlin.de> schrieb zum gleichen Thema
   am 21. Jan 1997:!br
   Ich gehe mal davon aus, daß du die Teles nicht über die RJ45,
   sondern über eine am NT angeklemmte Busleitung angeschlossen
   hast. (?). Dann mach die Klappe auf, tausche a1 gegen b1.
   Probieren. Geht's nicht, zurück, und a2 gegen b2 tauschen.
   Geht auch das nicht, beide tauschen, wobei ich dann eher
   den Verdacht hätte, daß das RJ45-Kabel vom Telefon verdreht
   ist (das tauscht dann nämlich _beide_). Solange {a|b}1 und
   {a|b}2 dabei erhalten bleibt, kann auch nichts kaputt gehen.
   Willst du sichergehen, dann vor dem Anstecken der Geräte
   zwischen Pin 4 und 5 bzw. 3 und 6 der Dose messen, dort
   darf keine Spannung liegen, zwischen 3 und 4 bzw. 6 und 5
   je 40 V, Plus an 6 bzw. 3.!br
   Waren doch beide Geräte per RJ45 angestöpselt, dann ist eins
   der Kabel verdreht. Das passiert in der Regel dann, wenn einer
   der RJ45-Stecker verkehrtrum angequetscht wurde (a1/b1 liegen
   innen, a2/b2 außen, die Zuordnung Sende-/Empfangspärchen bleibt
   also erhalten), dann brauchst du nur einen neuen Stecker und
   natürlich die Quetschzange für RJ45, alten ab, neuen andersrum
   drauf.!br
   Selbstverfreilich kannst du mit der Kabel-FAQ auch einfach
   alles mit einem Multimeter durchprüfen.

!old
Q: Even though I deactivated the signalling for incoming calls, an incoming
   caller does not get a BUSY signal, although neither i4l nor any other ISDN
   device is configured to use that MSN. Even when every usable B-channel is
   used by i4l or another user an incoming caller will not get BUSY. The same
   is true when I deactivate audio support for i4l.
A: i4l misbehaves by sending an ALERT when the telecom
   signals an incoming call. This ALERT is not canceled by a RELEASE later on.
   That's why the telecommunication company will give a normal ring instead of
   a BUSY signal.!br
   Karsten Keil <isdn4@temic-ech.spacenet.de> wrote about this on 11 Oct 1996:
!verbon
     As I don't have a patch at hand I'll explain it this way: search for
     CC_ALERTING_REQ in linux/drivers/isdn/teles/callc.c and comment out that
     line. It should look like:
        if (((chanp->chan & 1) + 1) & chanp->para.bchannel) { /* \
                chanp->is.l4.l4l3(&chanp->is, CC_ALERTING_REQ, NULL); */
                FsmChangeState(fi, ST_IN);
                if (chanp->debug & 1)
     That's the clean solution. For data connections there is no ALERT required
     or expected. Voice applications only need ALERT when the want to wait for
     several rings.
!verboff
     Update by Karsten (14 Oct 1996):
!verbon
       There is no alerting any more [in older HiSax versions - ed.]
!verboff
     An improved HiSax has been released that included an alerting function
     that works.
     
!old
Q: When the router is active, incoming calls from customers hear ringing, even
   when when we're on the line with a support call. This gives the impression
   that our employee doesn't answer the phone.
A: Jan den Ouden <denouden@groovin.xs4all.nl> recently posted a patch. Search
   archive or contact Jan directly.

!old
Q: I closed all ISDN applications. Why can't I unload my ISDN modules
   ("isdn: Device or resource busy")?
A: Is some program using an ISDN device?
   Did you remove all getty's?!br
   Are isdnlog, imon, iprofd, etc., still running?!br
   Maybe there is still a route on your net interface and it's not yet deleted
   with "route del xxx"?!br
   Maybe the net interface wasn't put down. This can easily happen when killing
   ipppd. It does not react to signal 15 and has to be killed with "kill -9
   <ipppd pid>". Then the net interface is left "up".!br
   In this case "fuser -v /dev/isdn* /dev/ippp* /dev/cui* /dev/ttyI*" 
   is very helpful. This helpful program shows, which processes are
   using those devices.!br
   Sporadic errors of this type can be fixed by inserting sleep commands
   between the unloading commands.

Q: I'm now certain I've closed all ISDN applications. I still sometimes
   cannot unload the ISDN module  ("isdn: Device or resource busy")...
A: Sporadic errors of this type can be fixed by inserting sleep commands
   between the unloading commands.

Q: Es klappt immer noch nicht mit dem Entladen. Ich setzt Callbacks ein.
A: Siehe dazu die Frage "Irgendwie kommt der Module-Count bei Callbacks
   durcheinander. Wie kann ich jetzt meine ISDN-Modul entladen?" im Abschnitt
   "Callback" im Kapitel "Troubleshooting".

!old
Q: My charge "impuls typ A" [German charge impuls at the end of a connection]
   is not correctly transmitted, although the Telekom [German telephone company]
   say they activated it.
A: Peter Gramlich <peter.gramlich@wiwi.uni-karlsruhe.de>: 
!verbon
     In some cases the Telekom activated the charge impulses only for some
     services. It seems they have to activate it seperately for each service
     (voice, data, G4-fax,...).
!verboff

Q: Meine TK-Anlage erzeugt etwa jede Stunde einen Bus-Reset des internen
   S0-Busses, danach nimmt isdn4linux nicht mehr ab?
A: Ab HiSax 1.5 übersteht auch isdn4linux den Bus-Reset.

!old
Q: My Ascotel PBX crashes i4l (connected on my internal bus).
A: Herbert Rosmanith <herp@wildsau.idv.uni-linz.ac.at> wrote:
!verbon
     I think I found the reason why the Ascotel PBX crashes linux. It's not an
     overly big "FACILITY" frame (as I wrote earlier) but a frame of an unknown
     protocoll (0x44, while EDSS1=0x08 and DIS_N0=0x40, DIS_N1=0x41).
     [...]
     Jan den Ouden made a patch for it that ignores such frames. Yes, I *did*
     try that patch... but I must have made some silly mistake (did not load
     modules properly?) or there was another reason for the crash. I don't know
     what to do any more :-( I just tested 2.0.18 and tried to do a hexdump
     instead of interpreting it - and now the machine doesn't crash any more.
     And now I've tried to use 2.0.20 and it did not crash. *shrug*,
     confusion...
     Whatever the causes the crash, remember that Jan's patch should be
     included with the standard driver. It's not a good idea that frames that
     are not 1TR6 are interpreted as EDSS1 by default.
     Remark: the patch mentioned here has a bug: X.75 won't work anymore.
!verboff

Q: Meine Teles 16.3 funktioniert hinter einer Quante IS-2 (baugleich
   zur Ackermann Euracom 181) nach einem Reset nur, wenn ich:
!verbon
        1. TK-Anlage ausstecken
        2. PC abschalten
        3. TK-Anlage einstecken
        4. PC anschalten
!verboff
A: Karsten Keil <keil@temic-ech.spacenet.de> schrieb dazu am 13. Jan 1997:!br
   Das sollte ab HiSax 1.5 weg sein. (Tei remove Problem).

!old
Q: I'm connected through an old PBX. Any attempt to dial out is refused with
   cause 64?
A: Wolfgang Hamburg <wh@jumping.baltic.de> wrote on 8 Oct 1996:
!verbon
     Cause 64 means "invalid information element contents" and is from the
     12TR7 protocoll that some PBX (in our case Octopus-M) use internally.
     12TR7 includes 1TR6. I don't know more about it. My source was a nice
     guy from the Telekom. They have "Richtlinien" (guidelines) that describe
     the protocols.
!verboff

Q: Ich bekomme meine TK-Anlage, eine proprietäre Siemens Hicom, nicht zum
   Laufen?
A: Sven Engelhardt <sven@sik.de> schrieb hierzu am 20. Jan 1997:!br
   Die Techniker haben an digitalen Nebenstellen immer etwas länger zu
   basteln. Tip: Es gibt eine Einstellung fuer die Nebenstelle, nennt sich
   "DSS1 mit EAZ", die kann aber nur ein Techniker einstellen. Damit
   funktioniert ISDN meistens mit geladenem DSS1-Treiber. Zumindest unter
   WIN/DOS. Die Defaulteinstellung der Anlage ist meist "1TR6 mit MSN" (don't
   flame me, it's real).!br
   (Meine letzten Erfahrungen mit SIE* TA sind allerdings schon ein gutes Jahr
   alt, seitdem mach' ich um die Dinger einen Bogen. Laß Dich trotzdem nicht
   unterkriegen, es gibt ein paar tausend Software-Patches fuer die HiComs,
   die Techniker müssen nur wollen. Manchmal hilft's, mit dem Techniker
   zusammen ins Programmierhandbuch zu schauen und ihm die Seite mit den
   Einstellungen für digitale Nebenstellen rauszusuchen.)

!old
Q: isdnctrl returns a "bus error" when I do a "isdnctrl list"?
A: Christian Kratzer <ck@toplink1.toplink.net> gave the patch:
!verbon
     diff isdnctrl.c.dist isdnctrl.c
     240c240
     <   if (strlen(cfg.slave))
     ---
     >   if (cfg.slave && strlen(cfg.slave))
!verboff

!old
Q: After a hangup "no routine" is printed on /dev/isdnctrl. Did it release my
   line or is there still some bug in the driver?
A: "no routine" doesn't always mean that there is something wrong with the
   driver. Sometimes the link level module sends commands that aren't needed
   by the teles driver and lead to "no routine".

!old
Q: I get many "HSCX RME out of buffers" messages in my syslog.
A: Answer by Jan den Ouden <denouden@groovin.xs4all.nl>:
     The "HSCX RME out of buffers" message means that there are no more
     receive buffers available. Received frames are only processed every few
     milliseconds and in the meantime the frames have to be buffered. Default
     are 6 buffers. Each frame needs a buffer no matter how big it is. If a
     number of very small frames arrive within a short time period it can
     happen that the buffers are overrun. At least it seems that this happens.
     In teles.h there are three lines for number and size of those buffers:
!verbon
       #define HSCX_RBUF_ORDER 1 
       #define HSCX_RBUF_BPPS 2 
       #define HSCX_RBUF_MAXPAGES 3 
!verboff
     The size of each buffer is about
!verbon
       (4096<<HSCX_RBUF_ORDER)/HSCX_RBUF_BPPS 
!verboff
     This would lead to buffer with a size of about 4k. The number of buffers
     is MSCX_RBUF_BPPS*HSCX_RBUF_MAXPAGES, which normally gives 6. You can
     increase that number by increasing HSCX_RBUF_MAXPAGES. This is just a
     limit, there is no buffer allocation when they are not needed.


Q: Mein pppd bzw. ipppd hat Probleme mit der PAP bzw. der CHAP
   authentification.
A: Siehe dazu die entsprechenden Fragen im Abschnitt "Sync-PPP".

!old
Q: Ich bekomme den Fehler "SIOCADDRT: Invalid argument", wenn ich route
   mitteile, daß es auf isdn0 weiterrouten soll.
A: <tpo@spin.ch> schrieb dazu am 8. Okt 1996:
!verbon
        Ich hatte den gleichen Fehler, bis ich die korrekte Netmask angab.
!verboff

Q: Wo finde ich eine Übersicht aller causes?
A: Klaus Kämpf <kkaempf@progis.de> schrieb hierzu:
   Spontan fällt mir da die ISPA Dokumentation ein. Schau doch mal in
   !link ftp://ftp.biochem.mpg.de//pc/isdn;.

Q: Bei meiner ELSA-Karte blinkt öfters die LED, die den Verlust der TEI
   anzeigt. Meine Verbindungen sind leider auch öfter gestört...
A: Jens Ey <jens@jeyhh.shnet.org> schrieb am 29 Dec 1996:!br
   Diese blinkende LED wird oft verursacht durch schlechte Kabel oder einen
   zu langen oder unterminierten S0 Bus. Das hat mir ELSA mitgeteilt nachdem
   ich mich bei denen über das gleiche Problem beschwert hatte. Ein neues
   Kabel - und schon lief alles wunderbar.!br
   Paul Slootman <paul@wau.mis.ah.nl> schrieb dazu am 2. Jan 1997:!br
   Jan den Ouden vermutete (in einer niederländischen Newsgruppe), daß die
   niederländische Telefongesellschaft manchmal nachts "ein TEI wegwirft".

Q: Mein ISDN-Treiber stürzt mir ab! Da ich es als Modul konfiguriert habe,
   ändern sich die Adressen bei jedem Laden. Wie finde ich heraus, wo der
   Treiber abstürzt?
A: Der Treiber wird dazu mit dem Befehl "insmod -m" geladen. Die Ausgabe wird
   muß noch etwas bearbeitet werden, um ihn in eine Form analog zu System.map
   umzuwandeln.!br
   Fritz Elfert <fritz@wuemaus.franken.de> schrieb dazu am 17. Okt 1996:
!verbon
        insmod -m isdn.o | sort | sed -e 's/   / T /g' |
            egrep '.* T [a-z,A-Z,_]+' > /etc/isdn/isdn.map
        cat /System.map /etc/isdn/isdn.map > /iSystem.map
!verboff
   [Die Zeile, die mit "|" endet, muß mit der nachfolgenden zusammengefaßt
   werden!]!br
   iSystem.map sollte nun anstelle von System.map zur Fehlersuche verwendet
   werden.

Q: Meine Festplatte wird sehr aktiv, wenn isdn4linux läuft. Wie kann ich das
   abschalten?
A: Mit "isdnctrl verbose 0", sowie Entfernen der "debug"-Option für den ipppd.


!3Teles driver


!old
Q: How can I know that my Teles card (or compatible) is used correctly?
A: On bootup there has to be a message like "kernel: HSCX version A:5 B:5" as
   well as "kernel: channels 2" in /var/log/messages. "A:4 B:4" is also o.k.
   All other values (especially "A:0 B:0" or "A:f B:f") show that the card
   is not used correctly.

Q: Welches ist der Name meines Teles-Treibers (insbesondere wenn eincompiliert
   im Kernel)?
A: Der Name ist das, was (beim Laden als Modul) mit "teles_id" angegeben wurde.
   Wurde lilo verwendet, dann ist der Name ebenfalls das, was mit "teles_id"
   angegeben wurde. Wurde der Teles-Treiber in den Kernel fest eincompiliert,
   dann ist der Name ein einfaches "" (zwei mal Anführungsstriche oben).
   Der Name kann auch durch ein "cat /dev/isdninfo" herausgefunden werden,
   er wird bei "idmap" angezeigt.

!old
Q: On bootup I get "HSCX version A:5 B:5" but I still have the impression that
   my Teles card is not used correctly. What else can I check?
A: Wilhelm Schulte <schulte@wrds1.urz.uni-wuppertal.de> wrote about this:
!verbon
     Best is you check that the interrupt is registered correctly. Check it
     with "cat /proc/interrupts". The following entry indicates an error:
       11:        0 + teles
     The 11 is correct when the Teles card is configured on interrupt 11.
     However, the 0 means that the Teles card does not accept interrupts, so it
     does not work. That's the well known "busy bug". Often it can be worked
     around by loading, unloading, and reloading the ISDN modules on bootup.
     The IRQ counter does have to be 0; low values also point to the same
     problem. You can test for it quite easily:
     1. cat /proc/interrups, note the count
     2. Call the card with a telephone.
     3. Again cat /proc/interrupts, the count should be quite
        different from the first value.
!verboff 
   See also "I always get BUSY when dialing into my ISDN mailbox". You can also
   check the io ports with "cat /proc/ioports".

!old
Q: Why should I avoid IRQ 12 and 15 for my ISDN card?
A: Gernot Zander <hifi@scorpio.in-berlin.de> wrote about this:
!verbon
     On PCI boards never use IRQ 12. It is often used by the bus mouse (even
     though you may not have any or the IRQ is not activated for it), which is
     why that IRQ often is lost and you will get errors trying to use it.
     On PCI boards never use IRQ 15. It is often used by IDE 2 (even when you
     are not using it or the IRQ is not activated for it), which is why that
     IRQ often is lost and you will get errors trying to use it.
!verboff
    It should be mentioned that this is not the case for *all* PCI boards! But
    many of them mess up the IRQs in this way...
    
!old
Q: My Teles card will not be recognized correctly when I use LILO with my
   parameters.
A: Unfortunately the order of the kernel parameter for irq, mem, io base, and
   protocoll is not identical with the order of the parameters for modules or
   when compiling them in.
   Order for module parameters (insmod): mem, irq, base, type
   Order for kernel parameters (LILO):   base, irq, mem, type

!old
Q: If I first start DOS and the Teles driver included with the card,
   and then start Linux with Loadlin, everything works fine.
   However, if I start Linux directly with LILO, the Teles driver
   doesn't respond directly.
A: Try replacing the Teles driver with HiSax.

!old
Q: After a reset, my card does not initialize correctly.
A: Andreas M. Kirchwitz <isdn4linux-mlist@zikzak.snafu.de> wrote:
!verbon
     Instead of a "reboot" command or pressing "Ctrl-Alt-Del"
     try a "Hard Reset" with the reset button.
     With some motherboards (which is not necessarily the motherboard's 
     fault) the cards are not completely reset with a "Soft Reset" so that
     some drivers will have problems finding the cards.
!verboff
   Of course, before the hard reset you have to bring the system down
   correctly ("reboot" command or press "Ctrl-Alt-Del")! Only then
   can you hit the reset button. 

!old
Q: The Teles driver recognizes my 16.3 card as a 16.0.
A: When using a 16.3 you have to set the memory area to 0. If a 16.3 is
   recognized as a 16.0 you have given the wrong parameter.

!old
Q: I use i4l and the Teles driver. From time to time the driver hangs and I
   have to reload it.
A: You are using a [very] old version of the Teles driver. Since version 0.4a
   this has been fixed. Check "How to get i4l" on how to get a newer driver.

!old
Q: My machine often crashes. On the console I get about every few seconds
!verbon
     l1state 4 
     l1state 8
     l1state 13
     ph_command 9
     l1state 4
     l1state 0
     ph_command 0
     l1state 7
     ph_command 9
!verboff
A: It could be a broken cable. The DOS hardware test software from Teles
   should also report this error.

!old
Q: My Teles driver always says "isdn0: Chargesum is 0" although I get charge
   information from the [German] Telekom.
A: The Teles driver does not support/use the German charge information,
   because the author, Jan den Ouden lives in Netherlands and the charge
   information is transmitted differently there than in Germany (so much for
   "Euro"-ISDN :-( ).
   Despite that isdnlog can handle the Q.921 information it gets via isdnctrl.
   There is even a patch for isdnlog to end a connection just in time before
   the next charge unit. Another patch even enables isdnlog to save the
   charge information in a Postgres95 database. These patches may be included
   in a new version of isdnlog.

!old
Q: My Teles driver does not work in 2.1.x!
A: Christian Mock <cm@kukuruz.ping.at> wrote on 7 Oct 1996 a patch about this
   which can be obtained from him or the mailing list archives. Another patch
   for 2.1.1 was posted from Markus Gutschke <gutschk@uni-muenster.de>, on the
   7 Oct 1996, too.
   Because of the many basic changes and adjusting problems only developers
   should switch to 2.1.x at this point in time.

!old
Q: I have two Teles cards in my computer but it seems that only one is used!
A: Christian Kratzer <ck@toplink.net> wrote about this on 6 Oct 1996:
!verbon
     Clear case of IRQ problems. Especially the 11 gives trouble on some
     boards. Even though one thinks that some IRQs are available they are still
     somehow reserved by the BIOS.
     Good IRQS to try are always IRQ 5 and IRQ 9. Without mice or modems you could
     also try 4 and 3. That even works on very exotic boards.
!verboff

Q: Beim Kompilieren des Teles-Treibers gibt es einige undefinierte Symbole
   (nur Kernel 2.0.26)?
A: Beim Patch ging leider die Datei proto.h verloren. Das muß drin stehen:
!verbon
        #ifndef PROTO_H
        #define PROTO_H
        #define PROTO_EURO      0x08
        #define PROTO_DIS_N0    0x40
        #define PROTO_DIS_N1    0x41
        #endif
!verboff



!3HiSax driver


Q: Woran erkenne ich, daß meine ISDN-Karte vom HiSax-Treiber korrekt erkannt
   wurde?
A: Beim Booten erscheint im Log-File eine Meldung in z.B. folgender Form:
!verbon
        HiSax: Teles 16.3 found,irq:5 isac:a80 cfg:e80
        HiSax: hscx A:280 hscx B:680
        Teles3: HSCX version A: V2.1 B: V2.1
!verboff
   Karsten Keil <keil@temic-ech.spacenet.de> schrieb dazu am 12. Dez 1996:!br
   Beim HiSax brauchst Du Dir auch keine Gedanken darüber machen, wenn er
   geladen wird, kann die Hardware angesprochen werden und generiert auch
   entsprechende Interrupts, wenn nicht wird das Modul nicht geladen.
   Das heist zwar nicht, daß dann auch alles funkt (z.B Kabeldreher,
   Kabelunterbrechung, Terminierung), aber die Karte ist richtig im Rechner
   installiert, keine Hardware-Konflikte.

!old
Q: The Teles crashes again and again with the follwing error message
   in the log: 
!verbon
     <date> <time> foo kernel: HSCX B EXIR 10
     <date> <time> last message repeated <n> times
!verboff
A: The CPU isn't able to empty the FIFO. Is a sound card installed that
   keeps the interrupts for itself for too long?
   
Q: Meine AVM-Karte erzeugt extrem viele Interrupts mit dem HiSax-Treiber. Ist
   das normal oder ein Problem mit dem HiSax-Treiber?
A: Karsten Keil <keil@temic-ech.spacenet.de> schrieb dazu am 12. Nov 1996:!br
   Das ist normal. AVM (und auch ELSA) haben einen Timer auf der Karte.
   Da AVM nicht koorperiert weiss ich nicht wie der abzustellen ist.
   Bei Elsa weiss ich es zwar, mache es im Moment aber nicht, da hier kaum was
   an Performance verloren geht und ich die Interrupts momentan bei der ELSA
   fuer die Statusanzeige nutze (war vor allem bei der Entwicklung sehr
   hilfreich, sobald der Treiber stand, blinkte nichts mehr ;-) ).
   Spaeter werd ich ihn wahrscheinlich abschalten oder nur bei Verbindung
   benutzen.

Q: Die PNP-Tools funktionieren nicht mit meiner Teles-16.3-PNP-Karte!
A: Wahrscheinlich ist es gar keine Plug'n Play-Karte - obwohl Teles 
   mittlerweile auf alle Karten/Verpackung PNP draufschreibt. Der Unterschied
   ist einfach zu erkennen: eine echte Teles PNP-Karte hat nicht mehr die
   (winzigen) DIP-Schalter auf der Karte, mit der man die IO-Adresse einstellen
   kann.

!3ICN driver


!old
Q: On dialing out/in with my ICN packets get lost.
A: Torsten Hentschel <Torsten.Hentschel@DInet.de> has a patch for kernel 2.0.21
   which definetly does not loose any more packets. Contact Torsten.

!3Working together with other ISDN devices 

!old
Q: Ich habe Probleme, mit einem ELink Verbindungen aufzubauen.
A: Daniel Moeller (danny@rsun.lfn.unterland.de) schrieb dazu 1996 in der
   Mailingliste:
!verbon
        Ich hatte schon vor einigen Wochen über meine Probleme, mit einem
        EL 310 zu connecten berichtet. Es kam keine Connect-Meldung für den
        Daten-Kanal vom ISDN. Das problematische Elink hängt an einem 1TR6
        Anschluß und hat identische Settings wie ein anderes Elink an einem
        Euro-ISDN Anschluß, mit dem ich nie Probleme hatte. Seit ca. 2
        Wochen funktioniert das jetzt plötzlich einwandfrei, ohne daß lokal
        oder remote etwas geändert wurde.
        Schlußfolgerung: Die Software in den Vermittlungsstellen scheint da
        eine Rolle zu spielen....
!verboff

Q: Ich habe Probleme, eine Verbindung zu einem Netblazer Router aufzubauen.
A: Michael Hipp <Michael.Hipp@student.uni-tuebingen.de> schrieb dazu im
   Okt 1996:!br
   deine Gegenseite meint wohl, sie dürfe komprimierte Pakete schicken
   (obwohl kein Kompressionsverfahren ausgewählt wurde). Schmeiß mal in
   main.c die Zeilen:
!verbon
        { PPP_CCP, ccp_init, ccp_input, ccp_protrej,
          ccp_printpkt, ccp_datainput, "CCP" }
!verboff
   raus und kompilier' den ipppd neu durch. Dann müßte er das ganze CCP
   Protokoll ablehnen und das versteht dann hoffentlich auch der Netblazer..
   (ist nicht der erste Bug des Netblazers.. das Teil scheint generell nicht
   sonderlich conform zu sein .. komischerweise haben andere diese Problem
   nicht, eventuell sollte man mal eine neue Softwarerelease einspielen)!br
   [Dasselbe Problem kann auch bei asyncPPP auftreten. Es funktioniert dort
   dieselbe Methode (evtl. ist sogar eine Kompilieroption für das
   Entfernen des CCP-Protokolls vorhanden). Ab pppd 2.3 beta 3 soll es die
   Option "noccp" geben, die ohne Neukompilation dasselbe bewirkt - die Red.]


!commenton
Weitere Hinweise finden sich im gleichnamigen Abschnitt im Kapitel
"Konfiguration"!
!commentoff

!3Raw IP

!old
Q: I get the error message "protocol error, unspecified".
A: "Protocol error, unspecified" means that messages or parts of messages came
   in at a time where they weren't expected or the content of the message could
   not be decoded.
   Torsten Hentschel <Torsten.Hentschel@DInet.de> wrote about this:
!verbon
     Especially the first packets of the protocoll can be lost when they are
     fired out onto the B-channel immediately after the connect message.
     I had a problem with raw hdlc: it lost packets, but only when dialing from
     one side to the other.
!verboff
   A patch should be available from Torsten.


!3Modem emulation (use with ttyI* devices)


Q: When I dial with "ATD....." I always get a "NO CARRIER".
A: Before dialing, you have to enter "AT&E123456" (if 123456 is your
   own MSN; with 1TR6 give the one-digit EAZ).

!old
Q: My modem emulation/pppd does not recognize an incoming call.
A: Probably you did not tell the modem emulation with "AT&E" which MSN to use.
   For example, use "AT&E123456" if your MSN is 123456.

!old
Q: I gave the correct MSN/EAZ, but still don't get a RING.
A: If you put a getty to a cui* device it will never get a RING. That's not
   i4l's fault, but the kernel's. HIGHLY RECOMMENED: always use the /dev/ttyI*
   devices! Since there is mgetty there is no need to use different devices for
   incoming and outgoing calls. (The same goes for the normal /dev/ttyS* and
   /dev/cua* devices for the serial interface.)

Q: Why can't I dial my telephone or fax with the modem emulation?
A: ISDN differentiates different services. All outgoing calls with the 
   modem emulation use the service "Digital Data", which is incompatible
   with telephone or fax, so the call never gets through.

!old
Q: I can't get a connection to my ISDN mailbox.
A: There are several possible protocoll parameters. There is hdlc, there is
   X.75 and there are several possible block sizes with X.75. You can tell
   the modem emulation about the block size with "AT&B". Mostly used is a block
   size of 2048 byte: "AT&B2048". The teles driver can not process blocks
   longer than 2048 bytes (ICN can handle up to 4000 bytes).

!old
Q: I'm sure I used the correct parameters for my ISDN mailbox, but I still
   don't get a connection. I always get BUSY although I know the mailbox is not
   busy.
A: Sometimes there is an interrupt problem with the teles driver. Check the
   interrupt count for your teles card. If "cat /proc/interrupts" just gives
   you 0 then the following workaround may help you:
   Configure your drivers as modules. When booting load them (insmod/modprobe),
   then immediately unload them (rmmod) and reload them (insmod/modprobe).
   Then it should work correctly...!br
   Dr. Peter Schrammel <Dr.Peter.Schrammel@t-online.de> wrote:
!verbon
     It may be a problem with your ISDN cable...
!verboff

!old
Q: My modem emulation hangs. How can I force my card to hang up?
A: Emil Stephan <ste@esqhen.su.eunet.de> wrote on 13 Oct 1996:
!verbon
     If there is really no process using your modem emulation any more, try:
       cu -l /dev/ttyI0 dir
       +++
       ath0
       ~.
     Before and after "+++" you have to wait for a second, otherwise the modem
     emulation won't recognise it as the escape sequence (like a normal modem).
     Watch out for processes that (with "ps -ax") have something like "I0" or
     "I1" in the second column, they have an ISDN terminal as their controling
     terminal. You may have to kill them with kill.
!verboff

Q: Ich bekomme während einer tty-Verbindung vom Kernel die Meldung
   "teles_writebuf: channel not open". Es werden dann keine Eingaben mehr
   für diese Verbindung angenommen.
A: Fritz Elfert <fritz@wuemaus.franken.de> schrieb dazu am 18. Nov 1996:!br
   Meist verträgt dann die Gegenseite die grossen Frames von i4l nicht und
   macht mitten im Transfer den B-Kanal dicht. Probier mal mit AT&B512 vor
   dem Wählen die Frames kleiner zu machen.

Q: Wenn ich uucp mit X.75 mache, bekomme ich laufend Übertragungsfehler!
A: Andreas Gutzwiller <andy@hippo.proxyon.imp.com> schrieb dazu am 5. Dez 1996:
!verbon
        Ich mußte das bei mir folgendermassen einstellen. Sonst bekam ich auch
        nur Fehler.
          # Prot
          protocol-parameter g packet-size 512
          protocol-parameter g short-packets y
          protocol-parameter g window 7
          protocol-parameter g remote-window 7
          protocol-parameter v packet-size 512
        Damit komme ich bei großen Paketen auf ca 7300 cps
!verboff
   Holger Burbach <holly@cthulhu.pfalz.de> kam am 5. Feb 1997 zu einer anderen
   Lösung:
!verbon
        Bei mir pollen auch einige XP-Benutzer, wohl auch ohne Probleme. Ich
        habe folgendes gemacht: Zum einen habe ich die Send-Packetsize vom
        ttyI? auf 1024 gesetzt ("AT&B1024") und zum setze ich die
        Paketgrößen für das g-Protokoll beim UUCP:
          protocol-parameter g packet-size 2048
          protocol-parameter g remote-packet-size 0
        Wie gesagt, damit läuft hier alles prima.
!verboff

Q: Mein iprofd läuft nicht mehr mit HiSax 2.0. Ich bekomme die Fehlermeldung
   "Version of kernel modem-profile (3) does NOT match version of iprofd (1)".
   Wie bekomme ich iprofd wieder zum Laufen?
A: Fritz Elfert <fritz@wuemaus.franken.de> schrieb dazu am 17. Feb 1997:
   In iprofd.c die Zeile mit!br
!verbon
       #define DATA_VERSION 1
!verboff
   in 
!verbon
       #define DATA_VERSION 2
!verboff
   ändern, den iprofd neu compileren, und (WICHTIG) die gespeicherte
   profile Datei löschen.

!3Async PPP

Q: How can I get a log for pppd?
A: See this question for Sync PPP, it works the same way for pppd.

Q: Der Verbindungsaufbau klappt wunderbar, leider hängt sich der pppd nach
   kurzer Zeit auf (d.h. die ersten Bytes gehen durch, danach steht jedoch
   alles)?
A: Joachim Gassen <joachim@fb4-1112.uni-muenster.de> schrieb dazu am 8. Jan
   1997:!br
   Das Problem hatte ich auch mal. Es liegt höchstwahrscheinlich an einer
   falschen Blockgröße auf Deiner Seite. Versuch mal, ein &B512 im
   "Init-String" Deiner isdn-Karte einzufügen. Dann dürfte es klappen.


!3Sync PPP


!old
Q: How can I get a log for ipppd?
A: For debugging purposes you can redirect the ppp log into a separate file.
   Just edit /etc/syslog.conf and add the following line (caution: do NOT use
   blanks or tabs):
!verbon
     daemon.*                      /var/log/ppp-log
!verboff
   then every information from ppp demon will be logged to /var/log/ppp-log.
   Emil Stephan <ste@esqhen.su.eunet.de> also wrote:
!verbon
     Remove the comment sign in front of this line in /etc/syslog.conf:
       #*.=debug                       /tmp/debug
     After changing this file you can restart syslogd with "kill -1 <pid of
     syslogd>".
     The output in /tmp/debug can be used to optimize the handshaking of
     ppp options.
!verboff


!old
Q: My ipppd won't work, it gives the error message "PPP driver 0.0.0 is out of
   date".
A: Ari Biel <aribiel@sun14.hrz.th-darmstadt.de> wrote on 3 Oct 1996:
!verbon
     I had the same thing! (S.u.S.E. 4.2 Kernel 2.0.0, isdn4k-utils 3.91 with
     patch). After recompiling the kernel and configuring ppp as module I could
     start ipppd. Looks like version problems.
!verboff


!commenton
(Die folgende Frage entstammt der syncPPP-FAQ.)
!commentoff
!old
Q: Starting ipppd I get the error message "this systems lacks ppp support".
A: Check whether the device "ippp0" exists (i.e. with the program "ifconfig").
   The ipppd *needs* this device with exactly *that* name. If it doesn't exist
   one has to define it:
!verbon
     isdnctrl addif ippp0
     isdnctrl encap ippp0 syncppp
     ... (see i4l documentation for more information) ...
!verboff
   Maybe you compiled ipppd with the source of another kernel that you are not
   using...
   Siehe auch die Frage "Wie soll ich mein Netzinterface benennen?"
   im Abschnitt "Sync-PPP" im Kapitel "Konfiguration".

!old
Q: How can I switch on ppp support for my kernel 1.2.13 (needed for ipppd)?
A: Stefan A. Muehlenweg <Stefan.A.Muehlenweg@samhh.hanse.de> wrote:
!verbon
     In 1.2.13 you tell the kernel *not* to include ppp support, then compile
     the kernel, *after that* do a 'make modules' and a 'make modules_install'.
     This way everything that's not compiled into the kernel, but that can be
     loaded as modules is prepared for loading via insmod. 'modprobe ppp' on
     bootup (in the rc.xxx script) will load the ppp module and all
     additionally needed modules (slhc etc).
     Prerequisite for ipppd with 1.2.13: install ppp version 2.2.0c. Also in
     the kernel sources (ppp-2.2.0c.tar.gz). And you need modutils 1.2.8
     (modules-1.2.8.tar.gz).
!verboff

Q: Mein ipppd will nicht, er bringt immer die Fehlermeldung "PPP driver 0.0.0
   is out of date".
A: Ari Biel <aribiel@sun14.hrz.th-darmstadt.de> schrieb hierzu am 3. Okt 1996:
!verbon
        Das hatte ich auch! (S.u.S.E. 4.2 Kernel 2.0.0, isdn4k-utils 3.91 mit
        patch). Als ich dann den Kernel neu kompilierte u. ppp als Modul
        konfiguriert hatte, konnte ich ipppd starten. Da gibt's wohl
        Versionsprobleme. 
!verboff

!old
Q: When I try to start ipppd it says "Can't find usable ippp device"
A: Frank Meyer <fm@textware.k.eunet.de> wrote:
!verbon
     I had the same problem. Interestingly, after about 5 minutes with
     several of those messages the ipppd said "started". And then it
     worked!  Well, I included several test prints into the ipppd
     source and located the problem: The ipppd calculates a random
     number on startup (forgot where) and uses gethostid() for
     that. That causes a DNS lookup. Then linux tries to find the
     nameserver mentioned in /etc/resolv.conf.  As ipppd isn't up it
     can't reach the name server, which gives those messages.  The
     solution was easy: I not only included my computer in /etc/hosts
     with its short name (z.B.  isdn), but also its full name
     including the domain in /etc/resolv.conf:
       x.x.x.x isdn isdn.who.knows.where
     Then it stopped complaining and just runs!  Even earlier there is
     a call from main() to setipdefault(), which (in options.c) calls
     gethostbyname().  This also causes a DNS lookup and the message
     "isdn_ppp_bind: Can't find usable ippp device".  So two lines in
     the source have to be changed to avoid the DNS lookup.  It's
     easier to include your own name in /etc/hosts, I used the ip
     address of my ethernet card.
!verboff
   Carlos Heller <carlos@mable.webtrek.de> wrote:
!verbon
     There were some changes in patch-2.0.16 that could have caused the
     problem. You can try the inoffical patch from ftp.gwdg.de
     /pub/misc/isdn/linux/ippp/isdn.dif... until it is included in the official
     patch.
     My ipppd (from my Suse distribution) was broken. The packet i4l-43b2.tar
     from !link ftp://ftp.suse.de/; helped me.
!verboff

!commenton
(The following question was taken from the syncPPP FAQ)
!commentoff
!old
Q: I can't get a connect. How can I find out where the problem is?
A: The output of ipppd is very helpful... Check whether you can find:
!verbon
   - a few "LCP-conf-req SENT" messages (less than ten) and then a
     "TERM-REF":
     -> check whether the ISDN card was configured properly. It seems the
        computer doesn't dial (IRQ, IO, protocoll wrong?)
   - at least a few "RECV" messages
     -> good: the card is dialing and the and your dialin computer tries
        to communicate. Maybe the authentification doesn't work. Check the
        ipppd configuration!
   - the message that ipppd was exited for some reason
     -> not so good... Check /var/log/messages and /var/adm/daemon.
        Could be a bug in ipppd.
!verboff

!old
Q: ipppd sometimes crashes (kernel 2.0.14...2.0.25)
A: Michael Hipp <Michael.Hipp@student.uni-tuebingen.de> wrote about this:
!verbon
     Please downgrade to 2.0.14... In later version (since 2.0.16) there is a
     little bug which causes ipppd to exit if it can't get a connection.
     (Should not be a problem once you get a connection.) A "quick and dirty
     hack" is possible by removing some lines in ipppd, but better stay with
     2.0.14 until the bugfix finds its way into the new kernels.
!verboff
   (Remark: this is the case with 2.0.26)

!old
Q: I get the message "IP frames delayed" - and I don't get a connection.
A: See last question:
   You may have forgotten to use "isdnctrl dial ippp*" before using a net
   command like telnet, ping, or the like.

!old
Q: I cannot dial out with "isdnctrl dial ippp0". It seems as if the route to
   ipppd is missing although I *did* set it ("network unreachable"). With my
   old kernel < 2.0 everything works fine!
A: In the newer kernels you have to place "route" as the very last command
   before the dialout command. Otherwise the kernel will delete the route.

!old
Q: After ipppd dials out my default route is gone.
A: It's the kernel's fault. Newer kernels (>= 2.0) have some changes in the
   routing. Workaround: install a script /etc/ppp/ip-up like this:
!verbon
     #!/bin/sh
     /sbin/route add default ippp*
!verboff
   If you make your connections manually, can use something like this script:
!verbon
   /sbin/isdn
     #! /bin/sh
     case $1 in
       on)
         /sbin/isdnctrl dial ippp0       #  build up connection
         sleep 5                         #  wait until line open
         /sbin/route add default ippp0   #  set route
         ;;
       off)
         /sbin/isdnctrl hangup ippp0     #  hangup connection
         /sbin/route del default         #  and delete route again
         ;;
       *)
         echo -e "\a Usage: 'isdn on' or 'isdn off'"
         ;;
     esac
!verboff

Q: Beim Rauswählen des pppd bekomme ich die Meldung "pppd: peer authentication
   required but no authentication files accessible." - was heißt das?
A: Wahrscheinlich wurde irrtümlich die Option "auth" angegeben. Damit
   wird von der !u1anderen!u0 Stelle verlangt, sich zu authentifiziert.

Q: Ich bekomme keine Verbindung aufgebaut - diese wird von der Gegenstelle
   abgelehnt. In den Log-Files finde ich eine Meldung, die ungefähr so
   aussieht: "sent [0][LCP ConfReq id=0x1 <mru 1500> <auth pap>
   <magic 0xcd12e9c4>"
A: Wie bei der letzten Frage wurde eine Option angegeben, die von der
   !u1anderen!u0 Stelle verlangt, sich zu authentifiziert. Diese Option
   darf nicht angegeben werden. Kandidaten hierfür: "+pap" sowie "+chap".

Q: Ich bekomme keine Verbindung aufgebaut - diese wird von der Gegenstelle
   abgelehnt. In den Log-Files findet sich eine Meldung, die ungefähr so
   aussieht: "sent [0][LCP ConfRej id=0x1 <auth pap>"
A: Dein Rechner lehnt ab, sich per Username (z.B. XXX) und Paßwort (z.B. YYY)
   auszuweisen. Das klappt nur mit den Authorisierungsoptionen "user XXX" und
   "remotename YYY" in Verbindung mit einer korrekten (!) /etc/ppp/pap-secrets
   Letztere sollte bei einem Paßwort von ZZZ idealerweise so aussehen:
!verbon
        XXX YYY ZZZ
!verboff
   Wenn's nicht gleich klappt, kann man auch Wildcards einsetzen, etwa:
!verbon
        * * ZZZ
!verboff
   Dann bekommt !u1jede!u0 Gegenstelle das Paßwort ZZZ vorgesetzt. Wird
   chap zur Authorisierung verlangt, muß /etc/ppp/chap-secrets korrekt
   eingerichtet werden. Achtung: das Format weicht von dem der pap-secrets ab!
   Unbedingt die entsprechenden README's konsultieren, oder auch:
     !link http://www.lrz-muenchen.de/~ui161ab/www/isdn/;

!old
Q: I have problems with PAP or CHAP authentication. It does not work although
   I'm sure I entered passwords etc. correctly.
A: Stefan A. Muehlenweg <Stefan.A.Muehlenweg@samhh.Hanse.DE> wrote on
   4 Oct 1996:
!verbon
     I had exactly the same problem/the same error message. The cause for it
     was that I had three entries in chap-secrets/pap-secrets (for client,
     server, secret), but not a fourth one (ip adresses). BUT: after the third
     entry were some BLANKs. After removing the trailing BLANKs and/or TABs
     (i)pppd now lives very satisfied with my auth-files.
!verboff
   Eine weitere Fehlerquelle kann das Paßwort selbst sein. Enthält
   es das Zeichen "#", dann wird alles, was danach kommt, als Kommentar
   verstanden. Analog gibt es natürlich Probleme, wenn es ein Leerzeichen oder
   einen Tabulator enthält (geht das?). Abhilfe: Paßwort in Hochkommas setzen!

!old
Q: I often get the error message "hscx_empty_fifo: incoming packet too large"
A: Probably one of the compressions is activated (i4l can't handle those very
   well). See also next question.
   Another possible reason could be an IRQ problem - see question "Why should
   I avoid IRQ 12 and 15 for my ISDN card?" in section "Teles" further down.!br
   Eine weitere Fehlerquelle berichtete Immanuel Derks <broedtsk@xs4all.nl>
   am 3. Jan 1997:
!verbon
        Mein PAP Skript war verkrüppelt, da ich ein "#" in meinem Paßwort
        hatte! Nachdem ich das Paßwort sauber gequotet hatte (z.B. mit
        Anführungszeichen) war das Problem gelöst.
!verboff

!old
Q: The connection with ipppd seems to work, but eventually it crashes.
A: It could be that some compression is activated (that i4l can't handle
   properly). Common error: "-vj" has to be used *additionally* to "-vjccomp"
   (it completly switchs off the VJ compression) - the example scripts coming
   with ipppd don't have that option included already.
   Other compression modes (bsd, pccomp) can cause trouble, too.

Q: Der ipppd macht (erst dann) Schwierigkeiten, wenn die Verbindung stark
   belastet wird. Dann hängt alles. Woran kann das liegen?
A: Hierzu schrieb Sven Engelhardt <sven@sik.de> am 12. Dez 1996:
!verbon
          Wir sind ISP hier in Dresden und setzen u.a. Linux für unsere Zugänge
        ein (sowohl I4L mit hisax als auch externe Terminaladapter) Wir haben
        das Problem vor allem mit Windows-95 und NT-Kunden, die die
        "eingebaute" (DFÜ-Netzwerk)-Software benutzen. Dabei ist es völlig
        egal, ob sich der Kunde mit async oder sync-PPP einwaehlt. Auch ist
        egal, welche Modememulation er auf seiner Seite benutzt. Allen Fällen
        ist gemein, daß die Einbindung über Microsoft-DFÜ-Adapter+Microsoft-
        PPP erfolgt. (ein Kollege erzählte mir neulich von einem ähnlichen
        Problem mit einem Macintosh-Kunden)
          Da es bei PPP ziemlich egal ist, wer Server ist und wer Client, frag
        mal deinen ISP über welche Technik Du dich einwählst. (mit
        Linux-Kunden und Trumpet-Winsock-Nutzern z.B. haben wir >>null<<
        Probleme (Ich schließe daraus einen Bug in MS-PPP)
          Folgender Workaround hilft bei uns aber in der Regel: (ist kein
        Heilmittel, hilft aber die Schmerzen zu lindern...)
          * Verringern der Max-MTU auf 576 oder gar (296)
          * Verringern des DefaultRcvWindow auf 2144
         Auf der Windows-95-Seite sind das zwei Registry-Einträge, auf der
        Linux-Seite kannst Du mal "mtu 576" und "mru 576" in den ppp-Optionen
        eingeben.
        (ffs. !link http://www.windows95.com/connect/trouble.html;)
!verboff
   Erik Corry <ec@sign-tronic.dk> ergänzt am 16. Dez 1996:
!verbon
        Also, bei mir haben weder PPP-compressions-options geholfen, noch
       mru/mtu auf 296. Was aber gut geholfen hat, war der AT-Befehl:
         AT&B512
       der die maximal verschickten Pakete auf 512 Bytes begrenzt.
!verboff

Q: Mein ipppd funktioniert, aber ich bekomme immer wieder die Meldung
   "pppd[104]: ioctl(SIOCSIFMTU): Invalid argument"?
A: Andreas Steffan <deas@rrz.uni-hamburg.de> schrieb hierzu am 11. Dez 1996:!br
   Lange habe ich rumspielen muessen bevor ichs schließlich gefunden habe.
   Ich mußte in /etc/ppp/options.ippp0 noch eine Zeile
!verbon
        mtu 1024
!verboff
   einfuegen. Komisch ist es allemal, aber jetzt habe ich endlich Ruhe.
   [wird mtu nicht angegeben, dann wird als default-Wert u.U. "0" angenommen -
   was natürlich nicht funktionieren kann... - die Red.]

!old
Q: The first ip packet gets lost on automatic dialout with dynamic ip address
   allocation.
A: There are some dialout problems in connection with sync ppp and dynamic ip
   address allocation. In this case your ip address will change while packets
   are waiting to be sent. All packets that should be sent before the change
   in ip address are "hung".
   Workaround:
   Before connecting with telnet, ping, or the like dial out manuelly with
   "isdnctrl dial ippp*".
   Stefan A. Muehlenweg <Stefan.A.Muehlenweg@samhh.Hanse.DE> wrote:
!verbon
     Yesterday I got a permanent ip address and since then the automatic dial-
     out via ipppd works beautifully. The same goes for the serial interface
     with async ppp over V.120 and diald (per ELSA Microlink ISDN/TLpro ---
     also over the V.34 modem). I had the same symptoms there in the past.
     Summary: When using automatic (!) dialout you definitely need a permanent
     ip address. If you start and end your connection manually (!) then you can
     live with dynamic address allocation.
     It surely is time to extend ppp's functionality to not only hold outgoing
     packets that initiate a connection, but also correct the ip address to the
     new address before sending it out. The same goes for other packets that
     arrive before the connection is up.
     Also diald has to get that functionality to control when the connection
     goes up or down.
!verboff     
   Ein Lösungsvorschlag kam am 5. Jan 1997 von Erik Corry <erik@arbat.com>:
!verbon
        1) Keine lokale Name-Server/Name-Server-Cache
        2) Lokale Squid Proxy-WWW-Server (und Netscape muss ihn benutzen).
        3) positive_dns_ttl auf 1 setzen in /usr/local/squid/etc/squid.conf
           damit Squid nicht die IP-Adressen cachet
          Jetzt wird die Verbindung immer gestartet mit der DNS-
        Anfrage, der immun ist gegen IP-Adresse-Änderungen (weil er
        mit UDP und nicht TCP laueft?). Wenn du andere Programme
        hast, die IP-Adressen cachen, musst du dir ueberlegen wie
        das umgangen werden kann. Normalerweise wird ein Program
        die IP-Adresse chachen, wenn es 2 mal zur selben Server
        connectet. Das ist natürlich kein Problem, wenn die
        beiden Verbindungen so kurz nacheinander erfolgen, daß
        die Dial-On-Demand-Verbindung noch die selbe ist.
!verboff
   [Der pppd soll ab Version ebenfalls dial-on-demand unterstützen - vielleicht
   wird es dann besser - die Red.]

Q: Beim Ausführen von "isdnctrl mapping <line> <MSN>,..." kommt es zum Fehler
   "bad address".
A: Bernd Oerding <erni@nukleus.escape.de> schrieb dazu am 9. Nov 1996:!br
   Grund für den Fehler: im Kernel wird ein 255 Byte grosser Block aus dem
   Userspace erwartet, dieser muß jedoch nicht vorhanden sein, wenn der
   Pointer auf argv0 zeigt. Der angehängte Patch fixed das Problem auf
   USER-Ebene, nicht schön aber tut.
!verbon
        *** 1.14        1996/06/06 22:08:46
        --- isdnctrl.c        1996/09/04 19:13:39
        ***************
        *** 498,504 ****
                  }
                  printf("MSN/EAZ-mapping for %s:\n%s\n",argv[2],nstring);
                } else {
        !         iocts.arg = (unsigned long)argv[3];
                  if ((result=ioctl(fd,IIOCSETMAP,&iocts))<0) {
                    perror(argv[2]);
                    exit(-1);
        --- 498,506 ----
                  }
                  printf("MSN/EAZ-mapping for %s:\n%s\n",argv[2],nstring);
                } else {
        !         char buf[400];
        !         strncpy(buf, argv[3], sizeof(buf)-1);
        !         iocts.arg = (unsigned long)buf;
                  if ((result=ioctl(fd,IIOCSETMAP,&iocts))<0) {
                    perror(argv[2]);
!verboff
   [Es wurde auch schon berichtet, daß das Anhängen von "/sbin" an den Pfad
   (Environment) geholfen hat. Zum Debuggen von cron-Skripten läßt sich
   übrigens vortrefflich "set -x" einsetzen - die Red.]

Q: Was hat es mit der Meldung "No phone number, packet dropped" auf sich?
A: Michael Engert <michi@bello.wor.de> schrieb dazu im Nov/Dez 1996:!br
   Das bedeutet, daß Dein Computer ein IP-Paket für jemanden hat, der vor
   einigen Sekunden eingeloggt war, aber mittlerweile die Verbindung
   beendet hat. Dein Computer versucht nun dieses Packet weiterzuleiten und
   findet die geeignete Route. Das Interface isdn[0|1|...] kann jedoch nicht
   die Gegenstelle erreichen, weil es keine Telefonnummer zum Wählen hat.

Q: Warum wählt mein ipppd eine Null zuviel ("isdn0: dialing 0 089XXXXXX...")?
   Ich habe doch gar keine Nebenstellenanlage!
A: Die erste Null wird gar nicht gewählt. Sie zeigt lediglich an, welcher
   Kanal zum Wählen verwendet wurde.

!commenton
(The following question was taken from the syncPPP FAQ)
!commentoff
!old
Q: My ISDN device is shown with HWaddr and IRQ=0 and base address = 0 when I
   list it with ifconfig
A: The ISDN device fakes an ethernet device. It ignores IRQ and baseaddr and
   just needs the HWaddr for the ethernet encapsulation.


!3ISDN in a network

!old
Q: xosview doesn't show any network activity since installing i4l.
A: Peter Hettkamp <Peter.Hettkamp@kassel.netsurf.de> wrote:
!verbon
     xosview reacts, at least for me with version 1.4, to the IP accounting
     in the kernel. So, configure, if necessary build a new kernel, then 
     couple with:
       ipfwadm -A -a -S your-ip-address-here -D 0.0.0.0/0
       ipfwadm -A -a -D your-ip-address-here -S 0.0.0.0/0
     (I don't know who it works with variable IP addresses. I have a fixed
     address.)
!verboff

!commenton
Rainer May <r_may@khavi.desaster.heide.de> has put together questions and
answers on "i4l and Masquerading:
!commentoff

!old
Q: When I for example from a W95 box call up a page with Netscape,
   I only get the answer "unknown host".
A: What is entered on the "Win95 box" for the name server? As long as the 
   router has no name server of its own, then the provider's name server 
   of course has to be entered on all computers on the LAN
   
!old
Q: Adresses are now found, but now instead of the page I want I get 
   the message "no route to host".
A: Please check:
!verbon
   * Is the Linux computer entered as the gateway? (Some 'operating systems'
     have to be restarted before changes to the networking take effect)?
   * Does the router have a default route to the prepared interface to the
     provide (e.g. ippp0 with syncPPP or sl0 for diald (even when the real
     connection is over ppp0, diald uses a slip interface as a "doorknob")
   * Does the provider require the use of proxies? Then the addresses  
     of the proxies have to the entered in the appropriate clients on the LAN
     computers
!verboff

Q: Nach dem Booten ist mein lokales Netzwerk nicht mehr erreichbar. Ich
   verwende das Netzinterface ippp0 mit ifconfig 0.0.0.0; die Defaultroute
   zeigt auf ippp0.
A: Wolfgang Barth schrieb dazu am 5. Jan 1997:
!verbon
          Mir ist dabei aufgefallen, dass nach dem ersten Verbindungsaufbau via
        ippp0 das lokale Netzwerk wieder erreichbar ist. Dann steht auch in
        ifconfig ippp0 nicht mehr die 0.0.0.0 drin, sondern eine zugewiesene
        IP-Adresse aus dem Pool der Gegenstelle, die bei einem neuen
        Verbindungsaufbau neu gesetzt wird.
          In de.comp.os.linux.networking wurde der Thread bereits diskutiert,
        und es kam eine Lösungsmöglichkeit:
          Einfach auf ippp0 eine Dummy-IP-Nummer aus dem Pool setzen. Das
        lokale Netzwerk hat auch direkt nach dem Booten trotz default route
        keine Probleme mehr, und die IP-Nummer in ifconfig ippp0 wird sowieso
        überschrieben.
!verboff


!3Isdnlog

Q: My isdnlog 2.50 doesn't work since I installed HiSax 1.2.
A: Isdnlog needs to be patched... you can find the patch everywhere where 
   HiSax is found.

Q: Ich habe isdnlog gepatcht, aber es funktioniert trotzdem nicht mit HiSax
   zusammen (Isdnlog startet mit den üblichen Meldungen, es passiert aber
   nichts)?
A: Andreas Kool <akool@Kool.f.EUnet.de> schrieb dazu am 6. Jan 1997:
!verbon
        Ist bei den "üblichen Meldungen" auch ein
          "(HiSax driver detected)"
        dabei?
        Falls nein:
        - hast du die Version 2.52 auch gestartet - nicht nur compiliert?
        - hast du das "telesctrl <DriverID> 1 4" auch nicht vergessen?
        - ISDN-Verbindungen funzen ansonsten schon?
        Falls ja: Melde dich mal bei mir (isdnlog@Kool.f.EUnet.de) mit
        den entsprechenden Log-Files (mit "isdnlog -v7" erstellt).
!verboff

Q: Isdnlog (>=2.52) zeigt mir für einem Anrufer !u1zwei!u0 Telefonnummern an!
   Welche gilt denn jetzt?
A: Der Anrufer hat wahrscheinlich das (kostenpflichtige) Feature CLIP
   (= Calling Line Identification Presentation, no screening) aktiviert, mit
   dem er eine beliebige Telefonnummer übermitteln kann. Siehe dazu die Frage
   "Ich habe gehört, es werden eigentlich zwei Caller Id's übermittelt?".!br
   Andreas Kool <akool@Kool.f.EUnet.de> schrieb weiterhin am 26. Jan 1997:!br
   Reinlegen kann man damit allerdings nur Software/Telefonanlagen,
   die den Screening-Indicator nicht auswerten - isdnlog ab Version 2.52
   zeigt die richtige, *und* die gefakte Telefonnummer an.!br
   ...eigentlich gedacht ist CLIP, no screening z.B. für die Übergänge von
   firmeneigenen Telefonnetzen in das öffentliche Netz.

!old
Q: Bei Anrufen erhalte ich einen "Internal error: wrong structure".
A: Wahrscheinlich stimmt die Konfiguration in isdnlog.cf nicht. Auch gleiche
   MSNs mit unterschiedlicher Dienstekennung müssen separat gezählt werden
   (für den Eintrag unter MYMSN).
   Steffan Henke <henker@Informatik.Uni-Bremen.de> schrieb dazu auch:
!verbon
        Mein Problem mit isdnlog 2.50 und dem "wrong structure error" lag nur 
        darin, daß ich keine führende 0 bei den Aliases angegeben habe. 
        Beispiel:
          017201234567     Handy           1 -
        Bei mir sah es vorher so aus:
          *17201234567     Handy           1 -
        Damit scheint alles behoben zu sein.
!verboff

!old
Q: Isdnlog crashes with a "segmentation fault".
A: Dirk Lutzebaeck <lutzeb@wadk-berlin.de> wrote:
!verbon
     For me, isdnlog crashed because it was not entered in /etc/services
!verboff

     
Q: Ich habe mir Skript angelegt, das Sounds per cat auf /dev/sound oder
   ein anderes Device abspielt. Wenn mehrere Ereignisse eintreten, dann gibt es
   einen Fehler: "Can't open output file '/dev/sound': Device or resource busy"
A: Andreas Kool <akool@Kool.f.EUnet.de> schrieb dazu am 6. Nov 1996:!br
   Dagegen hilft nur, eine obere Instanz zu schaffen, die das koordiniert.
   Ich persönlich verwende NAS (Network-audio-system), das "rplay" Zeuch
   sollte jedoch genauso gut verwendbar sein!

Q: Isdnlog soll ein Programm mit Ausgabeumleitung ausführen (z.B.
   "play anruf.au 2>/dev/null" ). Warum meldet isdnlog "Can't start
   '/usr/local/bin/play anruf.au 2>/dev/null' with execvp()"?
A: Andreas Kool <akool@Kool.f.EUnet.de> schrieb dazu am 6. Nov 1996:!br
   Weil isdnlog keine (Bourne) Shell ist ;-) isdnlog kann nur "echte"
   Programme starten.!br
   Kurz und knapp: Obiges Beispiel muß als ausführbare Datei (-> chmod +x)
   mit folgendem Kontext abgespeichert werden:
!verbon
        #!/bin/sh
        /usr/local/bin/play anruf.au 2>/dev/null
!verboff

Q: Warum beendet sich isdnlog bei einem "kill -1", laut Doku sollte nur die
   isdnlog.conf neu eingelesen werden.
A: Andreas Kool <akool@Kool.f.EUnet.de> schrieb dazu am 6. Nov 1996:!br
   Ist ein echter Bug in isdnlog-2.5x, der schon behoben wurde.
   isdnlog-2.60 (comming soon ;-) kann das besser!

!commenton
(The following question and answer is from Andreas Kool
<akool@Kool.f.EUnet.de>)
!commentoff

!old
Q: Isdnlog takes 100% of the CPU time
A: isdnlog-2.4x has 2 possibilites to take the entire CPU time or even
   to stop working altogther
!verbon
   - right when starting isdnlog or isdnrep:
     Here the 2 programs have choked trying to read "isdnlog.conf"
     Solutions:
     - never use blanks in the alias columnn!
       (e.g.: "My MSN")
     - never use "#" in the alias column!
       (e.g.: "MSN#3")
     - never use "\" in the alias column!
       (z.b.: "MSN\#3") (Thank you, Holger Wirtz <chick@midips.snafu.de>)
     - never use "*" as the entry in the flags column!
       (Thank you, Werner Wiethege <ww@slarti.frankfurt.netsurf.de>)
     - the "START=" line requires an entry indicated_when_ it is to be started
         for example
         START=IOH=auplay hangup.au
       and _not_
         START=auplay hangup.au
       (Thank you, Dirk Staneker <zxmjy04@student.uni-tuebingen.de>)
   - when using the "-S" option to start external programs.
     Here isdnlog ran into the code the X11 client "xisdn"
     and started looping in itself, leaving behind zombies -  this was fixed
     in isdnlog-2.50.
!verboff

!old
Q: The telecom is paying me (according to isdnlog/isdnrp) 12 pfennigs 
   (1 unit) for each connection...
A: You wish... Christian Bruehe <oblomow@cs.tu-berlin.de> wrote:
!verbon
     I recently had the same effect when I mistakenly started isdnlog twice
!verboff

Q: Laut isdnlog kostet mich jedes "Besetzt" 45 Einheiten?
A: Das ist ein Bug der älteren isdnlog-Versionen (z.B. 2.41) im Zusammenhang
   mit dem ISDN-Merkmal Rückruf bei Besetzt. Natürlich kostet dieses Besetzt
   nicht wirklich 45 Einheiten.

Q: Ich habe Probleme, isdnlog mit libc 5.4.7 zum Laufen zu bekommen!
A: Christian Schlittchen <corwin@amber.hb.north.de / corwin@zfn.uni-bremen.de>
   schrieb am 8. Okt 1996:
!verbon
        Isdnlog habe ich inzwischen gepatcht. Das Problem ist der strftime()-
        Aufruf in Zeile 264 in isdnlog.c. Dort muß das "%e" durch ein "%d"
        ersetzt werden, dann geht wieder alles.
!verboff

Q: Beim Rauswählen wird immer kurz der Bildschirm schwarz?
A: Roger F. Brand <roger@rz.uni-frankfurt.de> schrieb dazu am 12. Feb 1997:
   Ich denke, das liegt am isdnlog. Wenn Du ihn mit der Option -t 1 
   oder -t 2 gestartet hast, wird eine Synchronisation mit der Uhrzeit
   der digitalen Vermittlungsstelle durchgeführt. Dabei kommt es
   zur kurzfristigen Ausblendung des Bildschirms.



!3Audio

!old
Q: My vboxgetty does not answer any incoming calls.
A: vboxgetty needs ".vboxrc" in the home directory of the user for which
   vboxgetty is configured. The number of rings is taken from this file.

!old
Q: Mein vboxgetty hebt schon beim ersten Klingeln ab, obwohl ich die Anzahl
   der Rings auf 4 gesetzt habe.
A: Die RINGS werden von einem Timer im isdn-modul erzeugt, der nicht unbedingt
   akkurat verzögert.
   Konfiguriert man vboxgetty für 30 Rings, wird etwa zum 5. Klingeln abge-
   hoben.

!old
Q: My vbox 1.1 does not work together with HiSax.
A: Use HiSax >=1.2. This version includes correct alerting.

!old
Q: Ich vboxgetty hat eine Nachricht für mich in einem Format aufgezeichnet,
   das ich nicht mit "cat xxx>/dev/audio" abspielen kann. Wie kann ich die
   Nachricht doch noch abhören?
A: vboxgetty kann alle Formate abspielen. Hilfsweise kann man daher einfach 
   die eingegangene Nachricht als Ansagetext verwenden, und sich selbst 
   anrufen... :-) (und hinterher nicht vergessen, wieder auf den originalen 
   Ansagetext umzustellen :-) ).

Q: Am Anfang einer von vboxgetty aufgezeichneten Nachricht befindet sich
   oft noch ein Teil meiner Ansage?
A: Das ist ein bekannter Bug, der irgendwie beim Umschalten zwischen Abspielen
   der Ansage und Aufzeichnung des Anrufers sein Unwesen treibt. Bisher ist
   noch kein echter Workaround bekannt.

!3Dialout on demand

Q: Wie kommt es zum Gebühren-GAU?
A: Dazu gibt es mehrere Möglichkeiten.!br
   1. Es wurde "Bridging" ins Kernel eincompiliert (siehe dazu die
   entsprechende Frage weiter unten).!br
   2. Broadcasts der Interfaces werden per ISDN weitergeleitet (siehe dazu die
   entsprechende Frage weiter unten).!br
   3. Sind noch IP-Verbindungen beim Schließen der Leitung offen, dann ist bei
   dynamischer Vergabe der IP-Adressen der Gebühren-GAU vorprogrammiert. Es
   wird eine neue Leitung aufgebaut mit dem Ziel, die noch offenen
   IP-Verbindungen abzubauen. Wegen der unterschiedlichen IP-Adressen können
   diese jedoch nicht abgebaut werden - die Leitung wird wieder geschlossen.
   Dann sind die IP-Verbindungen immer noch offen, es wird wieder neu
   gewählt... usw. (siehe dazu die entsprechende Frage weiter unten).

Q: Seitdem ich einen neuen Kernel installiert habe, baut mein Rechner dauernd
   ISDN-Verbindungen auf, ohne Daten zu übertragen (Kosten!).
A: Vielleicht wurde versehentlich die Kerneloption "Bridging" aktiviert?

Q: Mein Router möchte ständig rauswählen (tut er auch) aber es werden
   !u1KEINE!u0 Daten übertragen, weder ipfwadm -Al noch tcpdump -i isdn0
   zeigen etwas an.
A: Michael Pieper <michael@nexus1.tng.oche.de> schrieb hierzu am 10. Nov 1996:!br
   ARP-Requests oder Broadcasts? Du solltest das ifconfig für die
   ISDN-Devices mit den Optionen -arp und -broadcast durchführen, um
   Verbindungsaufbauten dadurch zu vermeiden.

Q: Nach dem Schließen der Leitung entdecke ich per "netstat -nt", daß noch
   IP-Verbindungen offen sind. Wie kann ich diese manuell schließen?
A: Gernot Zander <hifi@scorpio.in-berlin.de> schrieb hierzu am 18. Jan 1997:!br
   Du kannst das Interface erst "down" und dann wieder "up" setzen. Wenn Du das
   tust, wird es versuchen hinauszuwählen. Wenn Du dann die ausgehende
   Telefonnummer entfernt hast, dann wird "no outgoing number..." in syslog
   angezeigt, und sobald das interface "up" ist, scheinen alle Verbindungen
   geschlossen zu sein.

Q: Wie kann ich Dialout on Demand sicher abstellen?
A: Gernot Zander <hifi@scorpio.in-berlin.de> schrieb hierzu am 10. Jan 1997:!br
   Ich lösche die Telefonnummer des Interface [bzw. setze eine ungültige - die
   Red.]. Dann sehe ich an der Beschwerde im Syslog auch gleich noch, ob und
   wann ein Prozeß Pakete in die Welt schicken wollte.!br
   Sascha Ottolski <sascha@alzhimer.isdn.cs.tu-berlin.de> ergänzte
   am 28. Okt 1996:!br
   Also bei mir passiert genau das, was Du möchtest: Wenn das ISDN-System
   "down" ist, meldet Netscape sofort einen Fehler a la "the Server doesn't
   have a DNS entry" oder ähnlich. Vermutlich mußt Du die route löschen, damit
   das passiert. Bei mir läuft das so:
!verbon
        /sbin/route del default
        /sbin/isdnctrl system off
        /sbin/ifconfig ippp0 down
!verboff
   Und damit's dann wieder läuft:
!verbon
        /sbin/isdnctrl system on
        /sbin/ifconfig ippp0 up 
        /sbin/route add $GATE-IP dev ippp0
        /sbin/route add default ippp0
!verboff
   [Die letzte Methode hat jedoch den Nachteil, daß kein Dial-In mehr möglich
   ist! - die Red.]

Q: Wie kann ich sonst noch den Gebühren-GAU verhindern?
A: In der nächsten Version kann isdnlog (>2.52) als Watchdog fungieren und
   solche Dialouts abwürgen (notfalls über ein Reboot des Rechners).

Q: Kann es passieren, daß trotz abgestürztem Rechner eine ISDN-Verbindung
   aufrechterhalten wird (und damit Gebühren kostet)?
A: Karsten Keil <keil@temic-ech.spacenet.de> schrieb dazu am 11. Feb 1997:
   Ich vermute, man will mit diesen Status enquiry [in der Schweiz - die Red.]
   einfach sicherstellen, daß wenn was auf der Userseite abgestürzt ist, die
   Verbindung getrennt wird. Das ist zusätzlich zur Layer 2 Ueberwachung und
   nicht ganz sinnlos, da bei vielen Karten/Endgeräten der ISAC im Automodus
   gefahren wird und damit ein Rechnerabsturz die Verbindung aufrechterhalten
   würde.!br
   Bei i4l wird der ISAC allerdings im nonauto Mode betrieben, d.h. wenn keine 
   Interrupts mehr bearbeitet werden, wird die Verbindung spätestens nach ca.
   1/2 Minute getrennt. Der NonAuto Mode hat zwar einen anderen Grund, ist aber
   auch ein Sicherheitsfeature ;-), was aber nicht heißt, daß ein Gebühren-Gau
   unmöglich ist.

Q: Wie komme ich unerklärlichen dialouts auf die Spur?
A: Dirk Lutzebaeck <lutzeb@wadk-berlin.de> schrieb dazu am 5. Nov 1996:
!verbon
        Leider gibts meines Wissens nach für tcpdump noch keinen patch für sync
        ppp encapsulation. Wenn du ipppd benutzt bleibt Dir deshalb nur die
        Möglichkeit, konsequent einen daemon nach dem anderen abzuschalten und
        sehen ob Ruhe im Karton ist. Insbesondere named, sendmail aber auch
        smbd (Samba) sind Kandidaten, die gerne Verbindungen aufbauen.!br
!verboff
   [Zu tcpdump siehe die entsprechende Frage im Abschnitt "Allgemein" im
   Kapitel "Konfiguration". Zu named und sendmail siehe die nachfolgenden
   Fragen - die Red.].!br
   Christoph Trautwein <trautw@fzi.de> schrieb weiterhin am 5. Nov 1996:
!verbon
        Ich habs auch nur durch Killen verdächtiger Prozesse rausgefunden.
        Genaueres zum Suchen der Prozesse und wie man sie still bekommt gibts
        unter:
          !link http://www.fzi.de/sim/people/trautw/i4l/index.html;
!verboff
   Herbert Rosmanith <herp@wildsau.idv.uni-linz.ac.at> schrieb noch am
   24. Nov 1996:
!verbon
        Probier mal rauszufinden, welche Anfrage das auslöst, und zwar mit
        "isdnctrl verbose 3". dann sollte in der kernel-message-queue (siehst
        Du wenn Du "dmesg" tippst) ein Eintrag a'la:
          OPEN: 141.76.60.54 -> 193.171.67.253 TCP, port: 1686 -> 540
        aufscheinen. das obige beispiel heisst, dass unser rechner auf port 540
        post abholen will (uucp over tcp/ip over isdn).
!verboff
   [geloggt wird aber immer nur das auslösende Packet - die Red.]!br
   Stefan Luethje <luethje@sl-gw.lake.de> schrieb weiterhin am 27. Nov 1996:
!verbon
        Ein kleiner Tip noch. Es gibt viele Daemons auf der Linux-Seite, die
        Broadcast auf allen Interfaces versenden. Das führt auch häufig zum
        Autodial.
        Da kann man die broadcast-Adresse auf das dummy0-Interface umlenken.
        Ist zwar nicht sauber, aber tut.
!verboff
   Siehe zu diesem Thema auch die letzte Frage.

Q: Kann es sein, daß mein am Netz angeschlossenes Win95 irgendwie die
   unmotivierten Herauswahlen verursacht?
A: Stefan Luethje <luethje@sl-gw.lake.de> schrieb dazu am 27. Nov 1996:
!verbon
        Wenn beim Wintel der Nameserver des Providers eingetragen ist, und
        Sinnlos3.11/95 gestartet wird, muß (warum weiß nur Bill Gates) er
        sich unbedingt mit dem Nameserver unterhalten.
!verboff

Q: Ich habe einen lokalen DNS-Nameserver eingerichtet. Warum kommt es immer
   noch zu unerwünschten Herauswahlen durch den Nameserver? Wie finde ich den
   Übeltäter?
A: Jens Ey <jens@jeyhh.shnet.org> schrieb dazu am 29. Nov 1996:!br
   Schalte mal Debug-level 1 beim named ein und schau Dir das Logfile
   in /var/tmp an.!br
   Bei mir finden sich da regelmäßig DNS-Anfragen von Windoof-Mühlen.
   Problem dabei ist, daß gerne nach so Sachen wie WORKGROUP.domain.de gefragt
   wird u.ä. Es werden also Namen gefragt, die der DNS beim besten Willen
   nicht kennen kann. Ich nehme mal an, dass der Sinnlos-Rechner auf der Suche
   nach seinem Masterbrowser ist oder einen Domainen Controller finden will.!br
   Das ganze hat mich in einem Netzwerk mit Internet-Zugang bei Linux mal so
   genervt, dass ich einen externen Terminaladapter eingesetzt habe, einen
   Proxy-Server eingerichtet habe und diald dann so konfiguriert, dass
   DNS-Anfragen nur noch vom Linux-Rechner durchgeführt werden dürfen.
   Damit wird die Verbindung dann nur noch aufgebaut, wenn sie wirklich
   gebraucht wird. Der (cachende) lokale DNS kommt dann nur noch zum Einsatz,
   wenn die Verbindung schon oben ist.

Q: Wie kann ich die DNS-Anfragen meines Win95-Rechners nach WORKGROUP.xxx
   abschalten?
A: Eike Stepper <isdn@esc-net.de> schrieb dazu am 30. Nov 1996:
!verbon
        Warum stellst du nicht einfach das Windows-Setting im Netzwerksetup:
          "Use DNS for Windows Names Resolution"    (oder ähnlich)
        auf No?
        Dann müßte Ruhe sein, zumindest bei mir ist es so.
!verboff

Q: Wie bringe ich sendmail dazu, von sich aus keine Verbindungen mehr
   aufzubauen, ohne daß lokale Mail liegenbleibt?
A: Zunächst muß man sendmail dazu bringen, keine DNS-Verbindungen mehr
   aufzubauen. Dazu sollte man folgende Features angeben: "nodns",
   "nocanonify".!br
   Falls man einen Rechner als smarthost einträgt, muß man dafür sorgen, daß
   dieser Name nicht zu einem Aufruf des Nameservers führt. Dazu trägt man
   entweder nur die IP-Adresse direkt ein, oder man ergänzt den Namen in
   /etc/hosts (/etc/host.conf sollte entsprechend "order hosts bind"
   enthalten)!br
   Weiterhin erklärt man alle nicht lokalen Mailer als teuer/expensive
   ("define(SMTP_MAILER_FLAGS, e)"), und verbietet sendmail mit
   "define(`confCON_EXPENSIVE', `True')", teure Mailer von sich aus
   anzuwählen. Der Aufruf von Sendmail darf für die Option "-q" keine
   Zeitangabe mehr enthalten (z.B. also nur "-bd -os -q"). "-os" bedeutet,
   daß alle Mail gequeued wird (was nicht verhindert, daß lokale nicht
   auch sofort zugestellt wird). Einziger Haken: beim Booten will sendmail
   evtl. vorhandene Mail versenden, obwohl das Netzwerk noch nicht oben ist.
   Dazu sollte man beim Booten vor dem Start alle zuzustellende Mail aus
   /var/mqueue entfernen - um diese nach dem Start von sendmail wieder
   zurückzuschieben.!br
   Mail an teure=entfernte Mailer wird nun nur noch beim expliziten Aufruf
   von "sendmail -q" zugestellt.

Q: Das Samba-Paket löst bei mir dauernd Herauswahlen aus. Wie kann ich das
   unterbinden?
A: Andreas Glahn <andreas@tao.westfalen.de> schrieb dazu am 31. Jan 1997:
   Hatte ich auch mal. Bei mir habe ich dann beim Aufruf des Samberdämons
   die interne IP-Adresse, welche ich nur zu Hause verwende, mitübergeben.
   Seitdem wird ein SambaRequest nicht mehr auf default geschickt, sondern
   bleibt im Haus.!br
   Mal die Konfiguration mit netstat und TCPDUMP ansehen. Mit TCPDUMP bekommt
   man schnell heraus, mit welcher IP Samba versucht, eine Verbindung
   aufzubauen.!br
   Bei mir hat mein InternerLinuxRechner z.B.: 192.168.99.99!br
   Mein Win95-Rechner:                         192.168.99.88!br
   Auf dem Linuxrechner habe ich dann Samba mit:
!verbon
       nmdb -S -B 192.168.99.255 -I 192.168.99.99
!verboff
   gestartet.!br
   Siehe auch die Frage oben: -broadcast und evtl. -arp bei der Definition der
   Interfaces angeben!

Q: Wie gewöhne ich Netscape ab, beim Start eine Herauswahl zu initiieren?
A: Wahrscheinlich wurde in den Einstellungen eine Homepage eingetragen, die
   nicht lokal vorliegt. Nur eine, die Netscape sofort laden kann, (z.B.
   "file://localhost/xxx") verursacht keine sofortige Herauswahl. Alternativ
   kann man auch einen Cache-Daemon einrichten, der haeufig benoetigte Seiten
   speichert.!br
   Ein angegebener Proxy sollte keine Herauswahl verursachen, auch wenn der
   komplette Rechnername eingetragen ist. Lediglich bei der Neueintragung
   versucht Netscape, die IP-Adresse einmalig via DNS abzufragen (und kann in
   diesem Sonderfall eine Herauswahl verursachen).
   Am 17.Mar.97 schrieb uns Steffan Henke <henker@Informatik.Uni-Bremen.DE>
   hierzu aber:
!verbon
        Leider hat uns die Realität überholt - soweit ich gehört habe,
        baut Netscape z.B. jetzt in der Version 4.02 tatsächlich eine 
        Verbindung auf...
!verboff


!3Chargeint

!old
Q: The connection doesn't end with timeout. Possible reason: my service
   provider uses a Cisco router which sends a "keep alive" packet every ten
   seconds.
A: Winfried Haug <haug@seicom.net> wrote:
!verbon
     If the Cisco doesn't get an answer for its keep alive packets then it will
     stop routing! That normally happens after the 4. or 5. keep alive packet.
     The best solution is to tell the provider not to use keep alive packets
     ("no keepalive" in the Cisco configuration).
     There is NO REASON to use keep alive packets, especially between two Cisco
     routers and on leased lines.
!verboff


!old
Q: My Internet provider won't switch off keep alive packets so ipppd never hangs
   up.
A: Dirk Melchers <dirk@merlin.nbg.sub.org> wrote about this:
!verbon
     LCP messages are considered traffic and keep the line open. There was a
     little patch for kernel 2.0.21 in relation with the patch chargeint-2.04
     for isdnlog-2.50. This patch ignores *all* syncPPP LCP data for the
     calculation of the hangup timer, so hangup works even with LCP-echo-
     requests.
     Warning: The code works for *me* and my provider. I don't know if it will
     work for *you*. Just try it!
!verboff
    If you need the patch, mail Dirk Melchers.

Q: Der "lcp-keep-alive"-Patch klappt nicht - ipppd hängt immer noch nicht auf.
A: Es kann sein, daß nicht die LCP-Pakete eine Verbindung offenhalten, sondern
   OSPF-Routing Updates. Das Verschicken dieser Updates kann entsprechend nur
   auf der Cisco ausgeschaltet werden. Eddy PE1CIG <eddy@sys2.pe1cig.ampr.org>
   schrieb dazu folgenden Tip am 27 Dez 1996:
!verbon
        Nach einigen Experimenten kam ich zu einer Lösung auf der Cisco
        (IOS 11.0.7), das "snapshot routing" genannt wird. Ich konfigurierte
        "snapshot server" auf dem BRI-Interface. Das bedeutet es wird nur dann
        Routing Updates verschicken, wenn es diese auch durch dieses Interface
        empfängt.
!verboff


!3Dial-in

Q: Ich bekomme immer wieder die Meldung "isdn_tty: call from XXX -> YYY
   ignored". Warum ignoriert isdn4linux (syncPPP) den Einwahlversuch?
A: Dafür kann es zwei Erklärungen geben. Entweder wurde die eigene MSN (hier:
   YYY) nicht richtig per "isdnctrl eaz <interface> YYY" gesetzt. Oder es
   wurde "isdnctrl secure <interface> on" gesetzt, ohne die hereinkommende
   Nummer (hier: XXX) mit "isdnctrl addphone <interface> in XXX" zu erlauben.

!old
Q: I've configured several ippp* devices. Each incoming call "uses up" one
   device, until there is no device available any more.
A: That's a known bug. There is a patch available to fix it.
   Manfred.Dill <manfred.dill@bmw.de> wrote about this:
!verbon
     In the module isdn_net.c (line 1720) there is a comment "/* if this
     interface is dialing, it does it probably on a different device, so free
     this device */" and function isdn_free_channel is called.
     [...]
     It looks now like this:
       #ifdef CONFIG_ISDN_PPP
       if (p->local.p_encap == ISDN_NET_ENCAP_SYNCPPP)
       ippp_table[lp->ppp_minor]->state = IPPP_OPEN;
       #endif
!verboff
   It can be assumed that this will be fixed in an improved ipppd.

Q: Ich habe mit "isdnctl pppbind" eine exklusive Bindung hergestellt. Leider
   löscht sich diese bei einem hereinkommenden Anruf.
A: G. Richter <richter@ecos.de> schrieb dazu an Michael Hipp
   <Michael.Hipp@student.uni-tuebingen.de> am 2. Nov 1996:
!verbon
        > ... ich habe den Code mal durchsucht und tatsaechlich
        > eine moegliche Fehlerquelle bei reinkommenden Anrufen
        > ausgemacht. Trifft das auf dein Szenario zu?
        > Wenn ja, mal die Zeile: (isdn_net.c, etwa Zeile 1730)
        >   p->local.pppbind = -1;
        > in der Funktion isdn_net_find_icall() rauswerfen.
       Ich habe die Zeile rausgeschiessen und siehe da es geht.
!verboff

!commenton
(The following question was taken from the syncPPP FAQ)  
!commentoff
Q: A SunISDN tries to dial into my i4l system.
A: The Sun tries to communicate with async ppp. ipppd can't handle this, you
   have to use the ttyI* devices and the standard pppd.


!3Callback

!old
Q: An incoming call is rejected by i4l. i4l then calls back. The reject is not
   recognized by the other side which keeps on dialing to i4l.
A: Most problems with callback can be solved by adjusting the callback delay
   with "isdnctrl cbdelay". One second has been successful in many cases.

Q: Der Callback klappt nicht recht, wieviele ippp*-Devices benötige ich
   mindestens?
A: Manfred Dill <manfred.dill@bmw.de> schrieb dazu am 18. Dez 1996:!br
   Man sollte ein zweites Device ippp1 verwenden, das für den Callback
   benutzt werden kann. Wegen eines Fehlers in i4l wird das erste Device
   benutzt für den Callback und nicht wieder freigegeben. Wenn die Verbindung
   beendet ist wird das dritte Device (falls es existiert) geöffnet und damit
   schließt sich der Kreis. Zum Devices-Verbrauch siehe auch die entsprechende
   Frage im Kapitel Dial-In.

Q: Callback klappt immer noch nicht recht, kann es am Telestreiber liegen?
A: Karsten Keil <isdn4@temic-ech.spacenet.de> schrieb dazu am 10. Jan 1997:
   Beim Teles-Treiber gibt es Probleme mit Callback. Nimm HiSax 1.5 (1.4 hat
   bei Callback auch einen Bug).

!old
Q: When trying callback with Euro-ISDN the call never gets rejected.
A: Karsten Keil <isdn4@temic-ech.spacenet.de> has fixed this with the new
   "HiSax" driver.
   Also see the questions General|HiSax and the section about HiSax.

!old
Q: Somehow i4l can not callback a Cisco?
A: Torsten Hentschel <Torsten.Hentschel@DInet.de> wrote on 3 Oct 1996:
!verbon
     A Cisco may dial so heavily that the ipppd has no chance to callback.
     That's how they are programmed (firm statement of a Cisco developer):
       If a Cisco receives a packet that should be routed through a "dial on
       demand" telephone connection, and there is a D-channel available for
       dialing out it dials out immediately.
     If in such a situation (which has be the case with Delta Internet for half
     a year now) a Cisco with 8 D-channels is on the other side and somebody
     does a simple "ping <RemoteIP>" then the Cisco will use (worst case) all
     8 D-channels to dial out. Of course it can't dial the same telephone
     number with two D-channels in parallel (would be immediately busy). Its
     programming is not so stupid, but it sets up the next D-channel for
     dialout before it assumes the previous D-channel as failed. Such a Cisco
     works like a machine gun in respect to dialout. And i4l won't get a free
     D-channel for dialin if the Cisco doesn't want.
     The bad thing: a Cisco always expects (even when configured on "callback
     client" = i4l dials back) that the other side unhooks the line, then both
     hang up and then comes the callback. Username and password always have to
     be exchanged before the callback is allowed when using ppp, to be sure
     that the person requesting callback is allowed to do so. (Cisco seems to
     obey the rules of the [German] Telekom that no information are to be ex-
     changed without a B-channel connection. A callback request just by caller
     id could in doubt be considered as a transmission of information).
!verboff

Q: Callback von Ascend aus klappt nur wenn ich im Ascendmenue "Active=Yes"
   setze; dann ruft der Ascend mich jedoch dauernd an, selbst wenn meine
   Maschine abgeschaltet ist.
A: Ulrich Klein <ulik@hprc.tandem.com> schrieb dazu am 14. Dez 1996:!br
   Irgendwo in den Ascend-Menus kann man "dial broadcast" auf "no" oder "off"
   setzen. Ansonsten waehlt das Ding bei jedem Broadcast. Das hat zumindest bei
   mir damals geholfen. Falls tatsaechlich jemand aus dem Netz, in dem die
   Ascend haengt, eine Verbindung aufbauen will, helfen nur die merkwuerdigen
   Filter. Ich glaube da gab es einen, mit dem man erreichen kann, dass die 
   Kiste nur fuer Callback rauswaehlt. 

Q: Wie kann ich einen Banzai! per Callback zurückrufen?
A: Jan-Olaf Droese <jano@layla.RoBIN.de> schrieb dazu am 31. Jan 1997:!br
   Auf Banzai-Seite sollte ein `c' an die ausgehende Nummer angehängt
   werden, damit das Teil auf den Rückruf vorbereitet ist. Zur
   Sicherheit kannst Du noch die Anwahlversuche beim Banzai auf 1
   stellen, damit es nicht zu call-collisions kommt.
   Auf i4l-Seite habe ich folgendes eingestellt:
!verbon
       isdnctrl callback isdn0 in
       isdnctrl cbdelay isdn0 1
!verboff

Q: Irgendwie kommt der Module-Count bei Callbacks durcheinander. Wie kann ich
   jetzt meine ISDN-Modul entladen?
A: Karsten Keil <keil@temic-ech.spacenet.de> hat als vorläufigen Workaround
   zwei "geheime" telesctrl-Kommandos eingeführt:
!verbon
        telesctrl <id> 3 1  ---> dec module_count
        telesctrl <id> 4 1  ---> inc module_count
!verboff
   Bitte mit entsprechender Vorsicht handhaben!

!3MPPP

!old
Q: SyncPPP works without problems on one channel. Unfortunately MPPP won't work
   due to communication problems between ipppd and the other side.
A: Michael Hipp <Michael.Hipp@student.uni-tuebingen.de> wrote on 11 Oct 1996:
!verbon
     At first about your bug: the other side does not like the MP-MRU (0x5dc)
     but wants a smaller one (0x5d7) ... which is what ipppd doesn't like (bug)
     ... Just try 0x5d7 as MP-MRU.
     Without a MP-MRU agreed about MPPP won't switch on .. which is why it is
     not working.
!verboff

!2National Peculiarities


!3Germany (1TR6)


!old
Q: Which EAZ should I use for i4l?
A: You can use all available EAZ. However, two EAZ have a special meaning and
   can cause problems:
!verbon
     EAZ 0: global call (all telephones ring)
     EAZ 9: global call (no telephone rings)
!verboff

Q: Ich verwende 1TR6 an einer Nebenstellen - die Durchwahl ist aber
   mehrstellig (z.B. 206). Welches ist meine EAZ?
A: Jens Ey <jens@jeyhh.shnet.org> schrieb dazu am 10. Jan 1997:!br
   Die EAZ bei Nebenstellenanlagen ist meist die letzte Ziffer der Nebenstelle.
   Als EAZ müßtest Du demnach für den Linux-Rechner eine '6' eintragen.

!old
Q: The state machine hangs with 1TR6.
A: Karsten Keil <isdn4@temic-ech.spacenet.de> has fixed that with the new
   "HiSax" driver.
   See questions General|HiSax and the section about the HiSax driver.

!3Italien

Q: Wie sieht unsere MSN aus?
A: In den Niederlanden umfaßt die MSN (im Gegensatz zur deutschen
   Telekom) !u1auch die Vorwahl!u0 - allerdings ohne führende Null. 
   Wäre die eigene Telefonnummer etwa 01234-56789, dann müßte diese 
   folgendermaßen konfiguriert werden:
!verbon
        * Modememulation:
          "AT&e123456789" (ohne Null am Anfang)
        * Netzinterfaces:
          "isdnctrl eaz <interface> 123456789" (ohne Null am Anfang)
          Für Testanrufe an sich selbst:
          "isdnctrl addphone <interface> in 123456789" (ohne Null am Anfang)
          "isdnctrl addphone <interface> out 0123456789" (mit Null am Anfang)
!verboff


!3Niederlande

Q: Wie sieht unsere MSN aus?
A: In den Niederlanden umfaßt die MSN (im Gegensatz zur deutschen
   Telekom) !u1auch die Vorwahl!u0 - allerdings ohne führende Null. 
   Wäre die eigene Telefonnummer etwa 01234-56789, dann müßte diese 
   folgendermaßen konfiguriert werden:
!verbon
        * Modememulation:
          "AT&e123456789" (ohne Null am Anfang)
        * Netzinterfaces:
          "isdnctrl eaz <interface> 123456789" (ohne Null am Anfang)
          Für Testanrufe an sich selbst:
          "isdnctrl addphone <interface> in 123456789" (ohne Null am Anfang)
          "isdnctrl addphone <interface> out 0123456789" (mit Null am Anfang)
!verboff

Q: Wie kann ich isdnlog dazu bringen, die Gebühren nach den Regeln der
   niederländischen Telefongesellschaft zu berechnen?
A: Siehe dazu die gleiche Frage unter "isdnlog" im Kapitel "Konfiguration".

Q: Gibt es sonstige Besonderheiten?
A: Es wird vermutet, daß die niederländische Telefongesellschaft nachts
   manchmal eine TEI verliert. Siehe dazu die Frage "Bei meiner ELSA-Karte
   blinkt öfters die LED, die den Verlust der TEI anzeigt. Meine Verbindungen
   sind leider auch öfter gestört..."

!3Austria

!old
Q: We have neither an MSN nor an EAZ, only a normal plain telephone number.
   What do we have to use for i4l?
A: Bernhard Kruepl <b.kruepl@ieee.org> wrote
!verbon
     In Austria you always have to use "0" as the ingoing EAZ/MSN for the  
     first (or only). Any further MSNs can be set normally.
!verboff

!old
Q: Incoming and outgoing calls won't work ("incoming call without CPN")
A: In Austria ISDN lines are by standard installed !u1without!u0 MSN (which is
   different from Germany). That means when somebody calls the installed ISDN
   number the called party gets signalled a "global call". i4l then says
   "incoming call without CPN" - "CPN" means called party number.
   Solution: Set the incoming "MSN" (in reality: none) to "0", then i4l
   responds to the global call. Otherwise it waits for the signalling of the
   number you told i4l, and that won't happen (happens only for *additional*
   MSN).!br
   On the other hand you should set the outgoing MSN correctly (without area
   code) -- however, a wrong MSN will be replaced with the correct one by your
   telecomunication provider.

!old
Q: Why doesn't my getty answer the EAZ it should respond to if somebody dials
   the "0", the broadcast number? In the log file it says "Incoming call
   without CPN, assuming '0'".
A: CPN=Called Party Number, the number of your own side. It's missing, that's
   why i4l assumes "0". If the getty is configured on another number but "0" it
   will not respond. Let somebody dial with a telephone on the EAZ of your
   getty and check whether all telephones are ringing or just that that that
   was set to the EAZ of your getty. It could also be an error of your
   telephone company.


!3Switzerland


!old
Q: We have neither an MSN nor an EAZ, just a plain telephone number. What do we
   have to use for i4l?
A: Herbert Rosmanith <herp@wildsau.idv.uni-linz.ac.at> wrote:
   In Switzerland you have to use the !u1last number!u0 of your telephone
   number as your MSN/EAZ ("6" if you have the telephone number "123456").

!old
Q: I can only keep a 184 second connection with i4l. After that the connection
   breaks with cause "Temporary failure" since the telephone company uses new
   software for its equipment.
A: That is a bug in i4l - Q.931 demands that there has to be an answer to
   a "STATUS ENQUIRY" frame. This is not yet programmed in i4l.
   Karsten Keil <isdn4@temic-ech.spacenet.de> has fixed it now in the new
   "HiSax" driver. There is a patch named STATUS for the Teles driver.
   See also the question General|HiSax and the section about the HiSax driver.

Q: Wie kann ich isdnlog dazu bringen, die Gebühren nach den Regeln der
   schweizer Telefongesellschaft zu berechnen?
A: Siehe dazu die gleiche Frage unter "isdnlog" im Kapitel "Konfiguration".



!3Portugal

Q: Was müssen wir als MSN setzen?
A: Solange nicht mehrere Telefonnummern bzw. MSNs beantragt wurden, wird
   von der Telefongesellschaft keine Telefonnummer übermittelt. Entsprechend
   muß "0" als MSN verwendet werden. Wurden mehrere MSNs beantragt, so sind
   diese normal zu setzen.

!3Nordamerika

Q: Können wir isdn4linux in Nordamerika einsetzen?
A: Ja, die Firma "Spellcaster" hat für ihre eigenen Karten entsprechende
   isdn4linux-Treiber geschrieben. Nähere Informationen gibt es bei:
!verbon
        Ian James
        Customer Service Manager
        SpellCaster Telecommunications Inc.
        73 Laird Drive, Suite 206
        Toronto, Ontario
        Canada M4G 3T4
        Phone: 1 (800) 238-0547
        Fax: (416) 425-0854
        E-mail:  ipj@spellcast.com or sales@spellcast.com
        http://www.spellcast.com
!verboff

Q: Warum kann ich keine europäischen ISDN-Karten in Nordamerika einsetzen?
A: In Europa stellt üblicherweise die Telefongesellschaft den Netzabschluß zur
   Verfügung (NTBA). In Nordamerika muß sich üblicherweise !u1der Kunde!u0 ein
   solches Gerät (NT-1) besorgen! Die meisten ISDN-Karten bieten deshalb einen
   integriertem NT-1 an.!br
   Zudem gibt es weitere Unterschiede. Während z.B. in Europa ein PRI (Primary
   Rate Interface) 30 B-Kanäle umfaßt, sind es in Nordamerika nur 23.

Q: Welches Protokoll wird in Nordamerika gefahren?
A: Es wird NI-1 verwendet - ein Verwandter von DSS1. Beide gehören zu den
   Q.931 Protokollen, realisieren aber unterschiedliche Funktionsbereiche und
   sind deshalb nicht zueinander kompatibel.    


!2Miscellaneous


!old
Q: Why not adjust the clock of my computer with ISDN?
A: Isdnlog offers this feature with option "-t". Unfortunately, the seconds are
   not transmitted via ISDN, and the transmitted time is not very accurate -
   depending on the ISDN equipment of your telephone company there may be a
   deviation of several minutes (!).
   It's better to get a PC clock that is set by radio signals and check it with,
   for example, xntp. You can also use a time server in the internet with
   "netdate" or "rdate". One time server can be found in Cologne:
   time.rrz.uni-koeln.de, but there are many more.

Q: Where can I find informationen on the dip switches of my NTBA?
A: !link ftp://novix.oih.rwth-aachen.de/pub/ntba.zip; (ca. 170kB)

Q: Can I connect two ISDN devices directly with a kind of "null modem cable"?
A: No, that's not possible. The concept of ISDN doesn't allow it. A NTBA or a
   PBX with an internal bus is required.

!old
Q: Where can I get documentation on Siemens' HSCX and ISAC chips?
A: Alexander List <alex@ag.or.at> wrote:
!verbon
     !link http://www.siemens.de/;, there are a lot of PDF files available.
     If a CD-ROM is ok: Technical Product Information for Siemens
     Semiconductors, order# B192-H6641-X5-X-7400
     Siemens AG, Semiconductor Group, Balanstr. 73, Pf. 801709, D-81617
     Muenchen, Fax 089-4144-3952.
!verboff
   Beat Doebeli <beat@castle.swill.org> wrote:
!verbon
     From the Siemens handbook:
       Place your order at:
       Siemens AG
       LZF Semiconductor Book Shop
       Postfach 2352
       90713 Fuerth-Bislohe
       Tel (0911)3001-220/224
       Fax (0911)3001-238
       Price groups (1994)
       I    DM  5.-
       II   DM 10.-
       III  DM 20.-
       IV   DM 30.-
       ISAC S PEB 2085; PEB 2086 ISDN Subscriber Access Controller
       Order# B115-H6485-G1-X-7600, 328 pages price category IV
       HSCX - High Level Serial Communication Controller Extended
       Order# B115-H6520-G1-X-7600, 140 pages price category III
       oder as CD-ROM
       Technical Product Information for Communication ICs (Edition 1, Jun 95)
       Order# B193-H6905-X-X-7400, price ?
!verboff

!old
Q: Where can I find the "bat" book about configuration of sendmail?
A: dietmar <dietmar@highway.bertelsmann.de> wrote on 8 Oct 1996:
!verbon
     O'Reilly catalog 1997 (brand new from the book fair):
     "book dealers report to us, that some books are so strongly associated with
     animals that many clients won't ask for the normal title, but just for the
     (i.e.) 'camel book' (Programming Perl)."
!verboff
   In a _good_ book shop you should find the following:
!verbon
     Title:  sendmail (3rd edition 9/94)
     Author: Costales, Allman, Rickert
     ISBN:   1-56592-056-2
     Costs:  66.-- DM
   More on:
     !link http://www.ora.com/catalog/sendmail/noframes.html;
     !link http://www.lob.de/;
!verboff
